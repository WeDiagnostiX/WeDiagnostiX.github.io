/*! For license information please see 1556.bundle.bd31be5c816f0b32ee2d.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1556],{5057:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(53586),i=n(48080),o=n(92885),a=n(71209);function s(e,t){const n=e.image;if(!e.canvas||!e.image)return;const s=(0,r.A)();if(n.stats={lastGetPixelDataTime:-1,lastStoredPixelDataToCanvasImageDataTime:-1,lastPutImageDataTime:-1,lastRenderTime:-1,lastLutGenerateTime:-1},n){let r=n.render;r||(r=e.viewport.colormap?a.l:n.color?i.f:o.j),r(e,t)}const c=(0,r.A)()-s;n.stats.lastRenderTime=c,e.invalid=!1,e.needsRedraw=!1}},7808:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(45354);function i(e,t){const n=new r.d;if(!e.viewport.displayedArea)return n;n.translate(e.canvas.width/2,e.canvas.height/2);const i=e.viewport.rotation;0!==i&&n.rotate(i*Math.PI/180);let o=e.viewport.scale,a=e.viewport.scale;const s=e.viewport.displayedArea.brhc.x-(e.viewport.displayedArea.tlhc.x-1),c=e.viewport.displayedArea.brhc.y-(e.viewport.displayedArea.tlhc.y-1);if("NONE"===e.viewport.displayedArea.presentationSizeMode)e.image.rowPixelSpacing<e.image.columnPixelSpacing?o*=e.image.columnPixelSpacing/e.image.rowPixelSpacing:e.image.columnPixelSpacing<e.image.rowPixelSpacing&&(a*=e.image.rowPixelSpacing/e.image.columnPixelSpacing);else if(o=e.viewport.displayedArea.columnPixelSpacing,a=e.viewport.displayedArea.rowPixelSpacing,"SCALE TO FIT"===e.viewport.displayedArea.presentationSizeMode){const t=e.canvas.height/(c*a),n=e.canvas.width/(s*o);o=a=Math.min(n,t),e.viewport.displayedArea.rowPixelSpacing<e.viewport.displayedArea.columnPixelSpacing?o*=e.viewport.displayedArea.columnPixelSpacing/e.viewport.displayedArea.rowPixelSpacing:e.viewport.displayedArea.columnPixelSpacing<e.viewport.displayedArea.rowPixelSpacing&&(a*=e.viewport.displayedArea.rowPixelSpacing/e.viewport.displayedArea.columnPixelSpacing)}return n.scale(o,a),0!==i&&n.rotate(-i*Math.PI/180),n.translate(e.viewport.translation.x,e.viewport.translation.y),0!==i&&n.rotate(i*Math.PI/180),void 0!==t&&n.scale(t,t),e.viewport.hflip&&n.scale(-1,1),e.viewport.vflip&&n.scale(1,-1),n.translate(-s/2,-c/2),n}},36931:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(12132),i=n(57162);function o(e,t,n,o){if(void 0===e)throw new Error("getDefaultViewport: parameter canvas must not be undefined");if(void 0===t)return(0,r.A)();const a=(0,i.A)(e,t,0).scaleFactor;let s;return"PT"===n&&t.isPreScaled?s={windowWidth:5,windowCenter:2.5}:void 0!==t.windowWidth&&void 0!==t.windowCenter&&(s={windowWidth:Array.isArray(t.windowWidth)?t.windowWidth[0]:t.windowWidth,windowCenter:Array.isArray(t.windowCenter)?t.windowCenter[0]:t.windowCenter}),{scale:a,translation:{x:0,y:0},voi:s,invert:t.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:t.modalityLUT,modality:n,voiLUT:t.voiLUT,colormap:void 0!==o?o:t.colormap,displayedArea:{tlhc:{x:1,y:1},brhc:{x:t.columns,y:t.rows},rowPixelSpacing:void 0===t.rowPixelSpacing?1:t.rowPixelSpacing,columnPixelSpacing:void 0===t.columnPixelSpacing?1:t.columnPixelSpacing,presentationSizeMode:"NONE"}}}},98834:(e,t,n)=>{n.d(t,{oI:()=>r.Ay,A7:()=>i.A});n(18897),n(92099);var r=n(30135),i=n(10809);n(46347);n(90740)},90808:(e,t,n)=>{},31749:(e,t,n)=>{n.d(t,{Events:()=>r.A,ImageQualityStatus:()=>p.A,InterpolationType:()=>a.A,MetadataModules:()=>y.A,OrientationAxis:()=>d.A,RequestType:()=>i.A,VOILUTFunctionType:()=>g.A,VideoEnums:()=>v,ViewportStatus:()=>h.A,ViewportType:()=>o.A});var r=n(32643),i=n(43213),o=n(41864),a=n(29310),s=n(67737);const{BlendMode:c}=s.Ay;var l;!function(e){e[e.COMPOSITE=c.COMPOSITE_BLEND]="COMPOSITE",e[e.MAXIMUM_INTENSITY_BLEND=c.MAXIMUM_INTENSITY_BLEND]="MAXIMUM_INTENSITY_BLEND",e[e.MINIMUM_INTENSITY_BLEND=c.MINIMUM_INTENSITY_BLEND]="MINIMUM_INTENSITY_BLEND",e[e.AVERAGE_INTENSITY_BLEND=c.AVERAGE_INTENSITY_BLEND]="AVERAGE_INTENSITY_BLEND"}(l||(l={}));var u,d=n(18735);!function(e){e.CONTOUR="CONTOUR",e.SURFACE="SURFACE"}(u||(u={}));n(86066);var f,g=n(82501);n(91369);!function(e){e.NOT_APPLICABLE="",e.ERMF="ERMF",e.USER="User",e.PROJECTION="Proj",e.REGION="Region",e.ERROR="Error",e.UNCALIBRATED="Uncalibrated"}(f||(f={}));var m,h=n(1814),p=n(77474),v=n(13545),y=n(69850);!function(e){e.SUM="SUM",e.SUBTRACT="SUBTRACT",e.AVERAGE="AVERAGE"}(m||(m={}))},86846:(e,t,n)=>{n.d(t,{Ay:()=>i});var r=n(39536);function i(e){if(!e)return;const{viewportUid:t,renderingEngineUid:n}=e.dataset;return o(t,n)}function o(e,t){if(!t||!e)return;const n=(0,r.Ay)(t);if(!n||n.hasBeenDestroyed)return;const i=n.getViewport(e);if(!i)return;const o=i.getFrameOfReferenceUID();return{viewport:i,renderingEngine:n,viewportId:e,renderingEngineId:t,FrameOfReferenceUID:o}}},15327:(e,t,n)=>{n.d(t,{CONSTANTS:()=>r,StackViewport:()=>o.A,VolumeViewport:()=>i.A,metaData:()=>a,utilities:()=>p});n(31749);var r=n(19325),i=(n(56706),n(18897),n(92099),n(30135),n(94155)),o=(n(40893),n(46347),n(58165)),a=(n(32501),n(81466),n(10056),n(10364),n(39536),n(58927),n(49038),n(91073),n(51159),n(86846),n(74876));n(59693);const s=Symbol("DefaultSettings"),c=Symbol("RuntimeSettings"),l=Symbol("ObjectSettingsMap"),u=Symbol("Dictionary");class d{constructor(e){const t=Object.create(e instanceof d&&u in e?e[u]:null);Object.seal(Object.defineProperty(this,u,{value:t}))}set(e,t){return g(this[u],e,t,null)}get(e){return function(e,t){return e[t]}(this[u],e)}unset(e){return function(e,t){if(t.endsWith(".")){let n=0;const r=t,i=r.slice(0,-1),o=0===i.length;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o||t.startsWith(r)||t===i)&&(delete e[t],++n);return n>0}return delete e[t]}(this[u],e+"")}forEach(e){f(this[u],e)}extend(){return new d(this)}import(e){m(e)&&Object.keys(e).forEach(t=>{g(this[u],t,e[t],null)})}dump(){const e={};return f(this[u],(t,n)=>{void 0!==n&&h(e,t,n)}),e}static assert(e){return e instanceof d?e:d.getRuntimeSettings()}static getDefaultSettings(e=null){let t=d[s];if(t instanceof d||(t=new d,d[s]=t),e){const n={};return t.forEach(r=>{if(r.startsWith(e)){const i=r.split(`${e}.`)[1];n[i]=t.get(r)}}),n}return t}static getRuntimeSettings(){let e=d[c];return e instanceof d||(e=new d(d.getDefaultSettings()),d[c]=e),e}static getObjectSettings(e,t){let n=null;if(e instanceof d)n=e;else if("object"==typeof e&&null!==e){let r=d[l];r instanceof WeakMap||(r=new WeakMap,d[l]=r),n=r.get(e),n instanceof d||(n=new d(d.assert(d.getObjectSettings(t))),r.set(e,n))}return n}static extendRuntimeSettings(){return d.getRuntimeSettings().extend()}}function f(e,t){for(const n in e)t(n,e[n])}function g(e,t,n,r){return!!function(e){let t,n,r;if("string"!=typeof e||(t=e.length-1)<0)return!1;r=-1;for(;(n=e.indexOf(".",r+1))>=0;){if(n-r<2||n===t)return!1;r=n}return!0}(t)&&(m(n)?function(e,t,n,r){let i;if(r.has(n))return g(e,t,null,r);r.add(n),i=0;for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(g(e,0===o.length?t:`${t}.${o}`,n[o],r)||++i);return r.delete(n),0===i}(e,t,n,r instanceof WeakSet?r:new WeakSet):(e[t]=n,!0))}function m(e){if("object"==typeof e&&null!==e){const t=Object.getPrototypeOf(e);if(t===Object.prototype||null===t)return!0}return!1}function h(e,t,n){const r=t.indexOf(".");if(r>=0){const i=t.slice(0,r);let o=e[i];if("object"!=typeof o||null===o){const t=o;o={},void 0!==t&&(o[""]=t),e[i]=o}h(o,t.slice(r+1,t.length),n)}else e[t]=n}d.getDefaultSettings().set("useCursors",!0);n(39561),n(80068),n(98181),n(36822);var p=n(49035);n(69372),n(55500),n(55509),n(98834)},59693:(e,t,n)=>{n.d(t,{lk:()=>s,D0:()=>u,LH:()=>c,Dh:()=>l,a:()=>d});n(39536),n(74268),n(99178),n(31749),n(24743);let r=!1;const i={gpuTier:{tier:2},isMobile:!1,rendering:{useCPURendering:!1,preferSizeOverAccuracy:!1,strictZSpacingForVolumeViewport:!0},peerImport:e=>null};let o={...i,rendering:{...i.rendering}};function a(){return!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&navigator.platform.includes("MacIntel")}function s(){return!a()}function c(){return o.rendering.useCPURendering}function l(){return r}function u(){return o}function d(e){return o.peerImport(e)}},98181:(e,t,n)=>{n(98455),n(49038),n(31749);n(90808);n(32643),n(10364),n(69372)},80068:(e,t,n)=>{n.d(t,{loadAndCacheImage:()=>g,loadImage:()=>f});var r=n(49038),i=n(32643),o=n(10364),a=(n(27119),n(99576),n(69372)),s=(n(80221),n(24623));n(51159),n(74876);const c={};let l;function u(e,t){const n=r.Ay.getImageLoadObject(e);if(n)return d(n.promise,e),n;const i=e.split(":")[0],o=c[i]||l;if(!o)throw new Error(`loadImageFromImageLoader: No image loader found for scheme '${i}'`);const a=o(e,t);return d(a.promise,e),a}function d(e,t){Promise.resolve(e).then(e=>{!function(e){if(!e.voxelManager){const{width:t,height:n,numberOfComponents:r}=e,i=s.A.createImageVoxelManager({scalarData:e.getPixelData(),width:t,height:n,numberOfComponents:r});e.voxelManager=i,e.getPixelData=()=>i.getScalarData(),delete e.imageFrame.pixelData}}(e),(0,a.A)(o.A,i.A.IMAGE_LOADED,{image:e})}).catch(e=>{const n={imageId:t,error:e};(0,a.A)(o.A,i.A.IMAGE_LOAD_FAILED,n)})}function f(e,t={priority:0,requestType:"prefetch"}){if(void 0===e)throw new Error("loadImage: parameter imageId must not be undefined");return u(e,t).promise}function g(e,t={priority:0,requestType:"prefetch"}){if(void 0===e)throw new Error("loadAndCacheImage: parameter imageId must not be undefined");const n=u(e,t);return r.Ay.getImageLoadObject(e)||r.Ay.putImageLoadObject(e,n),n.promise}},39561:(e,t,n)=>{n.d(t,{createAndCacheVolume:()=>f,getUnknownVolumeLoaderSchema:()=>m,getVolumeLoaderSchemes:()=>g,loadVolume:()=>d});n(7742),n(86252);var r=n(49038),i=n(32643),o=n(10364),a=n(69372),s=(n(80221),n(24623),n(80068),n(9734),n(55500));const c={};let l=s.F;function u(e,t){const n=e.indexOf(":"),r=e.substring(0,n);let s=c[r];if(null==s){if(null==l||"function"!=typeof l)throw new Error(`No volume loader for scheme ${r} has been registered`);s=l}const u=s(e,t);return u.promise.then(function(e){(0,a.A)(o.A,i.A.VOLUME_LOADED,{volume:e})},function(t){const n={volumeId:e,error:t};(0,a.A)(o.A,i.A.VOLUME_LOADED_FAILED,n)}),u}function d(e,t={imageIds:[]}){if(void 0===e)throw new Error("loadVolume: parameter volumeId must not be undefined");let n=r.Ay.getVolumeLoadObject(e);return void 0!==n?n.promise:(n=u(e,t),n.promise.then(e=>e))}async function f(e,t){if(void 0===e)throw new Error("createAndCacheVolume: parameter volumeId must not be undefined");let n=r.Ay.getVolumeLoadObject(e);return void 0!==n||(n=u(e,t),r.Ay.putVolumeLoadObject(e,n)),n.promise}function g(){return Object.keys(c)}function m(){return l.name}},22191:(e,t,n)=>{n.d(t,{A:()=>r});class r{constructor(e){this.name=e||"unknown"}static as(e){if(e.iterator)return e.iterator;const t=new r("as iterator");return e.then(e=>{try{t.add(e,!0)}catch(e){t.reject(e)}},e=>{t.reject(e)}),t}add(e,t=!1){this.nextValue=e,this.done||=t,this.waiting&&(this.waiting.resolve(e),this.waiting=void 0)}resolve(){this.done=!0,this.waiting&&(this.waiting.resolve(this.nextValue),this.waiting=void 0)}reject(e){this.rejectReason=e,this.waiting?.reject(e)}getRecent(){if(this.rejectReason)throw this.rejectReason;return this.nextValue}async*[Symbol.asyncIterator](){for(;!this.done;){if(this.rejectReason)throw this.rejectReason;if(void 0!==this.nextValue&&(yield this.nextValue,this.done))break;this.waiting||(this.waiting={},this.waiting.promise=new Promise((e,t)=>{this.waiting.resolve=e,this.waiting.reject=t})),await this.waiting.promise}yield this.nextValue}async forEach(e,t){let n=0;try{for await(const r of this){const{done:i}=this;try{await e(r,i,n),n++}catch(e){if(!i){console.warn("Caught exception in intermediate value",e);continue}if(!t)throw e;t(e,i)}}}catch(e){if(!t)throw e;t(e,!0)}}generate(e,t){return e(this,this.reject.bind(this)).then(()=>{this.done||this.resolve()},e=>{this.reject(e),t?t(e):console.warn("Couldn't process because",e)})}async nextPromise(){for await(const e of this)if(e)return e;return this.nextValue}async donePromise(){for await(const e of this);return this.nextValue}getNextPromise(){const e=this.nextPromise();return e.iterator=this,e}getDonePromise(){const e=this.donePromise();return e.iterator=this,e}}},67645:(e,t,n)=>{n.d(t,{A:()=>r});class r{constructor(e,t,n=1){this.rows=new Map,this.height=1,this.width=1,this.depth=1,this.jMultiple=1,this.kMultiple=1,this.numberOfComponents=1,this.defaultValue=0,this.pixelDataConstructor=Uint8Array,this.get=e=>{const t=e%this.jMultiple,n=(e-t)/this.jMultiple,r=this.getRLE(t,n);return r?.value||this.defaultValue},this.getRun=(e,t)=>{const n=e+t*this.height;return this.rows.get(n)},this.set=(e,t)=>{if(void 0===t)throw new Error("Can't set undefined at "+e%this.width);const n=e%this.width,r=(e-n)/this.width,i=this.rows.get(r);if(!i)return void this.rows.set(r,[{start:n,end:n+1,value:t}]);const o=this.findIndex(i,n),a=i[o],s=i[o-1];if(!a)return s&&s.value===t&&s.end===n?void s.end++:void(i[o]={start:n,end:n+1,value:t});const{start:c,end:l,value:u}=a;if(t===u&&n>=c)return;const d={start:n,end:n+1,value:t},f=n>c,g=f?o+1:o,m=f?a:s;let h=f?i[o+1]:a;if(m?.value===t&&m.end===n)return m.end++,void(h?.value===t&&h.start===n+1?(m.end=h.end,i.splice(o,1)):h?.start===n&&(h.start++,h.start===h.end&&(i.splice(o,1),h=i[o],h?.start===n+1&&h.value===t&&(m.end=h.end,i.splice(o,1)))));if(h?.value===t&&h.start===n+1)return h.start--,void(m?.end>n&&(m.end=n,m.end===m.start&&i.splice(o,1)));if(h?.start===n&&h.end===n+1){h.value=t;const e=i[o+1];return void(e?.start==n+1&&e?.value===t&&(i.splice(o+1,1),h.end=e.end))}n===h?.start&&h.start++,f&&l>n+1?i.splice(g,0,d,{start:n+1,end:m.end,value:m.value}):i.splice(g,0,d),m?.end>n&&(m.end=n)},this.width=e,this.height=t,this.depth=n,this.jMultiple=e,this.kMultiple=this.jMultiple*t}getRLE(e,t,n=0){const r=this.rows.get(t+n*this.height);if(!r)return;const i=r[this.findIndex(r,e)];return e>=i?.start?i:void 0}findIndex(e,t){for(let n=0;n<e.length;n++){const{end:r}=e[n];if(t<r)return n}return e.length}clear(){this.rows.clear()}keys(){return[...this.rows.keys()]}getPixelData(e=0,t){t?t.fill(0):t=new this.pixelDataConstructor(this.width*this.height*this.numberOfComponents);const{width:n,height:r,numberOfComponents:i}=this;for(let o=0;o<r;o++){const r=this.getRun(o,e);if(r)if(1===i)for(const e of r){const r=o*n,{start:i,end:a,value:s}=e;for(let e=i;e<a;e++)t[r+e]=s}else for(const e of r){const r=o*n*i,{start:a,end:s,value:c}=e;for(let e=a;e<s;e+=i)for(let n=0;n<i;n++)t[r+e+n]=c[n]}}return t}}},98039:(e,t,n)=>{function r(e){return i(e,"vtkVolume")||i(e,"vtkImageSlice")}function i(e,t){return!!("isA"in e?e:e.actor).isA(t)}n.d(t,{N:()=>i,e:()=>r})},96833:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(33739),i=n(99341);function o(e,t){const n=t.colorTransfer.split(" ").splice(1).map(parseFloat),{shiftRange:o}=function(e){let t=1/0,n=-1/0;for(let r=0;r<e.length;r+=4)t=Math.min(t,e[r]),n=Math.max(n,e[r]);const r=(n-t)/2;return{shiftRange:[-r,r],min:t,max:n}}(n),a=o[0],s=o[1]-o[0],c=r.Ay.newInstance(),l=[];for(let e=0;e<n.length;e+=4){let t=n[e];const r=n[e+1],i=n[e+2],o=n[e+3];t=(t-a)/s,l.push([t,r,i,o])}!function(e,t,n){const r=t[1]-t[0],i=e.map(([e,n,i,o])=>[e*r+t[0],n,i,o]);n.removeAllPoints(),i.forEach(([e,t,r,i])=>n.addRGBPoint(e,t,r,i))}(l,o,c),e.getProperty().setRGBTransferFunction(0,c);const u=t.scalarOpacity.split(" ").splice(1).map(parseFloat),d=i.Ay.newInstance(),f=[];for(let e=0;e<u.length;e+=2){let t=u[e];const n=u[e+1];t=(t-a)/s,f.push([t,n])}!function(e,t,n){const r=t[1]-t[0],i=e.map(([e,n])=>[e*r+t[0],n]);n.removeAllPoints(),i.forEach(([e,t])=>n.addPoint(e,t))}(f,o,d);const g=e.getProperty();g.setScalarOpacity(0,d);const[m,h,p,v]=t.gradientOpacity.split(" ").splice(1).map(parseFloat);g.setUseGradientOpacity(0,!0),g.setGradientOpacityMinimumValue(0,m),g.setGradientOpacityMinimumOpacity(0,h),g.setGradientOpacityMaximumValue(0,p),g.setGradientOpacityMaximumOpacity(0,v),"1"===t.interpolation&&g.setInterpolationTypeToFastLinear(),g.setShade("1"===t.shade);const y=parseFloat(t.ambient),w=parseFloat(t.diffuse),A=parseFloat(t.specular),I=parseFloat(t.specularPower);g.setAmbient(y),g.setDiffuse(w),g.setSpecular(A),g.setSpecularPower(I)}},91979:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(39536),i=n(24724);const o=e=>{const t=function(e){const t=(0,r.qO)(),n=[];return t.forEach(t=>{const r=(0,i.A)(e);r.length&&n.push({renderingEngine:t,viewportIds:r.map(e=>e.id)})}),n}(e);t?.length&&t.forEach(({renderingEngine:e,viewportIds:t})=>{e.hasBeenDestroyed||e.renderViewports(t)})}},84061:(e,t,n)=>{function r(e,t,n){return Math.max(t,Math.min(n,e))}n.d(t,{A:()=>r,q:()=>r})},13859:(e,t,n)=>{n.r(t),n.d(t,{findMatchingColormap:()=>u,getColormap:()=>c,getColormapNames:()=>l,registerColormap:()=>s});var r=n(50761),i=n(74638),o=n(98039);const a=new Map;function s(e){a.set(e.Name,e)}function c(e){return a.get(e)}function l(){return Array.from(a.keys())}function u(e,t){const n=r.A.rgbPresetNames.map(e=>r.A.getPresetByName(e)),a=l().map(e=>c(e)),s=n.concat(a).find(t=>{const{RGBPoints:n}=t;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t+=4)if(!(0,i.Ay)(n.slice(t+1,t+4),e.slice(t+1,t+4)))return!1;return!0});if(!s)return null;const u=[];if((0,o.N)(t,"vtkVolume")){const e=t.getProperty().getScalarOpacity(0).getDataPointer();if(!e)return{name:s.Name};for(let t=0;t<e.length;t+=2)u.push({value:e[t],opacity:e[t+1]})}return{name:s.Name,opacity:u}}},74657:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(33739);function i(e){const t=r.Ay.newInstance();let n=0,i=1024;return void 0!==e.lower&&void 0!==e.upper&&(n=e.lower,i=e.upper),t.addRGBPoint(n,0,0,0),t.addRGBPoint(i,1,1,1),t}},40256:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(33739),i=n(42008),o=n(68136);function a(e,t=1024){const{windowWidth:n,windowCenter:a}=o.toWindowLevel(e.lower,e.upper),s=Array.from({length:t},(e,n)=>(n+1)/(t+2)).flatMap(e=>{const t=((e,t,n)=>t-n/4*Math.log((1-e)/e))(e,a,n);return[t,e,e,e,.5,0]}),c=r.Ay.newInstance();return c.buildFunctionFromArray(i.Ay.newInstance({values:s,numberOfComponents:6})),c}},63470:(e,t,n)=>{function r(e,t,n=0){const r=[];for(let i=n;i<e.length;i+=t)r.push(i);return r}n.d(t,{A:()=>r})},99949:(e,t,n)=>{function r(e){if(null===e||"object"!=typeof e)return e;if("function"==typeof e)return e;if("function"==typeof structuredClone)return e;if(Array.isArray(e))return e.map(r);{const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=r(e[n]));return t}}n.d(t,{G:()=>r})},88619:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(3823),i=n(74876),o=n(85008),a=n(19325);function s(e,t,n){const{direction:s,spacing:c,imageIds:l}=e;if(!l.length)return;const u=s.slice(6,9),d=r.eR.dot(u,n);if(Math.abs(d)<1-a.EPSILON)return;const f=(0,o.A)({direction:s,spacing:c},n)/2;let g;for(let e=0;e<l.length;e++){const o=l[e],{imagePositionPatient:a}=i.get("imagePlaneModule",o),s=r.eR.create();r.eR.sub(s,t,a);const c=r.eR.dot(s,n);Math.abs(c)<f&&(g=o)}return g}},47476:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(20537),i=n(65292);const o=function(e){const t=e.getCamera(),{spacingInNormalDirection:n,imageVolume:o}=(0,i.A)(e,t);if(!o)return;const{viewPlaneNormal:a,focalPoint:s}=t,c=e.getActors().find(e=>e.referencedId===o.volumeId||e.uid===o.volumeId);c||console.warn("No actor found for with actorUID of",o.volumeId);const l=c.actor,u=(0,r.A)(l,a,s),{min:d,max:f,current:g}=u,m=Math.round((f-d)/n)+1;let h=(g-d)/(f-d)*m;return h=Math.floor(h),h>m-1?h=m-1:h<0&&(h=0),{numberOfSlices:m,imageIndex:h}}},25308:(e,t,n)=>{function r(e){let t,n=e[0],r=e[0];const i=e.length;for(let o=1;o<i;o++)t=e[o],n=Math.min(n,t),r=Math.max(r,t);return{min:n,max:r}}n.d(t,{A:()=>r})},32173:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(74876);function i(e){const t=r.get("modalityLutModule",e)||{},n=r.get("generalSeriesModule",e)||{},{modality:i}=n,o={rescaleSlope:t.rescaleSlope||1,rescaleIntercept:t.rescaleIntercept??0,modality:i},a=r.get("scalingModule",e)||{};return{...o,..."PT"===i&&{suvbw:a.suvbw,suvbsa:a.suvbsa,suvlbm:a.suvlbm}}}},20537:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(89265),i=n(15105),o=n(19325);const a=o.EPSILON*o.EPSILON,s=e=>Math.abs(Math.abs(e)-1)<a,c=(e,t)=>s(e[t])||s(e[t+1])||s(e[t+2]),l=e=>c(e,0)&&c(e,3)&&c(e,6);function u(e,t,n){const o=e.getMapper().getInputData();let a;const s=o.getDirection();if(l(s))a=(0,i.A)(e);else{const[e,t,n]=o.getDimensions();a=[[0,0,0],[e-1,0,0],[0,t-1,0],[e-1,t-1,0],[0,0,n-1],[e-1,0,n-1],[0,t-1,n-1],[e-1,t-1,n-1]].map(e=>o.indexToWorld(e))}const c=r.A.buildFromDegree().identity().rotateFromDirections(t,[1,0,0]);a.forEach(e=>c.apply(e));const u=[...n];c.apply(u);const d=u[0];let f=1/0,g=-1/0;for(let e=0;e<8;e++){const t=a[e][0];t>g&&(g=t),t<f&&(f=t)}return{min:f,max:g,current:d,actor:e,viewPlaneNormal:t,focalPoint:n}}},85008:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(3823);function i(e,t){const{direction:n,spacing:i}=e,o=n.slice(0,3),a=n.slice(3,6),s=n.slice(6,9),c=[r.eR.dot(o,t),r.eR.dot(a,t),r.eR.dot(s,t)],l=r.eR.create();r.eR.set(l,c[0]*i[0],c[1]*i[1],c[2]*i[2]);return r.eR.length(l)}},65292:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(49038),i=n(19325),o=n(85008),a=n(39561),s=n(12437);const c=1+i.EPSILON,l=e=>!!(0,a.getVolumeLoaderSchemes)().find(t=>{return n=e.volumeId,(r=t)===n.substring(0,Math.min(n.length,r.length));var n,r});function u(e,t,n,i=!1){const{viewPlaneNormal:o}=t,a=e.getActors();if(!a.length)return{spacingInNormalDirection:null,imageVolume:null,actorUID:null};const u=a.map(e=>{const t=e.referencedId??e.uid;return r.Ay.getVolume(t)}).filter(e=>!!e);if(n){const t=(0,s.A)(n),r=u.findIndex(e=>t.includes(e.volumeId)),c=u[r],{uid:l}=a[r];return{imageVolume:c,spacingInNormalDirection:d(c,o,e,i),actorUID:l}}if(!u.length)return{spacingInNormalDirection:null,imageVolume:null,actorUID:null};const f={spacingInNormalDirection:1/0,imageVolume:null,actorUID:null},g=u.find(l);for(let t=0;t<u.length;t++){const n=u[t];if(g&&!l(n))continue;const r=d(n,o,e);r*c<f.spacingInNormalDirection&&(f.spacingInNormalDirection=r,f.imageVolume=n,f.actorUID=a[t].uid)}return f}function d(e,t,n,r=!1){const{slabThickness:i}=n.getProperties();let a=i;return i&&r||(a=(0,o.A)(e,t)),a}},24724:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(39536);const i=function(e){const t=(0,r.qO)(),n=[];return t.forEach(t=>{const r=t.getVolumeViewports().filter(t=>t.hasVolumeId(e));n.push(...r)}),n}},70210:(e,t,n)=>{function r(e){let t=[];const[n,r]=e.getRange();e.getTable(n,r,1024,t),t=t.filter((e,t)=>t%3==0);const i=[...Array(1024).keys()].map((e,t)=>n+(r-n)/1023*t),o=t[256],a=Math.log((1-o)/o),s=i[256],c=t[768],l=Math.log((1-c)/c),u=i[768],d=Math.round(4*(u-s)/(a-l)),f=Math.round(s+d*a/4);return[Math.round(f-d/2),Math.round(f+d/2)]}n.d(t,{A:()=>r})},15105:(e,t,n)=>{function r(e){const t=e.getMapper().getInputData(),n=t.extentToBounds(t.getExtent());return[[n[0],n[2],n[4]],[n[0],n[2],n[5]],[n[0],n[3],n[4]],[n[0],n[3],n[5]],[n[1],n[2],n[4]],[n[1],n[2],n[5]],[n[1],n[3],n[4]],[n[1],n[3],n[5]]]}n.d(t,{A:()=>r})},12437:(e,t,n)=>{n.d(t,{A:()=>r});const r=e=>{const t="volumeId:",n=e.includes(t)?e.substring(9):e,r=n.indexOf("sliceIndex=");return-1===r?n:n.substring(0,r-1)}},4031:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(20537),i=n(65292);const o=function(e,t,n=!1){const o=e.getCamera(),{focalPoint:a,viewPlaneNormal:s}=o,{spacingInNormalDirection:c,actorUID:l}=(0,i.A)(e,o,t,n);if(!l)throw new Error(`Could not find image volume with id ${t} in the viewport`);const u=e.getActor(l);if(!u)return console.warn("No actor found for with actorUID of",l),null;const d=u.actor;return{sliceRange:(0,r.A)(d,s,a),spacingInNormalDirection:c,camera:o}}},61375:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(4031);const i=function(e,t,n=!1){const{sliceRange:i,spacingInNormalDirection:o,camera:a}=(0,r.A)(e,t,n),{min:s,max:c,current:l}=i,u=Math.round((c-s)/o),d=(l-s)/(c-s)*u;return{numScrollSteps:u,currentStepIndex:Math.round(d),sliceRangeInfo:{sliceRange:i,spacingInNormalDirection:o,camera:a}}}},30169:(e,t,n)=>{n.d(t,{a:()=>r});const r=e=>Object.values(e).some(e=>"number"==typeof e&&!Number.isInteger(e))},38883:(e,t,n)=>{function r(e){return Array.isArray(e)?e.some(e=>Number.isNaN(e)):Number.isNaN(e)}n.d(t,{A:()=>r})},39537:(e,t,n)=>{function r(e){const t=e.indexOf(":");return e.substring(t+1)}n.d(t,{A:()=>r})},17791:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(74876);const i=new Map,o="imageRetrieveConfiguration",a={IMAGE_RETRIEVE_CONFIGURATION:o,clear:()=>{i.clear()},add:(e,t)=>{i.set(e,t)},clone:()=>new Map(i),restore:e=>{i.clear(),e.forEach((e,t)=>{i.set(t,e)})},get:(e,...t)=>{if(e===o)return t.map(e=>i.get(e)).find(e=>void 0!==e)}};(0,r.addProvider)(a.get.bind(a));const s=a},49035:(e,t,n)=>{n.r(t),n.d(t,{PointsManager:()=>we,ProgressiveIterator:()=>Ce.A,RLEVoxelMap:()=>ze.A,VoxelManager:()=>Be.A,actorIsA:()=>oe.N,applyPreset:()=>ye.A,autoLoad:()=>pt.A,calculateViewportsSpatialRegistration:()=>me,calibratedPixelSpacingMetadataProvider:()=>b,clamp:()=>S.A,clip:()=>At,color:()=>o,colormap:()=>tt,convertStackToVolumeViewport:()=>Ue,convertToGrayscale:()=>qe,convertVolumeToStackViewport:()=>ke,createLinearRGBTransferFunction:()=>d.A,createSigmoidRGBTransferFunction:()=>l.A,decimate:()=>De.A,deepClone:()=>yt.G,deepEqual:()=>at,deepMerge:()=>Ae.A,eventListener:()=>r,generateVolumePropsFromImageIds:()=>Le.D,genericMetadataProvider:()=>xe.A,getBufferConfiguration:()=>Ne.h,getClosestImageId:()=>x.A,getClosestStackImageIndexForPoint:()=>ce,getCurrentVolumeViewportSlice:()=>ue,getDynamicVolumeInfo:()=>ht,getImageLegacy:()=>Se,getImageSliceDataForVolumeViewport:()=>ie.A,getMinMax:()=>h.A,getRandomSampleFromArray:()=>Je,getRuntimeId:()=>A,getScalingParameters:()=>Ie.A,getSliceRange:()=>ne.A,getSpacingInNormalDirection:()=>_.A,getTargetVolumeAndSpacingInNormalDir:()=>M.A,getViewportImageCornersInWorld:()=>he,getViewportImageIds:()=>$e,getViewportModality:()=>St,getViewportsWithImageURI:()=>ae,getViewportsWithVolumeId:()=>V.A,getVoiFromSigmoidRGBTransferFunction:()=>u.A,getVolumeActorCorners:()=>C.A,getVolumeId:()=>Ke.A,getVolumeSliceRangeInfo:()=>ee.A,getVolumeViewportScrollInfo:()=>te.A,getVolumeViewportsContainingSameVolumes:()=>O,hasFloatScalingParameters:()=>Ze.a,hasNaNValues:()=>ve.A,imageIdToURI:()=>I.A,imageRetrieveMetadataProvider:()=>Re.A,imageToWorldCoords:()=>Q,indexWithinDimensions:()=>D,invertRgbTransferFunction:()=>c.A,isEqual:()=>T.n4,isEqualAbs:()=>T.Ph,isEqualNegative:()=>T.WC,isImageActor:()=>oe.e,isOpposite:()=>E,isPTPrescaledWithSUV:()=>z,isValidVolume:()=>_e,isVideoTransferSyntax:()=>Ve,jumpToSlice:()=>bt,loadImageToCanvas:()=>X,makeVolumeMetadata:()=>Ee.A,planar:()=>se,pointInShapeCallback:()=>Qe.i,renderToCanvasCPU:()=>$,renderToCanvasGPU:()=>G,roundNumber:()=>Ye,roundToPrecision:()=>He,scaleArray:()=>vt,scaleRgbTransferFunction:()=>f,scroll:()=>Pt,snapFocalPointToSlice:()=>re.A,sortImageIdsAndGetSpacing:()=>Te.A,spatialRegistrationMetadataProvider:()=>ge,splitImageIdsBy4DTags:()=>mt,transferFunctionUtils:()=>nt,transformIndexToWorld:()=>L.A,transformWorldToIndex:()=>N.A,triggerEvent:()=>g.A,updateVTKImageDataWithCornerstoneImage:()=>Me.J,uuidv4:()=>m.A,windowLevel:()=>et,worldToImageCoords:()=>Z});var r={};n.r(r),n.d(r,{MultiTargetEventListenerManager:()=>s,TargetEventListeners:()=>a});var i,o={};n.r(o),n.d(o,{hexToRgb:()=>ot,rgbToHex:()=>it}),function(e){e[e.None=0]="None",e[e.Capture=1]="Capture",e[e.Bubble=2]="Bubble"}(i||(i={}));class a{constructor(e){this._eventListeners=new Map,this._children=new Map,this._target=e}get isEmpty(){return 0===this._eventListeners.size&&0===this._children.size}addEventListener(e,t,n){const r=e.indexOf(".");if(-1!==r){const i=e.substring(0,r);let o=this._children.get(i);o||(o=new a(this._target),this._children.set(i,o)),e=e.substring(r+1),o.addEventListener(e,t,n)}else this._addEventListener(e,t,n)}removeEventListener(e,t,n){const r=e.indexOf(".");if(-1!==r){const i=e.substring(0,r),o=this._children.get(i);if(!o)return;e=e.substring(r+1),o.removeEventListener(e,t,n),o.isEmpty&&this._children.delete(i)}else this._removeEventListener(e,t,n)}reset(){Array.from(this._children.entries()).forEach(([e,t])=>{if(t.reset(),!t.isEmpty)throw new Error("Child is not empty and cannot be removed");this._children.delete(e)}),this._unregisterAllEvents()}_addEventListener(e,t,n){let r=this._eventListeners.get(e);r||(r=new Map,this._eventListeners.set(e,r));const o=n?.capture??!1?i.Capture:i.Bubble,a=r.get(t)??i.None;a&o?console.warn("A listener is already registered for this phase"):(r.set(t,a|o),this._target.addEventListener(e,t,n))}_removeEventListener(e,t,n){const r=n?.capture??!1?i.Capture:i.Bubble,o=this._eventListeners.get(e);if(!o)return;(t?[t]:Array.from(o.keys())).forEach(t=>{const a=o.get(t)??i.None;if(!!!(a&r))return;this._target.removeEventListener(e,t,n);const s=a^r;s===i.None?o.delete(t):o.set(t,s)}),o.size||this._eventListeners.delete(e)}_unregisterAllListeners(e,t){Array.from(t.entries()).forEach(([t,n])=>{for(let r=i.Capture;n;r<<=1){if(!(n&r))continue;const o=r===i.Capture;this.removeEventListener(e,t,{capture:o}),n^=r}})}_unregisterAllEvents(){Array.from(this._eventListeners.entries()).forEach(([e,t])=>{this._unregisterAllListeners(e,t)})}}class s{constructor(){this._targetsEventListeners=new Map}addEventListener(e,t,n,r){let i=this._targetsEventListeners.get(e);i||(i=new a(e),this._targetsEventListeners.set(e,i)),i.addEventListener(t,n,r)}removeEventListener(e,t,n,r){const i=this._targetsEventListeners.get(e);i&&(i.removeEventListener(t,n,r),i.isEmpty&&this._targetsEventListeners.delete(e))}reset(){Array.from(this._targetsEventListeners.entries()).forEach(([e,t])=>{t.reset(),this._targetsEventListeners.delete(e)})}}var c=n(50134),l=n(40256),u=n(70210),d=n(74657);function f(e,t){const n=e.getSize();for(let r=0;r<n;r++){const n=[];e.getNodeValue(r,n),n[1]=n[1]*t,n[2]=n[2]*t,n[3]=n[3]*t,e.setNodeValue(r,n)}}var g=n(69372),m=n(80221),h=n(25308);const p=Symbol("LastRuntimeId"),v={},y=4294967295,w="-";function A(e,t,n){return function(e,t,n){let r=e[t];r instanceof Array||(r=[0],Object.defineProperty(e,t,{value:r}));for(let e=!0,t=0;e&&t<r.length;++t){let i=0|r[t];i<n?(e=!1,i+=1):(i=0,t+1===r.length&&r.push(0)),r[t]=i}return r}(null!==e&&"object"==typeof e?e:v,p,("number"==typeof n&&n>0?n:y)>>>0).join("string"==typeof t?t:w)}var I=n(39537);const P={},b={add:(e,t)=>{const n=(0,I.A)(e);P[n]=t},get:(e,t)=>{if("calibratedPixelSpacing"===e){const e=(0,I.A)(t);return P[e]}}};var S=n(84061),T=n(74638);function E(e,t,n=1e-5){return Math.abs(e[0]+t[0])<n&&Math.abs(e[1]+t[1])<n&&Math.abs(e[2]+t[2])<n}var x=n(88619),_=n(85008),M=n(65292),C=n(15105);function D(e,t){return!(e[0]<0||e[0]>=t[0]||e[1]<0||e[1]>=t[1]||e[2]<0||e[2]>=t[2])}var R=n(39536);const O=function(e,t){let n;n=t?[(0,R.lD)(t)]:(0,R.qO)();const r=[];return n.forEach(t=>{const n=e.getActors(),i=t.getVolumeViewports();for(const e of i){const t=e.getActors();if(t.length!==n.length)continue;n.every(({uid:e})=>t.find(t=>e===t.uid))&&r.push(e)}}),r};var V=n(24724),N=n(38669),L=n(94741),F=n(80068),W=n(74876),U=n(31749),j=n(51159),k=n(30135),B=n(56706);const z=e=>e.preScale.scaled&&e.preScale.scalingParameters.suvbw;function G(e,t,n=void 0,r="_thumbnails",i={displayArea:{imageArea:[1,1]}}){if(!(e&&e instanceof HTMLCanvasElement))throw new Error("canvas element is required");const o=!t.imageId,a=!o&&t,s=o&&t,c=`renderGPUViewport-${a.imageId||s.volumeId}`,l=document.createElement("div"),u=window.devicePixelRatio||1;i.displayArea||(i.displayArea={imageArea:[1,1]});const d=e.width,f=e.height;l.style.width=`${d/u+k.p8}px`,l.style.height=`${f/u+k.p8}px`,l.style.visibility="hidden",l.style.position="absolute",document.body.appendChild(l);const g=c.split(":").join("-");l.setAttribute("viewport-id-for-remove",g);const m=(0,k.Ay)(l),h=(0,R.lD)(r)||new B.Ay(r);let p=h.getViewport(c);if(!p){const e={viewportId:c,type:o?U.ViewportType.ORTHOGRAPHIC:U.ViewportType.STACK,element:l,defaultOptions:{...i,suppressEvents:!0}};h.enableElement(e),p=h.getViewport(c)}return new Promise(r=>{let d=!1,{viewReference:f}=i;const v=t=>{if(d)return;if(f){const e=f;return f=null,p.setViewReference(e),void p.render()}e.getContext("2d").drawImage(m,0,0,m.width,m.height,0,0,e.width,e.height);const n=p.canvasToWorld([0,0]),i=p.canvasToWorld([m.width/u,0]),o=p.canvasToWorld([0,m.height/u]);d=!0,l.removeEventListener(U.Events.IMAGE_RENDERED,v),setTimeout(()=>{h.disableElement(c);document.querySelectorAll(`[viewport-id-for-remove="${g}"]`).forEach(e=>{e.remove()})},0),r({origin:n,bottomLeft:o,topRight:i,thicknessMm:1})};l.addEventListener(U.Events.IMAGE_RENDERED,v),o?p.setVolumes([s],!1,!0):p.renderImageObject(t),p.resetCamera(),"PT"!==n||z(a)||p.setProperties({voiRange:{lower:a.minPixelValue,upper:a.maxPixelValue}}),p.render()})}var H=n(36931),Y=n(7808),q=n(5057);function $(e,t,n,r,i){if(t.volumeId)throw new Error("Unsupported volume rendering for CPU");const o=t,a={canvas:e,viewport:(0,H.A)(e,o,n),image:o,renderingTools:{}};a.transform=(0,Y.A)(a);return new Promise((e,t)=>{(0,q.A)(a,true),e(null)})}n(59693);var J=n(49038);function X(e){const{canvas:t,imageId:n,viewReference:r,requestType:i=U.RequestType.Thumbnail,priority:o=-5,renderingEngineId:a="_thumbnails",useCPURendering:s=!1,thumbnail:c=!1,imageAspect:l=!1,viewportOptions:u}=e,d=r?.volumeId,f=d&&!n,g=r&&u?{...u,viewReference:r}:u,m=s?$:G;return new Promise((e,r)=>{function u(n,i){const{modality:o}=W.get("generalSeriesModule",i)||{},u=!f&&n,d=f&&n;u&&(u.isPreScaled=u.isPreScaled||u.preScale?.scaled),c&&(t.height=256,t.width=256),l&&u&&(t.width=u&&t.height*u.width/u.height),t.style.width=t.width/devicePixelRatio+"px",t.style.height=t.height/devicePixelRatio+"px",d&&s&&r(new Error("CPU rendering of volume not supported")),m(t,n,o,a,g).then(e)}function h(e,t){console.error(e,t),r(e)}const p={useRGBA:!!s,requestType:i};if(d){const e=J.Ay.getVolume(d);e||r(new Error(`Volume id ${d} not found in cache`));u(e,e.imageIds[0])}else j.A.addRequest(function(e,t,n){return(0,F.loadAndCacheImage)(e,n).then(t=>{u.call(this,t,e)},t=>{h.call(this,t,e)})}.bind(null,n,null,p),i,{imageId:n},o)})}var K=n(3823);const Z=function(e,t){const n=(0,W.get)("imagePlaneModule",e);if(!n)throw new Error(`No imagePlaneModule found for imageId: ${e}`);const{columnCosines:r,rowCosines:i,imagePositionPatient:o}=n;let{columnPixelSpacing:a,rowPixelSpacing:s}=n;a||=1,s||=1;const c=K.eR.create();K.eR.scaleAndAdd(c,o,r,-a/2),K.eR.scaleAndAdd(c,c,i,-s/2);const l=K.eR.create();return K.eR.sub(l,t,c),[K.eR.dot(l,i)/s,K.eR.dot(l,r)/a]};function Q(e,t){const n=(0,W.get)("imagePlaneModule",e);if(!n)throw new Error(`No imagePlaneModule found for imageId: ${e}`);const{columnCosines:r,rowCosines:i,imagePositionPatient:o}=n;let{columnPixelSpacing:a,rowPixelSpacing:s}=n;a||=1,s||=1;const c=K.eR.create();return K.eR.scaleAndAdd(c,o,i,s*(t[0]-.5)),K.eR.scaleAndAdd(c,c,r,a*(t[1]-.5)),Array.from(c)}var ee=n(4031),te=n(61375),ne=n(20537),re=n(80500),ie=n(47476),oe=n(98039);function ae(e){const t=(0,R.qO)(),n=[];return t.forEach(t=>{t.getViewports().forEach(t=>{t.hasImageURI(e)&&n.push(t)})}),n}var se=n(52268);function ce(e,t){const n=function(e,t){const n=t.getImageIds(),r=t.getCurrentImageIdIndex();if(0===n.length)return null;const i=t=>{const n=function(e){const t=W.get("imagePlaneModule",e);if(!(t&&t.rowCosines instanceof Array&&3===t.rowCosines.length&&t.columnCosines instanceof Array&&3===t.columnCosines.length&&t.imagePositionPatient instanceof Array&&3===t.imagePositionPatient.length))return null;const{rowCosines:n,columnCosines:r,imagePositionPatient:i}=t,o=K.eR.set(K.eR.create(),...n),a=K.eR.set(K.eR.create(),...r),s=K.eR.cross(K.eR.create(),o,a);return{rowCosines:n,columnCosines:r,imagePositionPatient:i,planeNormal:s}}(t);if(!n)return null;const r=se.planeEquation(n.planeNormal,n.imagePositionPatient);return se.planeDistanceToPoint(r,e)},o={distance:i(n[r])??1/0,index:r},a=n.slice(r+1);for(let e=0;e<a.length;e++){const t=i(a[e]);if(null!==t){if(!(t<=o.distance))break;o.distance=t,o.index=e+r+1}}const s=n.slice(0,r);for(let e=s.length-1;e>=0;e--){const t=i(s[e]);if(null!==t&&t!==o.distance){if(!(t<o.distance))break;o.distance=t,o.index=e}}return o.distance===1/0?null:o}(e,t);return n?n.index:null}var le=n(51919);function ue(e){const{width:t,height:n}=e.getCanvas(),{sliceToIndexMatrix:r,indexToSliceMatrix:i}=e.getSliceViewInfo(),o=(0,le.e)(e,[0,0]),a=(0,le.e)(e,[t-1,0]),s=(0,le.e)(e,[0,n-1]),c=K.eR.sub(K.eR.create(),a,o),l=K.eR.sub(K.eR.create(),s,o),u=K.eR.cross(K.eR.create(),c,l);K.eR.normalize(c,c),K.eR.normalize(l,l),K.eR.normalize(u,u);const d=Math.max(Math.abs(c[0]),Math.abs(c[1]),Math.abs(c[2])),f=Math.max(Math.abs(l[0]),Math.abs(l[1]),Math.abs(l[2]));if(!K.Fd.equals(1,d)||!K.Fd.equals(1,f))throw new Error("Livewire is not available for rotate/oblique viewports");const{voxelManager:g}=e.getImageData(),m=e.getSliceViewInfo(),h=g.getSliceData(m);return{width:m.width,height:m.height,scalarData:h,sliceToIndexMatrix:r,indexToSliceMatrix:i}}const de={},fe={add:(e,t)=>{const[n,r]=e,i=`${n}_${r}`;de[i]||(de[i]={}),de[i]=t},get:(e,t,n)=>{if("spatialRegistrationModule"!==e)return;const r=`${t}_${n}`;if(de[r])return de[r];const i=`${n}_${t}`;return de[i]?K.pB.invert(K.pB.create(),de[i]):void 0}};(0,W.addProvider)(fe.get.bind(fe));const ge=fe;const me=function(e,t){const n=e.getSliceIndex(),r=t.getSliceIndex(),i=(0,W.get)("imagePlaneModule",n.toString()),o=(0,W.get)("imagePlaneModule",r.toString());if(!i||!o)return void console.log("Viewport spatial registration requires image plane module");const{imageOrientationPatient:a}=o;if(!i.imageOrientationPatient.every((e,t)=>Math.abs(e-a[t])<.05))return void console.log("Viewport spatial registration only supported for same orientation (hence translation only) for now",i?.imageOrientationPatient,o?.imageOrientationPatient);const s=i.imagePositionPatient,c=o.imagePositionPatient,l=K.eR.subtract(K.eR.create(),s,c),u=K.pB.fromTranslation(K.pB.create(),l);ge.add([e.id,t.id],u)};function he(e){const{imageData:t,dimensions:n}=e.getImageData()||{};if(!t||!n)return[];const{canvas:r}=e,i=window.devicePixelRatio,o=[r.width/i,0],a=[r.width/i,r.height/i],s=[0,r.height/i],c=e.canvasToWorld([0,0]),l=e.canvasToWorld(o),u=e.canvasToWorld(a),d=e.canvasToWorld(s),f=t.worldToIndex(c),g=t.worldToIndex(l),m=t.worldToIndex(u),h=t.worldToIndex(d);return function({dimensions:e,imageData:t,topLeftImage:n,topRightImage:r,bottomRightImage:i,bottomLeftImage:o,topLeftWorld:a,topRightWorld:s,bottomRightWorld:c,bottomLeftWorld:l}){const u=pe(n,e)?a:t.indexToWorld([0,0,0]),d=pe(r,e)?s:t.indexToWorld([e[0]-1,0,0]),f=pe(i,e)?c:t.indexToWorld([e[0]-1,e[1]-1,0]),g=pe(o,e)?l:t.indexToWorld([0,e[1]-1,0]);return[u,d,g,f]}({dimensions:n,imageData:t,topLeftImage:f,topRightImage:g,bottomRightImage:m,bottomLeftImage:h,topLeftWorld:c,topRightWorld:l,bottomRightWorld:u,bottomLeftWorld:d})}function pe(e,t){return e[0]>0||e[0]<t[0]-1||e[1]>0||e[1]<t[1]-1||e[2]>0||e[2]<t[2]-1}var ve=n(38883),ye=n(96833);class we{constructor(e={}){this._dimensions=3,this._length=0,this._byteSize=4,this.growSize=128;const{initialSize:t=1024,dimensions:n=3,growSize:r=128}=e,i=t*n;this.growSize=r,this.array=new ArrayBuffer(i*this._byteSize),this.data=new Float32Array(this.array),this._dimensions=n}forEach(e){for(let t=0;t<this._length;t++)e(this.getPoint(t),t)}get length(){return this._length}get dimensions(){return this._dimensions}get dimensionLength(){return this._length*this._dimensions}getPoint(e){if(e<0&&(e+=this._length),e<0||e>=this._length)return;const t=this._dimensions*e;return this.data.subarray(t,t+this._dimensions)}getPointArray(e){const t=[];if(e<0&&(e+=this._length),e<0||e>=this._length)return;const n=this._dimensions*e;for(let e=0;e<this._dimensions;e++)t.push(this.data[e+n]);return t}grow(e=1,t=this.growSize){if(this.dimensionLength+e*this._dimensions<=this.data.length)return;const n=this.data.length+t,r=new ArrayBuffer(n*this._dimensions*this._byteSize),i=new Float32Array(r);i.set(this.data),this.data=i,this.array=r}reverse(){const e=Math.floor(this._length/2);for(let t=0;t<e;t++){const e=t*this._dimensions,n=(this._length-1-t)*this._dimensions;for(let t=0;t<this._dimensions;t++){const r=this.data[e+t];this.data[e+t]=this.data[n+t],this.data[n+t]=r}}}push(e){this.grow(1);const t=this.length*this._dimensions;for(let n=0;n<this._dimensions;n++)this.data[n+t]=e[n];this._length++}map(e){const t=[];for(let n=0;n<this._length;n++)t.push(e(this.getPoint(n),n));return t}get points(){return this.map(e=>e)}toXYZ(){const e={x:[],y:[]};this._dimensions>=3&&(e.z=[]);const{x:t,y:n,z:r}=e;return this.forEach(e=>{t.push(e[0]),n.push(e[1]),r&&r.push(e[2])}),e}static fromXYZ({x:e,y:t,z:n}){const r=we.create3(e.length);let i=0;for(let o=0;o<e.length;o++)r.data[i++]=e[o],r.data[i++]=t[o],r.data[i++]=n?n[o]:0;return r._length=e.length,r}subselect(e=10,t=0){const n=new we({initialSize:e,dimensions:this._dimensions});for(let r=0;r<e;r++){const i=(t+Math.floor(this.length*r/e))%this.length;n.push(this.getPoint(i))}return n}static create3(e=128){return new we({initialSize:e,dimensions:3})}static create2(e=128){return new we({initialSize:e,dimensions:2})}}var Ae=n(74268),Ie=n(32173),Pe=n(58165),be=n(86846);const Se=function(e){const t=(0,be.Ay)(e);if(!t)return;const{viewport:n}=t;if(!(n instanceof Pe.A))throw new Error(`An image can only be fetched for a stack viewport and not for a viewport of type: ${n.type}`);return n.getCornerstoneImage()};var Te=n(90537),Ee=n(1865),xe=n(27119);function _e(e){const t=e[0],{modality:n,seriesInstanceUID:r}=W.get("generalSeriesModule",t),{imageOrientationPatient:i,pixelSpacing:o,frameOfReferenceUID:a,columns:s,rows:c}=W.get("imagePlaneModule",t),l={modality:n,imageOrientationPatient:i,pixelSpacing:o,frameOfReferenceUID:a,columns:s,rows:c,seriesInstanceUID:r},u=e.every(e=>{const{modality:t,seriesInstanceUID:n}=W.get("generalSeriesModule",e),{imageOrientationPatient:r,pixelSpacing:i,columns:o,rows:a}=W.get("imagePlaneModule",e);return n===l.seriesInstanceUID&&t===l.modality&&o===l.columns&&a===l.rows&&(0,T.Ay)(r,l.imageOrientationPatient)&&(0,T.Ay)(i,l.pixelSpacing)});return u}var Me=n(45278),Ce=n(22191),De=n(63470),Re=n(17791);const Oe=new Set(["1.2.840.10008.1.2.4.100","1.2.840.10008.1.2.4.100.1","1.2.840.10008.1.2.4.101","1.2.840.10008.1.2.4.101.1","1.2.840.10008.1.2.4.102","1.2.840.10008.1.2.4.102.1","1.2.840.10008.1.2.4.103","1.2.840.10008.1.2.4.103.1","1.2.840.10008.1.2.4.104","1.2.840.10008.1.2.4.104.1","1.2.840.10008.1.2.4.105","1.2.840.10008.1.2.4.105.1","1.2.840.10008.1.2.4.106","1.2.840.10008.1.2.4.106.1","1.2.840.10008.1.2.4.107","1.2.840.10008.1.2.4.108"]);function Ve(e){if(!e)return!1;return(Array.isArray(e)?e:[e]).find(e=>Oe.has(e))}var Ne=n(99576),Le=n(9734),Fe=n(98834),We=n(39561);async function Ue({viewport:e,options:t={}}){const n=e.getRenderingEngine();let r=t.volumeId||`${(0,m.A)()}`;if(0===r.split(":").length){r=`${(0,We.getUnknownVolumeLoaderSchema)()}:${r}`}const{id:i,element:o}=e,a=t.viewportId||i,s=e.getImageIds(),c=e.getViewPresentation(),l=e.getViewReference();n.enableElement({viewportId:a,type:U.ViewportType.ORTHOGRAPHIC,element:o,defaultOptions:{background:t.background,orientation:t.orientation}});(await(0,We.createAndCacheVolume)(r,{imageIds:s})).load();const u=n.getViewport(a);await(0,Fe.A7)(n,[{volumeId:r}],[a]);const d=()=>{u.render(),o.removeEventListener(U.Events.VOLUME_VIEWPORT_NEW_VOLUME,d)};return o.addEventListener(U.Events.VOLUME_VIEWPORT_NEW_VOLUME,d),u.setViewPresentation(c),u.setViewReference(l),u.render(),u}var je=n(86252);async function ke({viewport:e,options:t}){const n=e,{id:r,element:i}=n,o=e.getRenderingEngine(),{background:a}=t,s=t.viewportId||r,c=J.Ay.getVolume(n.getVolumeId());if(!(c instanceof je.Q))throw new Error("Currently, you cannot decache a volume that is not an ImageVolume. So, unfortunately, volumes such as nifti  (which are basic Volume, without imageIds) cannot be decached.");const l={viewportId:s,type:U.ViewportType.STACK,element:i,defaultOptions:{background:a}},u=n.getViewReference();o.enableElement(l);const d=o.getViewport(s);return await d.setStack(c.imageIds),d.setViewReference(u),d.render(),d}var Be=n(24623),ze=n(67645),Ge=n(19325);function He(e){return Math.round(e/Ge.EPSILON)*Ge.EPSILON}const Ye=function e(t,n=2){if(Array.isArray(t))return t.map(t=>e(t,n)).join(", ");if(null==t||""===t)return"NaN";t=Number(t);const r=Math.abs(t);if(r<1e-4)return`${t}`;const i=r>=100?n-2:r>=10?n-1:r>=1?n:r>=.1?n+1:r>=.01?n+2:r>=.001?n+3:n+4;return t.toFixed(i)};function qe(e,t,n){const r=e.length===t*n*4,i=e.length===t*n*3;if(r||i){const i=new Float32Array(t*n);let o=0,a=0;const s=r?4:3;for(let r=0;r<t;r++)for(let t=0;t<n;t++){const t=e[o],n=e[o+1],r=e[o+2];i[a]=(t+n+r)/3,o+=s,a++}return i}return e}const $e=function(e){if(e instanceof B.PX){return J.Ay.getVolume(e.getVolumeId()).imageIds}if(e.getImageIds)return e.getImageIds()};function Je(e,t){const n=[...e];return t>=n.length?(Xe(n),n):(Xe(n),n.slice(0,t))}function Xe(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}var Ke=n(12437),Ze=n(30169),Qe=n(56577),et=n(68136),tt=n(13859),nt=n(85745);function rt(e){const t=e.toString(16);return 1==t.length?"0"+t:t}function it(e,t,n){return"#"+rt(e)+rt(t)+rt(n)}function ot(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function at(e,t){if(e===t)return!0;if(null==e||null==t)return!1;try{return JSON.stringify(e)===JSON.stringify(t)}catch(n){return console.debug("Error in JSON.stringify during deep comparison:",n),e===t}}function st(e,t){const n={};let r=[];const i=Object.keys(e);for(let o=0;o<i.length;o++){const a=new Set,s=e[i[o]];for(let e=0;e<s.length;e++){const r=t(s[e].imageId)||0;if(n[r]=n[r]||[],n[r].push({imageId:s[e].imageId}),a.add(r),a.size-1<e)return}if(0==o)r=Array.from(a);else if(!ft(r,a))return}return n}function ct(e,t){const n=W.get(t,e);try{return parseFloat(n)}catch{return}}function lt(e){const t=W.get("20011003",e);try{const{InlineBinary:e}=t;if(e){const t=atob(e),n=new ArrayBuffer(t.length),r=new DataView(n);for(let e=0;e<t.length;e++)r.setUint8(e,t.charCodeAt(e));return new Float32Array(n)[0]}return parseFloat(t)}catch{return}}function ut(e){let t=W.get("0019100c",e)||W.get("0019100C",e);try{const{InlineBinary:e}=t;return e&&(t=atob(e)),parseFloat(t)}catch{return}}function dt(e){let t=W.get("00431039",e);try{const{InlineBinary:e}=t;return e&&(t=atob(e).split("//")),parseFloat(t[0])%1e5}catch{return}}function ft(e,t){if(e.length!=t.size)return!1;for(let n=0;n<e.length;n++)if(!t.has(e[n]))return!1;return!0}function gt(e){const t=W.get("petImageModule",e);return t?t.frameReferenceTime:0}const mt=function(e){const t=function(e){const t=e.map(e=>{const{imagePositionPatient:t}=W.get("imagePlaneModule",e)||{};return{imageId:e,imagePositionPatient:t}});if(!t.every(e=>e.imagePositionPatient))return null;const n=(r="imagePositionPatient",t.reduce((e,t)=>((e[t[r]]=e[t[r]]||[]).push(t),e),{}));var r;const i=Object.keys(n),o=n[i[0]].length;return 1===o?null:i.every(e=>n[e].length===o)?n:null}(e);if(!t)return{imageIdGroups:[e],splittingTag:null};const n=["TemporalPositionIdentifier","DiffusionBValue","TriggerTime","EchoTime","EchoNumber","PhilipsPrivateBValue","SiemensPrivateBValue","GEPrivateBValue","PetFrameReferenceTime"],r=[e=>ct(e,n[0]),e=>ct(e,n[1]),e=>ct(e,n[2]),e=>ct(e,n[3]),e=>ct(e,n[4]),lt,ut,dt,gt];for(let e=0;e<r.length;e++){const i=st(t,r[e]);if(i){return{imageIdGroups:Object.keys(i).map(Number.parseFloat).sort((e,t)=>e-t).map(e=>i[e].map(e=>e.imageId)),splittingTag:n[e]}}}return{imageIdGroups:[e],splittingTag:null}};const ht=function(e){const{imageIdGroups:t,splittingTag:n}=mt(e);return{isDynamicVolume:t.length>1,timePoints:t,splittingTag:n}};var pt=n(91979);function vt(e,t){const n=e.length,{rescaleSlope:r,rescaleIntercept:i,suvbw:o}=t;if("PT"===t.modality&&"number"==typeof o)for(let t=0;t<n;t++)e[t]=o*(e[t]*r+i);else for(let t=0;t<n;t++)e[t]=e[t]*r+i;return e}var yt=n(99949);function wt(e,t,n){return Math.min(Math.max(t,e),n)}const At=wt;var It=n(10364);function Pt(e,t){if(!(0,be.Ay)(e.element))throw new Error("Scroll::Viewport is not enabled (it might be disabled)");if(e instanceof B.hS&&0===e.getImageIds().length)throw new Error("Scroll::Stack Viewport has no images");const{volumeId:n,delta:r,scrollSlabs:i}=t;if(e instanceof B.PX)!function(e,t,n,r=!1){const i=r,{numScrollSteps:o,currentStepIndex:a,sliceRangeInfo:s}=(0,te.A)(e,t,i);if(!s)return;const{sliceRange:c,spacingInNormalDirection:l,camera:u}=s,{focalPoint:d,viewPlaneNormal:f,position:m}=u,{newFocalPoint:h,newPosition:p}=(0,re.A)(d,m,c,f,l,n);e.setCamera({focalPoint:h,position:p}),e.render();const v=a+n,y={volumeId:t,viewport:e,delta:n,desiredStepIndex:v,currentStepIndex:a,numScrollSteps:o,currentImageId:e.getCurrentImageId()};(v>o||v<0)&&e.getCurrentImageId()?(0,g.A)(It.A,U.Events.VOLUME_VIEWPORT_SCROLL_OUT_OF_BOUNDS,y):(0,g.A)(It.A,U.Events.VOLUME_VIEWPORT_SCROLL,y)}(e,n,r,i);else{const n=e.getCurrentImageIdIndex();if(n+r>e.getImageIds().length-1||n+r<0){const e={imageIdIndex:n,direction:r};(0,g.A)(It.A,U.Events.STACK_SCROLL_OUT_OF_BOUNDS,e)}e.scroll(r,t.debounceLoading,t.loop)}}async function bt(e,t={}){const{imageIndex:n,debounceLoading:r,volumeId:i}=t,o=(0,be.Ay)(e);if(!o)throw new Error("Element has been disabled");const{viewport:a}=o,{imageIndex:s,numberOfSlices:c}=function(e,t){if(e instanceof Pe.A)return{numberOfSlices:e.getImageIds().length,imageIndex:t?e.getTargetImageIdIndex():e.getCurrentImageIdIndex()};return{numberOfSlices:e.getNumberOfSlices(),imageIndex:e.getSliceIndex()}}(a,r),l=function(e,t){const n=e-1;return At(t,0,n)}(c,n);Pt(a,{delta:l-s,debounceLoading:r,volumeId:i})}const St=(e,t)=>function(e,t,n){if(!n)throw new Error("getVolume is required, use the utilities export instead ");if(e.modality)return e.modality;if(e.setVolumes){if(!(t=t??e.getVolumeId())||!n)return;return n(t).metadata.Modality}throw new Error("Invalid viewport type")}(e,t,J.Ay.getVolume)},50134:(e,t,n)=>{function r(e){if(!e)return;const t=e.getSize();for(let n=0;n<t;n++){const t=[];e.getNodeValue(n,t),t[1]=1-t[1],t[2]=1-t[2],t[3]=1-t[3],e.setNodeValue(n,t)}}n.d(t,{A:()=>r})},74638:(e,t,n)=>{function r(e,t,n){return Math.abs(e-t)<=n}function i(e){return"number"==typeof e}function o(e){return e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>0&&"number"==typeof e[0]}function a(e,t,n=1e-5){return typeof e==typeof t&&null!==e&&null!==t&&(i(e)&&i(t)?r(e,t,n):!(!o(e)||!o(t))&&function(e,t,n=1e-5){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!r(e[i],t[i],n))return!1;return!0}(e,t,n))}n.d(t,{Ay:()=>a,Ph:()=>u,WC:()=>l,n4:()=>a});const s=e=>"number"==typeof e?-e:e?.map?e.map(s):!e,c=e=>"number"==typeof e?Math.abs(e):e?.map?e.map(c):e,l=(e,t,n=void 0)=>a(e,s(t),n),u=(e,t,n=void 0)=>a(c(e),c(t),n)},1865:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(74876);function i(e){const t=e[0],{pixelRepresentation:n,bitsAllocated:i,bitsStored:o,highBit:a,photometricInterpretation:s,samplesPerPixel:c}=(0,r.get)("imagePixelModule",t),l=[],u=(0,r.get)("voiLutModule",t);let d;if(u){const{windowWidth:e,windowCenter:t}=u;if(d=u?.voiLUTFunction,Array.isArray(e))for(let n=0;n<e.length;n++)l.push({windowWidth:e[n],windowCenter:t[n]});else l.push({windowWidth:e,windowCenter:t})}else l.push({windowWidth:void 0,windowCenter:void 0});const{modality:f,seriesInstanceUID:g}=(0,r.get)("generalSeriesModule",t),{imageOrientationPatient:m,pixelSpacing:h,frameOfReferenceUID:p,columns:v,rows:y}=(0,r.get)("imagePlaneModule",t);return{BitsAllocated:i,BitsStored:o,SamplesPerPixel:c,HighBit:a,PhotometricInterpretation:s,PixelRepresentation:n,Modality:f,ImageOrientationPatient:m,PixelSpacing:h,FrameOfReferenceUID:p,Columns:v,Rows:y,voiLut:l,VOILUTFunction:d,SeriesInstanceUID:g}}},52268:(e,t,n)=>{n.r(t),n.d(t,{linePlaneIntersection:()=>i,planeDistanceToPoint:()=>s,planeEquation:()=>o,threePlaneIntersection:()=>a});var r=n(3823);function i(e,t,n){const[r,i,o]=e,[a,s,c]=t,[l,u,d,f]=n,g=a-r,m=s-i,h=c-o,p=-1*(l*r+u*i+d*o-f)/(l*g+u*m+d*h);return[g*p+r,m*p+i,h*p+o]}function o(e,t,n=!1){const[r,i,o]=e,a=r*t[0]+i*t[1]+o*t[2];if(n){const e=Math.sqrt(r*r+i*i+o*o);return[r/e,i/e,o/e,a/e]}return[r,i,o,a]}function a(e,t,n){const[i,o,a,s]=e,[c,l,u,d]=t,[f,g,m,h]=n,p=r.w0.fromValues(i,c,f,o,l,g,a,u,m),v=r.w0.fromValues(s,d,h,o,l,g,a,u,m),y=r.w0.fromValues(i,c,f,s,d,h,a,u,m),w=r.w0.fromValues(i,c,f,o,l,g,s,d,h);return[r.w0.determinant(v)/r.w0.determinant(p),r.w0.determinant(y)/r.w0.determinant(p),r.w0.determinant(w)/r.w0.determinant(p)]}function s(e,t,n=!1){const[r,i,o,a]=e,[s,c,l]=t,u=r*s+i*c+o*l-a,d=Math.abs(u)/Math.sqrt(r*r+i*i+o*o);return(n?Math.sign(u):1)*d}},56577:(e,t,n)=>{n.d(t,{i:()=>i});var r=n(3823);function i(e,t){const{pointInShapeFn:n,callback:i,boundsIJK:o,returnPoints:a=!1}=t;let s,c,l,u,d,f,g;const{numComps:m}=e;if(g=e.getScalarData?e.getScalarData():e.getPointData().getScalars().getData(),!g)return void console.warn("No scalar data found for imageData",e);const h=e.getDimensions();o?[[s,c],[l,u],[d,f]]=o:(s=0,c=h[0],l=0,u=h[1],d=0,f=h[2]);const p=r.eR.fromValues(s,l,d),v=e.getDirection(),y=v.slice(0,3),w=v.slice(3,6),A=v.slice(6,9),I=e.getSpacing(),[P,b,S]=I,T=e.indexToWorld(p),E=r.eR.fromValues(y[0]*P,y[1]*P,y[2]*P),x=r.eR.fromValues(w[0]*b,w[1]*b,w[2]*b),_=r.eR.fromValues(A[0]*S,A[1]*S,A[2]*S),M=m||g.length/h[2]/h[1]/h[0],C=h[0]*M,D=h[1]*C,R=[],O=r.eR.clone(T);for(let e=d;e<=f;e++){const t=r.eR.clone(O);for(let t=l;t<=u;t++){const o=r.eR.clone(O);for(let o=s;o<=c;o++){const a=[o,t,e];if(n(O,a)){const n=e*D+t*C+o*M;let r;r=M>2?[g[n],g[n+1],g[n+2]]:g[n],R.push({value:r,index:n,pointIJK:a,pointLPS:O.slice()}),i&&i({value:r,index:n,pointIJK:a,pointLPS:O})}r.eR.add(O,O,E)}r.eR.copy(O,o),r.eR.add(O,O,x)}r.eR.copy(O,t),r.eR.add(O,O,_)}return a?R:void 0}},80500:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(3823);function i(e,t,n,i,o,a){const{min:s,max:c,current:l}=n,u=r.eR.create();r.eR.sub(u,t,e);const d=Math.round((c-s)/o),f=(l-s)/(c-s)*d;let g=Math.round(f),m=[e[0]-i[0]*f*o,e[1]-i[1]*f*o,e[2]-i[2]*f*o];g+=a,g>d?g=d:g<0&&(g=0);const h=g*o;m=[m[0]+i[0]*h,m[1]+i[1]*h,m[2]+i[2]*h];return{newFocalPoint:m,newPosition:[m[0]+u[0],m[1]+u[1],m[2]+u[2]]}}},90537:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(3823),i=n(74876),o=n(59693);function a(e,t){const{imagePositionPatient:n,imageOrientationPatient:a}=i.get("imagePlaneModule",e[0]);if(!t){const e=r.eR.fromValues(a[0],a[1],a[2]),n=r.eR.fromValues(a[3],a[4],a[5]);t=r.eR.create(),r.eR.cross(t,e,n)}const s=r.eR.create(),c="wadouri"===e[0].split(":")[0];let l,u;function d(e){const{imagePositionPatient:o}=i.get("imagePlaneModule",e),a=r.eR.create();return r.eR.sub(a,n,o),r.eR.dot(a,t)}if(r.eR.set(s,n[0],n[1],n[2]),c){const o=[e[0],e[Math.floor(e.length/2)]];l=e;d(o[0])-d(o[1])<0&&l.reverse();const a=i.get("imagePlaneModule",o[1]);if(!a)throw new Error("Incomplete metadata required for volume construction.");const s=r.eR.create();r.eR.sub(s,n,a.imagePositionPatient);const c=r.eR.dot(s,t);u=Math.abs(c)/Math.floor(e.length/2)}else{const t=e.map(e=>({distance:d(e),imageId:e}));t.sort((e,t)=>t.distance-e.distance),l=t.map(e=>e.imageId);const n=t.length;u=Math.abs(t[n-1].distance-t[0].distance)/(n-1)}const{imagePositionPatient:f,sliceThickness:g,spacingBetweenSlices:m}=i.get("imagePlaneModule",l[0]),{strictZSpacingForVolumeViewport:h}=(0,o.D0)().rendering;0!==u||h||(g&&m?(console.log("Could not calculate zSpacing. Using spacingBetweenSlices"),u=m):g?(console.log("Could not calculate zSpacing and no spacingBetweenSlices. Using sliceThickness"),u=g):(console.log("Could not calculate zSpacing. The VolumeViewport visualization is compromised. Setting zSpacing to 1 to render"),u=1));return{zSpacing:u,origin:f,sortedImageIds:l}}},85745:(e,t,n)=>{function r(e){const t=e.getSize(),n=[];for(let r=0;r<t;r++){const t=[];e.getNodeValue(r,t),n.push(t)}return n}function i(e,t){t?.length&&(e.removeAllPoints(),t.forEach(t=>{e.addRGBPoint(...t)}))}n.r(t),n.d(t,{getTransferFunctionNodes:()=>r,setTransferFunctionNodes:()=>i})},51919:(e,t,n)=>{n.d(t,{e:()=>i});var r=n(38669);function i(e,t){const{imageData:n}=e.getImageData(),i=e.canvasToWorld(t);return(0,r.A)(n,i)}},94741:(e,t,n)=>{function r(e,t){return e.indexToWorld(t)}n.d(t,{A:()=>r})},38669:(e,t,n)=>{function r(e,t){return e.worldToIndex(t).map(Math.round)}n.d(t,{A:()=>r})},45278:(e,t,n)=>{function r(e,t){const n=t.voxelManager.getScalarData();if(!e.getPointData)return;const r=e.getPointData().getScalars().getData();if(t.color&&t.rgba){const e=new Uint8Array(t.columns*t.rows*3);for(let r=0;r<t.columns*t.rows;r++)e[3*r]=n[4*r],e[3*r+1]=n[4*r+1],e[3*r+2]=n[4*r+2];t.rgba=!1,t.getPixelData=()=>e,r.set(e)}else r.set(n);e.modified()}n.d(t,{J:()=>r})},68136:(e,t,n)=>{function r(e,t){return{windowWidth:Math.abs(t-e)+1,windowCenter:(e+t+1)/2}}function i(e,t){return{lower:t-.5-(e-1)/2,upper:t-.5+(e-1)/2}}n.r(t),n.d(t,{toLowHighRange:()=>i,toWindowLevel:()=>r})},12274:(e,t,n)=>{var r,i=n(99178),o=n(15327),a=n(58498),s=n(42008);const c=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var t,n,i=void 0!==(e=e||{})?e:{};i.ready=new Promise(function(e,r){t=e,n=r});var o,a=Object.assign({},i),s=[],c="./this.program",l=(e,t)=>{throw t},u="";"undefined"!=typeof document&&document.currentScript&&(u=document.currentScript.src),r&&(u=r),u=0!==u.indexOf("blob:")?u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1):"";var d,f=i.print||console.log.bind(console),g=i.printErr||console.warn.bind(console);Object.assign(i,a),a=null,i.arguments&&(s=i.arguments),i.thisProgram&&(c=i.thisProgram),i.quit&&(l=i.quit),i.wasmBinary&&(d=i.wasmBinary);var m,h=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&H("no native wasm support detected");var p,v,y,w,A,I,P,b,S,T,E=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function _(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&x)return x.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var l=a-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function M(e,t){return e?_(w,e,t):""}function C(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i}function D(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t}function R(e){v=e,i.HEAP8=y=new Int8Array(e),i.HEAP16=A=new Int16Array(e),i.HEAP32=P=new Int32Array(e),i.HEAPU8=w=new Uint8Array(e),i.HEAPU16=I=new Uint16Array(e),i.HEAPU32=b=new Uint32Array(e),i.HEAPF32=S=new Float32Array(e),i.HEAPF64=T=new Float64Array(e)}i.INITIAL_MEMORY;var O,V=[],N=[],L=[],F=[];function W(e){V.unshift(e)}function U(e){F.unshift(e)}var j,k,B=0,z=null,G=null;function H(e){i.onAbort&&i.onAbort(e),g(e="Aborted("+e+")"),E=!0,p=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function Y(e){return e.startsWith("data:application/octet-stream;base64,")}function q(e){try{if(e==j&&d)return new Uint8Array(d);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){H(e)}}Y(j="ICRPolySeg.wasm")||(k=j,j=i.locateFile?i.locateFile(k,u):u+k);var $={638383:e=>{i.updateProgress&&i.updateProgress(e)}};function J(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function X(e){for(;e.length>0;)e.shift()(i)}function K(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){b[this.ptr+4>>2]=e},this.get_type=function(){return b[this.ptr+4>>2]},this.set_destructor=function(e){b[this.ptr+8>>2]=e},this.get_destructor=function(){return b[this.ptr+8>>2]},this.set_refcount=function(e){P[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,y[this.ptr+12|0]=e},this.get_caught=function(){return 0!=y[this.ptr+12|0]},this.set_rethrown=function(e){e=e?1:0,y[this.ptr+13|0]=e},this.get_rethrown=function(){return 0!=y[this.ptr+13|0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=P[this.ptr>>2];P[this.ptr>>2]=e+1},this.release_ref=function(){var e=P[this.ptr>>2];return P[this.ptr>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){b[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return b[this.ptr+16>>2]},this.get_exception_ptr=function(){if(dt(this.get_type()))return b[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}var Z={varargs:void 0,get:function(){return Z.varargs+=4,P[Z.varargs-4>>2]},getStr:function(e){return M(e)}},Q={};function ee(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function te(e){return this.fromWireType(P[e>>2])}var ne={},re={},ie={};function oe(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function ae(e,t){return e=oe(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function se(e,t){var n=ae(t,function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var ce=void 0;function le(e){throw new ce(e)}function ue(e,t,n){function r(t){var r=n(t);r.length!==e.length&&le("Mismatched type converter count");for(var i=0;i<e.length;++i)pe(e[i],r[i])}e.forEach(function(e){ie[e]=t});var i=new Array(t.length),o=[],a=0;t.forEach((e,t)=>{re.hasOwnProperty(e)?i[t]=re[e]:(o.push(e),ne.hasOwnProperty(e)||(ne[e]=[]),ne[e].push(()=>{i[t]=re[e],++a===o.length&&r(i)}))}),0===o.length&&r(i)}function de(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var fe=void 0;function ge(e){for(var t="",n=e;w[n];)t+=fe[w[n++]];return t}var me=void 0;function he(e){throw new me(e)}function pe(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||he('type "'+r+'" must have a positive integer typeid pointer'),re.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;he("Cannot register type '"+r+"' twice")}if(re[e]=t,delete ie[e],ne.hasOwnProperty(e)){var i=ne[e];delete ne[e],i.forEach(e=>e())}}var ve=[],ye=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function we(e){e>4&&0===--ye[e].refcount&&(ye[e]=void 0,ve.push(e))}function Ae(){for(var e=0,t=5;t<ye.length;++t)void 0!==ye[t]&&++e;return e}function Ie(){for(var e=5;e<ye.length;++e)if(void 0!==ye[e])return ye[e];return null}var Pe=e=>(e||he("Cannot use deleted val. handle = "+e),ye[e].value),be=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=ve.length?ve.pop():ye.length;return ye[t]={refcount:1,value:e},t}};function Se(e,t){switch(t){case 2:return function(e){return this.fromWireType(S[e>>2])};case 3:return function(e){return this.fromWireType(T[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Te(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=ae(e.name||"unknownFunctionName",function(){});n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return i instanceof Object?i:r}function Ee(e,t,n){i.hasOwnProperty(e)?((void 0===n||void 0!==i[e].overloadTable&&void 0!==i[e].overloadTable[n])&&he("Cannot register public name '"+e+"' twice"),function(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||he("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}(i,e,e),i.hasOwnProperty(n)&&he("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),i[e].overloadTable[n]=t):(i[e]=t,void 0!==n&&(i[e].numArguments=n))}var xe=[];function _e(e){var t=xe[e];return t||(e>=xe.length&&(xe.length=e+1),xe[e]=t=O.get(e)),t}function Me(e,t,n){return e.includes("j")?function(e,t,n){var r=i["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}(e,t,n):_e(t).apply(null,n)}function Ce(e,t){var n,r,i,o=(e=ge(e)).includes("j")?(n=e,r=t,i=[],function(){return i.length=0,Object.assign(i,arguments),Me(n,r,i)}):_e(t);return"function"!=typeof o&&he("unknown function pointer with signature "+e+": "+t),o}var De=void 0;function Re(e){var t=ut(e),n=ge(t);return lt(t),n}function Oe(e,t,n){switch(t){case 0:return n?function(e){return y[e]}:function(e){return w[e]};case 1:return n?function(e){return A[e>>1]}:function(e){return I[e>>1]};case 2:return n?function(e){return P[e>>2]}:function(e){return b[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Ve="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function Ne(e,t){for(var n=e,r=n>>1,i=r+t/2;!(r>=i)&&I[r];)++r;if((n=r<<1)-e>32&&Ve)return Ve.decode(w.subarray(e,n));for(var o="",a=0;!(a>=t/2);++a){var s=A[e+2*a>>1];if(0==s)break;o+=String.fromCharCode(s)}return o}function Le(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,o=0;o<i;++o){var a=e.charCodeAt(o);A[t>>1]=a,t+=2}return A[t>>1]=0,t-r}function Fe(e){return 2*e.length}function We(e,t){for(var n=0,r="";!(n>=t/4);){var i=P[e+4*n>>2];if(0==i)break;if(++n,i>=65536){var o=i-65536;r+=String.fromCharCode(55296|o>>10,56320|1023&o)}else r+=String.fromCharCode(i)}return r}function Ue(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,i=r+n-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),P[t>>2]=a,(t+=4)+4>i)break}return P[t>>2]=0,t-r}function je(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function ke(e,t){var n=re[e];return void 0===n&&he(t+" has unknown type "+Re(e)),n}var Be={};function ze(e){var t=Be[e];return void 0===t?ge(e):t}var Ge=[];function He(){return"object"==typeof globalThis?globalThis:Function("return this")()}var Ye=[],qe={},$e=[];function Je(e,t,n){var r=function(e,t){var n;for($e.length=0,t>>=2;n=w[e++];)t+=105!=n&t,$e.push(105==n?P[t]:T[t++>>1]),++t;return $e}(t,n);return $[e].apply(null,r)}function Xe(e){try{return m.grow(e-v.byteLength+65535>>>16),R(m.buffer),1}catch(e){}}var Ke={};function Ze(){if(!Ze.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(var t in Ke)void 0===Ke[t]?delete e[t]:e[t]=Ke[t];var n=[];for(var t in e)n.push(t+"="+e[t]);Ze.strings=n}return Ze.strings}var Qe=[null,[],[]];function et(e,t){var n=Qe[e];0===t||10===t?((1===e?f:g)(_(n,0)),n.length=0):n.push(t)}function tt(e){return e%4==0&&(e%100!=0||e%400==0)}var nt=[31,29,31,30,31,30,31,31,30,31,30,31],rt=[31,28,31,30,31,30,31,31,30,31,30,31];function it(e,t,n,r){var i=P[r+40>>2],o={tm_sec:P[r>>2],tm_min:P[r+4>>2],tm_hour:P[r+8>>2],tm_mday:P[r+12>>2],tm_mon:P[r+16>>2],tm_year:P[r+20>>2],tm_wday:P[r+24>>2],tm_yday:P[r+28>>2],tm_isdst:P[r+32>>2],tm_gmtoff:P[r+36>>2],tm_zone:i?M(i):""},a=M(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in s)a=a.replace(new RegExp(c,"g"),s[c]);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function f(e,t){return d(e,t,"0")}function g(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function m(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function h(e){var t=function(e,t){for(var n=new Date(e.getTime());t>0;){var r=tt(n.getFullYear()),i=n.getMonth(),o=(r?nt:rt)[i];if(!(t>o-n.getDate()))return n.setDate(n.getDate()+t),n;t-=o-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=m(n),o=m(r);return g(i,t)<=0?g(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var p={"%a":function(e){return l[e.tm_wday].substring(0,3)},"%A":function(e){return l[e.tm_wday]},"%b":function(e){return u[e.tm_mon].substring(0,3)},"%B":function(e){return u[e.tm_mon]},"%C":function(e){return f((e.tm_year+1900)/100|0,2)},"%d":function(e){return f(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return h(e).toString().substring(2)},"%G":function(e){return h(e)},"%H":function(e){return f(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":function(e){return f(e.tm_mday+function(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}(tt(e.tm_year+1900)?nt:rt,e.tm_mon-1),3)},"%m":function(e){return f(e.tm_mon+1,2)},"%M":function(e){return f(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return f(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return f(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var n=(e.tm_wday+371-e.tm_yday)%7;4==n||3==n&&tt(e.tm_year)||(t=1)}}else{t=52;var r=(e.tm_wday+7-e.tm_yday-1)%7;(4==r||5==r&&tt(e.tm_year%400-1))&&t++}return f(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return f(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in a=a.replace(/%%/g,"\0\0"),p)a.includes(c)&&(a=a.replace(new RegExp(c,"g"),p[c](o)));a=a.replace(/\0\0/g,"%");var v,w,A,I,b,S,T=(v=a,w=!1,I=A>0?A:D(v)+1,b=new Array(I),S=C(v,b,0,b.length),w&&(b.length=S),b);return T.length>t?0:(function(e,t){y.set(e,t)}(T,e),T.length-1)}function ot(e){p=e,h||(i.onExit&&i.onExit(e),E=!0),l(e,new J(e))}ce=i.InternalError=se(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);fe=e}(),me=i.BindingError=se(Error,"BindingError"),i.count_emval_handles=Ae,i.get_first_emval=Ie,De=i.UnboundTypeError=se(Error,"UnboundTypeError");var at,st={b:function(e,t,n){throw new K(e).init(t,n),e},J:function(e,t){},F:function(e,t,n){},L:function(e,t,n,r){Z.varargs=r},E:function(e,t,n,r){},G:function(e,t){},x:function(e){var t=Q[e];delete Q[e];var n=t.rawConstructor,r=t.rawDestructor,i=t.fields;ue([e],i.map(e=>e.getterReturnType).concat(i.map(e=>e.setterArgumentType)),e=>{var o={};return i.forEach((t,n)=>{var r=t.fieldName,a=e[n],s=t.getter,c=t.getterContext,l=e[n+i.length],u=t.setter,d=t.setterContext;o[r]={read:e=>a.fromWireType(s(c,e)),write:(e,t)=>{var n=[];u(d,e,l.toWireType(n,t)),ee(n)}}}),[{name:t.name,fromWireType:function(e){var t={};for(var n in o)t[n]=o[n].read(e);return r(e),t},toWireType:function(e,t){for(var i in o)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var a=n();for(i in o)o[i].write(a,t[i]);return null!==e&&e.push(r,a),a},argPackAdvance:8,readValueFromPointer:te,destructorFunction:r}]})},A:function(e,t,n,r,i){},O:function(e,t,n,r,i){var o=de(n);pe(e,{name:t=ge(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=y;else if(2===n)r=A;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=P}return this.fromWireType(r[e>>o])},destructorFunction:null})},N:function(e,t){pe(e,{name:t=ge(t),fromWireType:function(e){var t=Pe(e);return we(e),t},toWireType:function(e,t){return be(t)},argPackAdvance:8,readValueFromPointer:te,destructorFunction:null})},v:function(e,t,n){var r=de(n);pe(e,{name:t=ge(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:Se(t,r),destructorFunction:null})},g:function(e,t,n,r,o,a){var s=function(e,t){for(var n=[],r=0;r<e;r++)n.push(b[t+4*r>>2]);return n}(t,n);e=ge(e),o=Ce(r,o),Ee(e,function(){!function(e,t){var n=[],r={};throw t.forEach(function e(t){r[t]||re[t]||(ie[t]?ie[t].forEach(e):(n.push(t),r[t]=!0))}),new De(e+": "+n.map(Re).join([", "]))}("Cannot call "+e+" due to unbound types",s)},t-1),ue([],s,function(n){var r=[n[0],null].concat(n.slice(1));return function(e,t,n){i.hasOwnProperty(e)||le("Replacing nonexistant public symbol"),void 0!==i[e].overloadTable&&void 0!==n?i[e].overloadTable[n]=t:(i[e]=t,i[e].argCount=n)}(e,function(e,t,n,r,i){var o=t.length;o<2&&he("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==n,s=!1,c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){s=!0;break}var l="void"!==t[0].name,u="",d="";for(c=0;c<o-2;++c)u+=(0!==c?", ":"")+"arg"+c,d+=(0!==c?", ":"")+"arg"+c+"Wired";var f="return function "+oe(e)+"("+u+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(f+="var destructors = [];\n");var g=s?"destructors":"null",m=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],h=[he,r,i,ee,t[0],t[1]];for(a&&(f+="var thisWired = classParam.toWireType("+g+", this);\n"),c=0;c<o-2;++c)f+="var arg"+c+"Wired = argType"+c+".toWireType("+g+", arg"+c+"); // "+t[c+2].name+"\n",m.push("argType"+c),h.push(t[c+2]);if(a&&(d="thisWired"+(d.length>0?", ":"")+d),f+=(l?"var rv = ":"")+"invoker(fn"+(d.length>0?", ":"")+d+");\n",s)f+="runDestructors(destructors);\n";else for(c=a?1:2;c<t.length;++c){var p=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(f+=p+"_dtor("+p+"); // "+t[c].name+"\n",m.push(p+"_dtor"),h.push(t[c].destructorFunction))}return l&&(f+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),f+="}\n",m.push(f),Te(Function,m).apply(null,h)}(e,r,null,o,a),t-1),[]})},d:function(e,t,n,r,i){t=ge(t),-1===i&&(i=4294967295);var o=de(n),a=e=>e;if(0===r){var s=32-8*n;a=e=>e<<s>>>s}var c=t.includes("unsigned");pe(e,{name:t,fromWireType:a,toWireType:c?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:Oe(t,o,0!==r),destructorFunction:null})},c:function(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=b,n=t[e>>=2],i=t[e+1];return new r(v,i,n)}pe(e,{name:n=ge(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},u:function(e,t){var n="std::string"===(t=ge(t));pe(e,{name:t,fromWireType:function(e){var t,r=b[e>>2],i=e+4;if(n)for(var o=i,a=0;a<=r;++a){var s=i+a;if(a==r||0==w[s]){var c=M(o,s-o);void 0===t?t=c:(t+=String.fromCharCode(0),t+=c),o=s+1}}else{var l=new Array(r);for(a=0;a<r;++a)l[a]=String.fromCharCode(w[i+a]);t=l.join("")}return lt(e),t},toWireType:function(e,t){var r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"==typeof t;i||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||he("Cannot pass non-string to std::string"),r=n&&i?D(t):t.length;var o=ct(4+r+1),a=o+4;if(b[o>>2]=r,n&&i)C(t,w,a,r+1);else if(i)for(var s=0;s<r;++s){var c=t.charCodeAt(s);c>255&&(lt(a),he("String has UTF-16 code units that do not fit in 8 bits")),w[a+s]=c}else for(s=0;s<r;++s)w[a+s]=t[s];return null!==e&&e.push(lt,o),o},argPackAdvance:8,readValueFromPointer:te,destructorFunction:function(e){lt(e)}})},m:function(e,t,n){var r,i,o,a,s;n=ge(n),2===t?(r=Ne,i=Le,a=Fe,o=()=>I,s=1):4===t&&(r=We,i=Ue,a=je,o=()=>b,s=2),pe(e,{name:n,fromWireType:function(e){for(var n,i=b[e>>2],a=o(),c=e+4,l=0;l<=i;++l){var u=e+4+l*t;if(l==i||0==a[u>>s]){var d=r(c,u-c);void 0===n?n=d:(n+=String.fromCharCode(0),n+=d),c=u+t}}return lt(e),n},toWireType:function(e,r){"string"!=typeof r&&he("Cannot pass non-string to C++ string type "+n);var o=a(r),c=ct(4+o+t);return b[c>>2]=o>>s,i(r,c+4,o+t),null!==e&&e.push(lt,c),c},argPackAdvance:8,readValueFromPointer:te,destructorFunction:function(e){lt(e)}})},y:function(e,t,n,r,i,o){Q[e]={name:ge(t),rawConstructor:Ce(n,r),rawDestructor:Ce(i,o),fields:[]}},e:function(e,t,n,r,i,o,a,s,c,l){Q[e].fields.push({fieldName:ge(t),getterReturnType:n,getter:Ce(r,i),getterContext:o,setterArgumentType:a,setter:Ce(s,c),setterContext:l})},P:function(e,t){pe(e,{isVoid:!0,name:t=ge(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},r:function(e,t,n){e=Pe(e),t=ke(t,"emval::as");var r=[],i=be(r);return b[n>>2]=i,t.toWireType(r,e)},i:function(e,t,n,r){(e=Ge[e])(t=Pe(t),n=ze(n),null,r)},a:we,p:function(e){return 0===e?be(He()):(e=ze(e),be(He()[e]))},j:function(e,t){var n=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=ke(b[t+4*r>>2],"parameter "+r);return n}(e,t),r=n[0],i=r.name+"_$"+n.slice(1).map(function(e){return e.name}).join("_")+"$",o=Ye[i];if(void 0!==o)return o;for(var a=["retType"],s=[r],c="",l=0;l<e-1;++l)c+=(0!==l?", ":"")+"arg"+l,a.push("argType"+l),s.push(n[1+l]);var u="return function "+oe("methodCaller_"+i)+"(handle, name, destructors, args) {\n",d=0;for(l=0;l<e-1;++l)u+="    var arg"+l+" = argType"+l+".readValueFromPointer(args"+(d?"+"+d:"")+");\n",d+=n[l+1].argPackAdvance;for(u+="    var rv = handle[name]("+c+");\n",l=0;l<e-1;++l)n[l+1].deleteObject&&(u+="    argType"+l+".deleteObject(arg"+l+");\n");r.isVoid||(u+="    return retType.toWireType(destructors, rv);\n"),u+="};\n",a.push(u);var f,g,m=Te(Function,a).apply(null,s);return f=m,g=Ge.length,Ge.push(f),o=g,Ye[i]=o,o},s:function(e,t){return e=Pe(e),t=Pe(t),be(e[t])},f:function(e){e>4&&(ye[e].refcount+=1)},o:function(e,t,n,r){e=Pe(e);var o=qe[t];return o||(o=function(e){for(var t="",n=0;n<e;++n)t+=(0!==n?", ":"")+"arg"+n;var r="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(n=0;n<e;++n)r+="var argType"+n+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+n+"');\nvar arg"+n+" = argType"+n+".readValueFromPointer(args);\nargs += argType"+n+"['argPackAdvance'];\nargTypes += 4;\n";return r+="var obj = new constructor("+t+");\nreturn valueToHandle(obj);\n}\n",new Function("requireRegisteredType","Module","valueToHandle","getMemory",r)(ke,i,be,()=>b)}(t),qe[t]=o),o(e,n,r)},w:function(e){return be(ze(e))},q:function(e){ee(Pe(e)),we(e)},k:function(e,t){var n=(e=ke(e,"_emval_take_value")).readValueFromPointer(t);return be(n)},n:function(){H("")},h:function(e,t,n){return Je(e,t,n)},D:function(){return 2147483648},M:function(e,t,n){w.copyWithin(e,t,t+n)},C:function(e){var t=w.length,n=2147483648;if((e>>>=0)>n)return!1;let r=(e,t)=>e+(t-e%t)%t;for(var i=1;i<=4;i*=2){var o=t*(1+.2/i);if(o=Math.min(o,e+100663296),Xe(Math.min(n,r(Math.max(e,o),65536))))return!0}return!1},H:function(e,t){var n=0;return Ze().forEach(function(r,i){var o=t+n;b[e+4*i>>2]=o,function(e,t,n){for(var r=0;r<e.length;++r)y[0|t++]=e.charCodeAt(r);n||(y[0|t]=0)}(r,o),n+=r.length+1}),0},I:function(e,t){var n=Ze();b[e>>2]=n.length;var r=0;return n.forEach(function(e){r+=e.length+1}),b[t>>2]=r,0},l:function(e){return 52},K:function(e,t,n,r){return 52},z:function(e,t,n,r,i){return 70},t:function(e,t,n,r){for(var i=0,o=0;o<n;o++){var a=b[t>>2],s=b[t+4>>2];t+=8;for(var c=0;c<s;c++)et(e,w[a+c]);i+=s}return b[r>>2]=i,0},B:function(e,t,n,r,i){return it(e,t,n,r)}},ct=(function(){var e={a:st};function t(e,t){var n,r=e.exports;i.asm=r,R((m=i.asm.Q).buffer),O=i.asm.T,n=i.asm.R,N.unshift(n),function(){if(B--,i.monitorRunDependencies&&i.monitorRunDependencies(B),0==B&&(null!==z&&(clearInterval(z),z=null),G)){var e=G;G=null,e()}}()}function r(e){t(e.instance)}function o(t){return(d||"function"!=typeof fetch?Promise.resolve().then(function(){return q(j)}):fetch(j,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+j+"'";return e.arrayBuffer()}).catch(function(){return q(j)})).then(function(t){return WebAssembly.instantiate(t,e)}).then(function(e){return e}).then(t,function(e){g("failed to asynchronously prepare wasm: "+e),H(e)})}if(B++,i.monitorRunDependencies&&i.monitorRunDependencies(B),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){g("Module.instantiateWasm callback failed with error: "+e),n(e)}(d||"function"!=typeof WebAssembly.instantiateStreaming||Y(j)||"function"!=typeof fetch?o(r):fetch(j,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(r,function(e){return g("wasm streaming compile failed: "+e),g("falling back to ArrayBuffer instantiation"),o(r)})})).catch(n)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.R).apply(null,arguments)},i._main=function(){return(i._main=i.asm.S).apply(null,arguments)},i._malloc=function(){return(ct=i._malloc=i.asm.U).apply(null,arguments)}),lt=i._free=function(){return(lt=i._free=i.asm.V).apply(null,arguments)},ut=i.___getTypeName=function(){return(ut=i.___getTypeName=i.asm.W).apply(null,arguments)},dt=(i.__embind_initialize_bindings=function(){return(i.__embind_initialize_bindings=i.asm.X).apply(null,arguments)},i.___cxa_is_pointer_type=function(){return(dt=i.___cxa_is_pointer_type=i.asm.Y).apply(null,arguments)});function ft(e){var t,n=i._main;try{var r=n(0,0);return p=t=r,ot(t),r}catch(e){return function(e){if(e instanceof J||"unwind"==e)return p;l(1,e)}(e)}}function gt(e){function n(){at||(at=!0,i.calledRun=!0,E||(X(N),X(L),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),mt&&ft(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)U(i.postRun.shift());X(F)}()))}e=e||s,B>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)W(i.preRun.shift());X(V)}(),B>0||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),n()},1)):n()))}if(i.dynCall_viij=function(){return(i.dynCall_viij=i.asm.Z).apply(null,arguments)},i.dynCall_vij=function(){return(i.dynCall_vij=i.asm._).apply(null,arguments)},i.dynCall_iij=function(){return(i.dynCall_iij=i.asm.$).apply(null,arguments)},i.dynCall_viji=function(){return(i.dynCall_viji=i.asm.aa).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.ba).apply(null,arguments)},i.dynCall_viijii=function(){return(i.dynCall_viijii=i.asm.ca).apply(null,arguments)},i.dynCall_iiiiij=function(){return(i.dynCall_iiiiij=i.asm.da).apply(null,arguments)},i.dynCall_iiiiijj=function(){return(i.dynCall_iiiiijj=i.asm.ea).apply(null,arguments)},i.dynCall_iiiiiijj=function(){return(i.dynCall_iiiiiijj=i.asm.fa).apply(null,arguments)},i.___start_em_js=638316,i.___stop_em_js=638383,G=function e(){at||gt(),at||(G=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();var mt=!0;return i.noInitialRun&&(mt=!1),gt(),e.ready}),l=n.p+"17dd54813d5acc10bf8f.wasm";class u{constructor(){this._instance}get instance(){if(this._instance)return this._instance;throw new Error("ICRPolySeg is not initialized.")}async initialize(e={}){this._instance=await c({locateFile:e=>e.endsWith(".wasm")?l:e,...e})}}var d=n(75127),f=n(87275),g=n(28906);const m=1,h=-1,p=new Set;const v={};function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,v,n),g.m.obj(e,t),g.m.algo(e,t,1,1),function(e){e.requestData=(t,n)=>{const[r]=t;n[0]||(n[0]=f.Ay.newInstance());const[i]=n;e.extractContours(r,i),i.modified()},e.traverseLoop=(e,t,n,r,i)=>{let o=n,a=r,s=!1,c=0;for(;!s;){const{cellPointIds:n}=e.getCellPoints(o);if(!n)continue;a=n[0]!==a?n[0]:n[1],c++;const l=t*c;i.push({t:l,ptId:a});const u=e.getPointCells(a);if(2!==u.length||a===r)return a;2===u.length?(o=u[0]!==o?u[0]:u[1],p.add(o)):s=!0}return a},e.extractContours=(t,n)=>{const r=[];p.clear();const i=t.getLines();n.getPoints().setData(Float32Array.from(t.getPoints().getData()));for(let n=0;n<i.getNumberOfCells();n++){if(p.has(n))continue;const{cellPointIds:i}=t.getCellPoints(n);if(!i)continue;p.add(n);const o=i[0],a=[];a.push({t:0,ptId:o}),o!==e.traverseLoop(t,m,n,o,a)&&(e.traverseLoop(t,h,n,o,a),a.sort((e,t)=>e.t<t.t?-1:1),a.length&&a[0].ptId!==a[a.length-1]?.ptId&&a.push({...a[a.length-1]})),a.length&&r.push(a)}const o=n.getLines();o.resize(0),r.forEach(e=>{o.insertNextCell(e.map(e=>e.ptId))})}}(e)}var w={newInstance:g.m.newInstance(y,"vtkContourLoopExtraction"),extend:y},A=n(61088);const{EPSILON:I}=o.CONSTANTS;function P(e,t,n=!1){let r=1/0,i=n?-1/0:0,o=1/0,a=n?-1/0:0,s=1/0,c=n?-1/0:0;const l=3===e[0]?.length;for(let t=0;t<e.length;t++){const n=e[t];r=Math.min(n[0],r),i=Math.max(n[0],i),o=Math.min(n[1],o),a=Math.max(n[1],a),l&&(s=Math.min(n[2]??s,s),c=Math.max(n[2]??c,c))}return t?(r=Math.max(n?t[0]+I:0,r),i=Math.min(n?t[0]-I:t[0]-1,i),o=Math.max(n?t[1]+I:0,o),a=Math.min(n?t[1]-I:t[1]-1,a),l&&3===t.length&&(s=Math.max(n?t[2]+I:0,s),c=Math.min(n?t[2]-I:t[2]-1,c))):n||(r=Math.max(0,r),i=Math.min(1/0,i),o=Math.max(0,o),a=Math.min(1/0,a),l&&(s=Math.max(0,s),c=Math.min(1/0,c))),l?[[r,i],[o,a],[s,c]]:[[r,i],[o,a],null]}function b(e,t){return P(e,t,!0)}var S=n(3823);function T(e){if(e.length<3)return!1;const t=e.length,n=function(e,t){if(e.length!==t.length)throw Error("Both points should have the same dimensionality");const[n,r,i=0]=e,[o,a,s=0]=t,c=o-n,l=a-r,u=s-i;return c*c+l*l+u*u}(e[0],e[t-1]);return S.Fd.equals(0,n)}function E(e,t,n={closed:void 0}){if(e.length<3)return!1;const r=e.length;let i=0;const{closed:o,holes:a}=n;if(a?.length)for(const e of a)if(E(e,t))return!1;const s=!(void 0===o?T(e):o),c=e.length-(s?1:2);for(let n=0;n<=c;n++){const o=e[n],a=e[n===r-1?0:n+1],s=o[0]>=a[0]?o[0]:a[0],c=o[1]>=a[1]?o[1]:a[1],l=o[1]<=a[1]?o[1]:a[1];if(t[0]<=s&&t[1]>=l&&t[1]<c){let e=o[0]===a[0];if(!e){const n=(t[1]-o[1])*(a[0]-o[0])/(a[1]-o[1])+o[0];e=t[0]<=n}i+=e?1:0}}return!!(i%2)}var x=n(98122);var _,M,C;!function(e){e[e.Vertex=0]="Vertex",e[e.Intersection=1]="Intersection"}(_||(_={})),function(e){e[e.Outside=-1]="Outside",e[e.Edge=0]="Edge",e[e.Inside=1]="Inside"}(M||(M={})),function(e){e[e.Exiting=-1]="Exiting",e[e.Unknown=0]="Unknown",e[e.Entering=1]="Entering"}(C||(C={}));function D(e){let t;const n=o.utilities.getRandomSampleFromArray(e,50);for(let e=0;e<3;e++)if(n.every((t,n,r)=>Math.abs(t[e]-r[0][e])<1e-6)){t=e;break}if(void 0===t)throw new Error("Cannot find a shared dimension index for polyline, probably oblique plane");const r=[],i=(t+1)%3,a=(t+2)%3;for(let t=0;t<e.length;t++)r.push([e[t][i],e[t][a]]);return{sharedDimensionIndex:t,projectedPolyline:r}}var R=n(36374),O=n(35489),V=n(94418),N=n(57063),L=n(30698),F=n(40770);R.A,O.A,V.A,N.A,L.Y,F.W;const W={polySeg:null,polySegInitializing:!1,polySegInitializingPromise:null,async initializePolySeg(e){this.polySegInitializing?await this.polySegInitializingPromise:this.polySeg?.instance||(this.polySegInitializing=!0,this.polySegInitializingPromise=new Promise(t=>{this.polySeg=new u,this.polySeg.initialize({updateProgress:e}).then(()=>{this.polySegInitializing=!1,t()})}),await this.polySegInitializingPromise)},async convertContourToSurface(e,...t){const{polylines:n,numPointsArray:r}=e,[i]=t;await this.initializePolySeg(i);return await this.polySeg.instance.convertContourRoiToSurface(n,r)},async convertLabelmapToSurface(e,...t){const[n]=t;await this.initializePolySeg(n);return this.polySeg.instance.convertLabelmapToSurface(e.scalarData,e.dimensions,e.spacing,e.direction,e.origin,[e.segmentIndex])},async convertContourToVolumeLabelmap(e,...t){const[n]=t,r=await new u;await r.initialize({updateProgress:n});const{segmentIndices:i,scalarData:c,annotationUIDsInSegmentMap:l,dimensions:d,origin:f,direction:g,spacing:m}=e,h=o.utilities.VoxelManager.createScalarVolumeVoxelManager({dimensions:d,scalarData:c}),p=a.Ay.newInstance();p.setDimensions(d),p.setOrigin(f),p.setDirection(g),p.setSpacing(m);const v=s.Ay.newInstance({name:"Pixels",numberOfComponents:1,values:c});p.getPointData().setScalars(v),p.modified();for(const e of i){const t=l.get(e);for(const n of t){if(!n.polyline)continue;const{polyline:t,holesPolyline:r}=n,i=b(t),[a,s,l]=o.utilities.transformWorldToIndex(p,[i[0][0],i[1][0],i[2][0]]),[u,f,g]=o.utilities.transformWorldToIndex(p,[i[0][1],i[1][1],i[2][1]]),{projectedPolyline:m,sharedDimensionIndex:v}=D(t),y=r?.map(e=>{const{projectedPolyline:t}=D(e);return t}),w=(v+1)%3,A=(v+2)%3;o.utilities.VoxelManager.createScalarVolumeVoxelManager({dimensions:d,scalarData:c}).forEach(({pointIJK:t})=>{h.setAtIJKPoint(t,e)},{imageData:p,isInObject:e=>{const t=[e[w],e[A]];return E(m,t,{holes:y})},boundsIJK:[[a,u],[s,f],[l,g]]})}}return h.scalarData},async convertContourToStackLabelmap(e,...t){const[n]=t,r=await new u;await r.initialize({updateProgress:n});const{segmentationsInfo:i,annotationUIDsInSegmentMap:c,segmentIndices:l}=e,d=new Map;i.forEach((e,t)=>{const{dimensions:n,scalarData:r,direction:i,spacing:c,origin:l}=e,u=o.utilities.VoxelManager.createScalarVolumeVoxelManager({dimensions:n,scalarData:r}),f=a.Ay.newInstance();f.setDimensions(n),f.setOrigin(l),f.setDirection(i),f.setSpacing(c);const g=s.Ay.newInstance({name:"Pixels",numberOfComponents:1,values:r});f.getPointData().setScalars(g),f.modified(),d.set(t,{manager:u,imageData:f})});for(const e of l){const t=c.get(e);for(const n of t){if(!n.polyline)continue;const{polyline:t,holesPolyline:r,referencedImageId:i}=n,a=b(t),{manager:s,imageData:c}=d.get(i),[l,u,f]=o.utilities.transformWorldToIndex(c,[a[0][0],a[1][0],a[2][0]]),[g,m,h]=o.utilities.transformWorldToIndex(c,[a[0][1],a[1][1],a[2][1]]),{projectedPolyline:p,sharedDimensionIndex:v}=D(t),y=r?.map(e=>{const{projectedPolyline:t}=D(e);return t}),w=(v+1)%3,A=(v+2)%3;o.utilities.VoxelManager.createImageVoxelManager({width:c.getDimensions()[0],height:c.getDimensions()[1],scalarData:c.getPointData().getScalars().getData()}).forEach(({pointIJK:t})=>{s.setAtIJKPoint(t,e)},{imageData:c,isInObject:e=>{const t=[e[w],e[A]];return E(p,t,{holes:y})},boundsIJK:[[l,g],[u,m],[f,h]]})}}return i.forEach((e,t)=>{const{manager:n}=d.get(t);e.scalarData=n.scalarData}),i},async convertSurfaceToVolumeLabelmap(e,...t){const[n]=t;await this.initializePolySeg(n);return this.polySeg.instance.convertSurfaceToLabelmap(e.points,e.polys,e.dimensions,e.spacing,e.direction,e.origin)},async convertSurfacesToVolumeLabelmap(e,...t){const[n]=t;await this.initializePolySeg(n);const{segmentsInfo:r}=e,i=Array.from(r.keys()).map(t=>{const{points:n,polys:i}=r.get(t);return{...this.polySeg.instance.convertSurfaceToLabelmap(n,i,e.dimensions,e.spacing,e.direction,e.origin),segmentIndex:t}}),c=await Promise.all(i),l=a.Ay.newInstance();l.setDimensions(e.dimensions),l.setOrigin(e.origin),l.setSpacing(e.spacing),l.setDirection(e.direction);const u=e.dimensions[0]*e.dimensions[1]*e.dimensions[2],d=s.Ay.newInstance({name:"Pixels",numberOfComponents:1,values:new Uint8Array(u)});l.getPointData().setScalars(d),l.modified();const{dimensions:f}=e,g=l.getPointData().getScalars().getData(),m=o.utilities.VoxelManager.createScalarVolumeVoxelManager({dimensions:f,scalarData:g}),h=c.map(e=>{const{data:t,dimensions:n,direction:r,origin:i,spacing:c}=e,l=a.Ay.newInstance();l.setDimensions(n),l.setOrigin(i),l.setSpacing(c),l.setDirection(r);const u=s.Ay.newInstance({name:"Pixels",numberOfComponents:1,values:t});l.getPointData().setScalars(u),l.modified();const d=o.utilities.VoxelManager.createScalarVolumeVoxelManager({dimensions:n,scalarData:t}),f=l.getExtent();return{volume:l,voxelManager:d,extent:f,scalarData:t,segmentIndex:e.segmentIndex}});return o.utilities.VoxelManager.createScalarVolumeVoxelManager({dimensions:l.getDimensions(),scalarData:l.getPointData().getScalars().getData()}).forEach(({pointIJK:e,pointLPS:t})=>{try{for(const n of h){const{volume:r,extent:i,voxelManager:o,segmentIndex:a}=n,s=r.worldToIndex(t);if(s[0]<i[0]||s[0]>i[1]||s[1]<i[2]||s[1]>i[3]||s[2]<i[4]||s[2]>i[5])continue;const c=s.map(Math.round);if(o.getAtIJK(...c)>0){m.setAtIJKPoint(e,a);break}}}catch(e){}},{imageData:l}),m.scalarData},getSurfacesAABBs({surfacesInfo:e}){const t=new Map;for(const{points:n,id:r}of e){const e=(0,x.A)(n,{numDimensions:3});t.set(r,e)}return t},cutSurfacesIntoPlanes({planesInfo:e,surfacesInfo:t,surfacesAABB:n=new Map},r,i){const o=e.length,a=A.Ay.newInstance(),s=d.Ay.newInstance();a.setCutFunction(s);const c=f.Ay.newInstance();try{for(const[l,u]of e.entries()){const{sliceIndex:e,planes:d}=u,f=new Map;for(const e of t){const{points:t,polys:r,id:i,segmentIndex:o}=e,l=n.get(i)||(0,x.A)(t,{numDimensions:3});n.has(i)||n.set(i,l);const{minX:u,minY:g,minZ:m,maxX:h,maxY:p,maxZ:v}=l,{origin:y,normal:A}=d[0];if(!(0,L.Y)(y,A,u,g,m,h,p,v))continue;c.getPoints().setData(t,3),c.getPolys().setData(r,3),c.modified(),a.setInputData(c),s.setOrigin(y),s.setNormal(A);try{a.update()}catch(e){console.warn("Error during clipping",e);continue}const I=a.getOutputData(),P=I;P.buildLinks();const b=w.newInstance();b.setInputData(P);const S=b.getOutputData();I&&f.set(o,{points:S.getPoints().getData(),lines:S.getLines().getData(),numberOfCells:S.getLines().getNumberOfCells(),segmentIndex:o})}r({progress:(l+1)/o}),i({sliceIndex:e,polyDataResults:f})}}catch(e){console.warn("Error during processing",e)}finally{t=null,s.delete()}}};(0,i.p)(W)},35056:(e,t,n)=>{n.d(t,{Ay:()=>u});var r=n(28906),i=n(42008),o=n(28914);function a(e){let t=0;return e.filter((e,n)=>n===t&&(t+=e+1,!0))}function s(e){let t=0;for(let n=0;n<e.length;)n+=e[n]+1,t++;return t}const c={extractCellSizes:a,getNumberOfCells:s};function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.Ay.extend(e,t,function(e){return{empty:!0,numberOfComponents:1,dataType:o.JA.UNSIGNED_INT,...e}}(n)),function(e,t){t.classHierarchy.push("vtkCellArray");const n={...e};e.getNumberOfCells=n=>void 0===t.numberOfCells||n?(t.cellSizes?t.numberOfCells=t.cellSizes.length:t.numberOfCells=s(e.getData()),t.numberOfCells):t.numberOfCells,e.getCellSizes=n=>void 0===t.cellSizes||n?(t.cellSizes=a(e.getData()),t.cellSizes):t.cellSizes,e.resize=r=>{const i=e.getNumberOfTuples();n.resize(r);const o=e.getNumberOfTuples();o<i&&(0===o?(t.numberOfCells=0,t.cellSizes=[]):(t.numberOfCells=void 0,t.cellSizes=void 0))},e.setData=e=>{n.setData(e,1),t.numberOfCells=void 0,t.cellSizes=void 0},e.getCell=e=>{let n=e;const r=t.values[n++];return t.values.subarray(n,n+r)},e.insertNextCell=n=>{const r=e.getNumberOfCells();return e.insertNextTuples([n.length,...n]),++t.numberOfCells,null!=t.cellSizes&&t.cellSizes.push(n.length),r}}(e,t)}var u={newInstance:r.m.newInstance(l,"vtkCellArray"),extend:l,...c}},28914:(e,t,n)=>{n.d(t,{Ay:()=>i,JA:()=>r});const r={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"};var i={DefaultDataType:r.FLOAT,DataTypeByteSize:{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},VtkDataTypes:r}},62612:(e,t,n)=>{n.d(t,{Ay:()=>r});var r={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:{SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:{DEFAULT:0,SINGLE:1,DOUBLE:2},PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"}},58498:(e,t,n)=>{n.d(t,{Ay:()=>g});var r=n(28906),i=n(16632),o=n(21734),a=n(69147),s=n(24964),c=n(85278),l=n(3823);const{vtkErrorMacro:u}=r.m;const d={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:c.e.EMPTY};function f(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,n),a.Ay.extend(e,t,n),t.direction?Array.isArray(t.direction)&&(t.direction=new Float64Array(t.direction.slice(0,9))):t.direction=l.w0.identity(new Float64Array(9)),t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),r.m.get(e,t,["indexToWorld","worldToIndex"]),r.m.setGetArray(e,t,["origin","spacing"],3),r.m.setGetArray(e,t,["direction"],9),r.m.getArray(e,t,["extent"],6),function(e,t){t.classHierarchy.push("vtkImageData"),e.setExtent=function(){if(t.deleted)return u("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const o=1===r.length?r[0]:r;if(6!==o.length)return!1;const a=t.extent.some((e,t)=>e!==o[t]);return a&&(t.extent=o.slice(),t.dataDescription=s.A.getDataDescriptionFromExtent(t.extent),e.modified()),a},e.setDimensions=function(){let n,r,i;if(t.deleted)u("instance deleted - cannot call any method");else{if(1===arguments.length){const e=arguments.length<=0?void 0:arguments[0];n=e[0],r=e[1],i=e[2]}else{if(3!==arguments.length)return void u("Bad dimension specification");n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]}e.setExtent(0,n-1,0,r-1,0,i-1)}},e.getDimensions=()=>[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1],e.getNumberOfCells=()=>{const t=e.getDimensions();let n=1;for(let e=0;e<3;e++){if(0===t[e])return 0;t[e]>1&&(n*=t[e]-1)}return n},e.getNumberOfPoints=()=>{const t=e.getDimensions();return t[0]*t[1]*t[2]},e.getPoint=n=>{const r=e.getDimensions();if(0===r[0]||0===r[1]||0===r[2])return u("Requesting a point from an empty image."),null;const i=new Float64Array(3);switch(t.dataDescription){case c.e.EMPTY:return null;case c.e.SINGLE_POINT:break;case c.e.X_LINE:i[0]=n;break;case c.e.Y_LINE:i[1]=n;break;case c.e.Z_LINE:i[2]=n;break;case c.e.XY_PLANE:i[0]=n%r[0],i[1]=n/r[0];break;case c.e.YZ_PLANE:i[1]=n%r[1],i[2]=n/r[1];break;case c.e.XZ_PLANE:i[0]=n%r[0],i[2]=n/r[0];break;case c.e.XYZ_GRID:i[0]=n%r[0],i[1]=n/r[0]%r[1],i[2]=n/(r[0]*r[1]);break;default:u("Invalid dataDescription")}const o=[0,0,0];return e.indexToWorld(i,o),o},e.getBounds=()=>e.extentToBounds(e.getSpatialExtent()),e.extentToBounds=e=>o.Ay.transformBounds(e,t.indexToWorld),e.getSpatialExtent=()=>o.Ay.inflate([...t.extent],.5),e.computeTransforms=()=>{l.pB.fromTranslation(t.indexToWorld,t.origin),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8],l.pB.scale(t.indexToWorld,t.indexToWorld,t.spacing),l.pB.invert(t.worldToIndex,t.indexToWorld)},e.indexToWorld=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l.eR.transformMat4(n,e,t.indexToWorld),n},e.indexToWorldVec3=e.indexToWorld,e.worldToIndex=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l.eR.transformMat4(n,e,t.worldToIndex),n},e.worldToIndexVec3=e.worldToIndex,e.indexToWorldBounds=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o.Ay.transformBounds(e,t.indexToWorld,n)},e.worldToIndexBounds=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o.Ay.transformBounds(e,t.worldToIndex,n)},e.onModified(e.computeTransforms),e.computeTransforms(),e.getCenter=()=>o.Ay.getCenter(e.getBounds()),e.computeHistogram=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=[0,0,0,0,0,0];e.worldToIndexBounds(t,r);const a=[0,0,0],s=[0,0,0];o.Ay.computeCornerPoints(r,a,s),(0,i.b)(a,a),(0,i.b)(s,s);const c=e.getDimensions();(0,i.c)(a,[0,0,0],[c[0]-1,c[1]-1,c[2]-1],a),(0,i.c)(s,[0,0,0],[c[0]-1,c[1]-1,c[2]-1],s);const l=c[0],u=c[0]*c[1],d=e.getPointData().getScalars().getData();let f=-1/0,g=1/0,m=0,h=0,p=0;for(let e=a[2];e<=s[2];e++)for(let t=a[1];t<=s[1];t++){let i=a[0]+t*l+e*u;for(let o=a[0];o<=s[0];o++){if(!n||n([o,t,e],r)){const e=d[i];e>f&&(f=e),e<g&&(g=e),m+=e*e,h+=e,p+=1}++i}}const v=p>0?h/p:0,y=p?Math.abs(m/p-v*v):0;return{minimum:g,maximum:f,average:v,variance:y,sigma:Math.sqrt(y),count:p}},e.computeIncrements=function(e){const t=[];let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(let r=0;r<3;++r)t[r]=n,n*=e[2*r+1]-e[2*r]+1;return t},e.computeOffsetIndex=t=>{let[n,r,i]=t;const o=e.getExtent(),a=e.getPointData().getScalars().getNumberOfComponents(),s=e.computeIncrements(o,a);return Math.floor((Math.round(n)-o[0])*s[0]+(Math.round(r)-o[2])*s[1]+(Math.round(i)-o[4])*s[2])},e.getOffsetIndexFromWorld=t=>{const n=e.getExtent(),r=e.worldToIndex(t);for(let e=0;e<3;++e)if(r[e]<n[2*e]||r[e]>n[2*e+1])return u(`GetScalarPointer: Pixel ${r} is not in memory. Current extent = ${n}`),NaN;return e.computeOffsetIndex(r)},e.getScalarValueFromWorld=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=e.getPointData().getScalars().getNumberOfComponents();if(n<0||n>=r)return u(`GetScalarPointer: Scalar Component ${n} is not within bounds. Current Scalar numberOfComponents: ${r}`),NaN;const i=e.getOffsetIndexFromWorld(t);return Number.isNaN(i)?i:e.getPointData().getScalars().getComponent(i,n)}}(e,t)}var g={newInstance:r.m.newInstance(f,"vtkImageData"),extend:f}},50761:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(76725);const i=Object.create(null);r.v.filter(e=>e.RGBPoints).filter(e=>"CIELAB"!==e.ColorSpace).forEach(e=>{i[e.Name]=e});const o=Object.keys(i);o.sort();var a={addPreset:function(e){e.RGBPoints&&"CIELAB"!==e.ColorSpace&&(i[e.Name]||(o.push(e.Name),o.sort()),i[e.Name]=e)},removePresetByName:function(e){const t=o.indexOf(e);t>-1&&o.splice(t,1),delete i[e]},getPresetByName:function(e){return i[e]},rgbPresetNames:o}},99178:(e,t,n)=>{n.d(t,{p:()=>d});const r=Symbol("Comlink.proxy"),i=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),c=e=>"object"==typeof e&&null!==e||"function"==typeof e,l={canHandle:e=>c(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return d(e,t),[n,[n]]},deserialize:e=>(e.start(),function(e,t){const n=new Map;return e.addEventListener("message",function(e){const{data:t}=e;if(!t||!t.id)return;const r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}}),v(e,n,[],t)}(e))},u=new Map([["proxy",l],["throw",{canHandle:e=>c(e)&&s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function d(e,t=globalThis,n=["*"]){t.addEventListener("message",function i(o){if(!o||!o.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,o.origin))return void console.warn(`Invalid origin '${o.origin}' for comlink proxy`);const{id:c,type:l,path:u}=Object.assign({path:[]},o.data),g=(o.data.argumentList||[]).map(I);let m;try{const t=u.slice(0,-1).reduce((e,t)=>e[t],e),n=u.reduce((e,t)=>e[t],e);switch(l){case"GET":m=n;break;case"SET":t[u.slice(-1)[0]]=I(o.data.value),m=!0;break;case"APPLY":m=n.apply(t,g);break;case"CONSTRUCT":m=function(e){return Object.assign(e,{[r]:!0})}(new n(...g));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;d(e,n),m=function(e,t){return w.set(e,t),e}(t,[t])}break;case"RELEASE":m=void 0;break;default:return}}catch(e){m={value:e,[s]:0}}Promise.resolve(m).catch(e=>({value:e,[s]:0})).then(n=>{const[r,o]=A(n);t.postMessage(Object.assign(Object.assign({},r),{id:c}),o),"RELEASE"===l&&(t.removeEventListener("message",i),f(t),a in e&&"function"==typeof e[a]&&e[a]())}).catch(e=>{const[n,r]=A({value:new TypeError("Unserializable return value"),[s]:0});t.postMessage(Object.assign(Object.assign({},n),{id:c}),r)})}),t.start&&t.start()}function f(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function g(e){if(e)throw new Error("Proxy has been released and is not useable")}function m(e){return P(e,new Map,{type:"RELEASE"}).then(()=>{f(e)})}const h=new WeakMap,p="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(h.get(e)||0)-1;h.set(e,t),0===t&&m(e)});function v(e,t,n=[],r=function(){}){let a=!1;const s=new Proxy(r,{get(r,i){if(g(a),i===o)return()=>{!function(e){p&&p.unregister(e)}(s),m(e),t.clear(),a=!0};if("then"===i){if(0===n.length)return{then:()=>s};const r=P(e,t,{type:"GET",path:n.map(e=>e.toString())}).then(I);return r.then.bind(r)}return v(e,t,[...n,i])},set(r,i,o){g(a);const[s,c]=A(o);return P(e,t,{type:"SET",path:[...n,i].map(e=>e.toString()),value:s},c).then(I)},apply(r,o,s){g(a);const c=n[n.length-1];if(c===i)return P(e,t,{type:"ENDPOINT"}).then(I);if("bind"===c)return v(e,t,n.slice(0,-1));const[l,u]=y(s);return P(e,t,{type:"APPLY",path:n.map(e=>e.toString()),argumentList:l},u).then(I)},construct(r,i){g(a);const[o,s]=y(i);return P(e,t,{type:"CONSTRUCT",path:n.map(e=>e.toString()),argumentList:o},s).then(I)}});return function(e,t){const n=(h.get(t)||0)+1;h.set(t,n),p&&p.register(e,t,e)}(s,e),s}function y(e){const t=e.map(A);return[t.map(e=>e[0]),(n=t.map(e=>e[1]),Array.prototype.concat.apply([],n))];var n}const w=new WeakMap;function A(e){for(const[t,n]of u)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},w.get(e)||[]]}function I(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function P(e,t,n,r){return new Promise(i=>{const o=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(o,i),e.start&&e.start(),e.postMessage(Object.assign({id:o},n),r)})}},75210:(e,t,n)=>{n.d(t,{h1:()=>r.Ay,yl:()=>i.A,lq:()=>o.lq,sG:()=>o.sG,Zc:()=>o.Ay});var r=n(81068),i=(n(18642),n(38153)),o=(n(19743),n(5739),n(67800),n(11472),n(33760),n(47803),n(80130),n(52827),n(13723),n(22543),n(97315),n(48210),n(95211),n(67049),n(36426),n(64196),n(61515),n(26892),n(37412),n(57623),n(97982),n(3581),n(51963),n(35457),n(83254),n(49115),n(43523),n(14029),n(36820),n(84201),n(55973),n(40049),n(82061),n(65591),n(96945),n(66871),n(47598));n(77097);n(25475),n(39034),n(95388),n(69010),n(91804),n(23526),n(60786),n(18949),n(77050),n(29351),n(59128),n(47051),n(78603),n(59043)},57623:(e,t,n)=>{},65481:(e,t,n)=>{n.d(t,{GW:()=>r.A,Dj:()=>i.A,sH:()=>o.A});var r=n(1283),i=(n(82043),n(43724),n(96184),n(2728),n(61847),n(73524),n(20825)),o=(n(32204),n(34107),n(66822));n(33637),n(62911),n(85351),n(83441),n(26093),n(86617),n(69277),n(34121),n(84444)}}]);
//# sourceMappingURL=1556.bundle.bd31be5c816f0b32ee2d.js.map