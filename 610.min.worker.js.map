{"version":3,"file":"610.min.worker.js","mappings":"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","sources":["webpack:///../codecs/jpegLossless.js"],"sourcesContent":["/* eslint-disable */\r\n\r\n(function (f) {\r\n  if (typeof exports === 'object' && typeof module !== 'undefined') {\r\n    module.exports = f();\r\n  } else if (typeof define === 'function' && define.amd) {\r\n    define([], f);\r\n  } else {\r\n    var g;\r\n\r\n    if (typeof window !== 'undefined') {\r\n      g = window;\r\n    } else if (typeof global !== 'undefined') {\r\n      g = global;\r\n    } else if (typeof self !== 'undefined') {\r\n      g = self;\r\n    } else {\r\n      g = this;\r\n    }\r\n    g.jpeg = f();\r\n  }\r\n})(function () {\r\n  var define, module, exports;\r\n\r\n  return (function e(t, n, r) {\r\n    function s(o, u) {\r\n      if (!n[o]) {\r\n        if (!t[o]) {\r\n          var a = typeof require === 'function' && require;\r\n\r\n          if (!u && a) {\r\n            return a(o, !0);\r\n          }\r\n          if (i) {\r\n            return i(o, !0);\r\n          }\r\n          var f = new Error(\"Cannot find module '\" + o + \"'\");\r\n\r\n          throw ((f.code = 'MODULE_NOT_FOUND'), f);\r\n        }\r\n        var l = (n[o] = { exports: {} });\r\n\r\n        t[o][0].call(\r\n          l.exports,\r\n          function (e) {\r\n            var n = t[o][1][e];\r\n\r\n            return s(n ? n : e);\r\n          },\r\n          l,\r\n          l.exports,\r\n          e,\r\n          t,\r\n          n,\r\n          r\r\n        );\r\n      }\r\n\r\n      return n[o].exports;\r\n    }\r\n    var i = typeof require === 'function' && require;\r\n\r\n    for (var o = 0; o < r.length; o++) {\r\n      s(r[o]);\r\n    }\r\n\r\n    return s;\r\n  })(\r\n    {\r\n      1: [\r\n        function (require, module, exports) {\r\n          /*\r\n           * Copyright (C) 2015 Michael Martinez\r\n           * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n           * warnings, split into multiple class files, and general clean up.\r\n           *\r\n           * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n           */\r\n\r\n          /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n\r\n          /*** Imports ***/\r\n          var jpeg = jpeg || {};\r\n\r\n          jpeg.lossless = jpeg.lossless || {};\r\n\r\n          /*** Constructor ***/\r\n          jpeg.lossless.ComponentSpec =\r\n            jpeg.lossless.ComponentSpec ||\r\n            function () {\r\n              this.hSamp = 0; // Horizontal sampling factor\r\n              this.quantTableSel = 0; // Quantization table destination selector\r\n              this.vSamp = 0; // Vertical\r\n            };\r\n\r\n          /*** Exports ***/\r\n\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg.lossless.ComponentSpec;\r\n          }\r\n        },\r\n        {},\r\n      ],\r\n      2: [\r\n        function (require, module, exports) {\r\n          /*\r\n           * Copyright (C) 2015 Michael Martinez\r\n           * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n           * warnings, split into multiple class files, and general clean up.\r\n           *\r\n           * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n           */\r\n\r\n          /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n          /*** Imports ***/\r\n          var jpeg = jpeg || {};\r\n\r\n          jpeg.lossless = jpeg.lossless || {};\r\n\r\n          /*** Constructor ***/\r\n          jpeg.lossless.DataStream =\r\n            jpeg.lossless.DataStream ||\r\n            function (data, offset, length) {\r\n              // Note: DataView is much slower than Int8Array\r\n              // this.buffer = new DataView(data, offset, length);\r\n              this.buffer = new Uint8Array(data, offset, length);\r\n              this.index = 0;\r\n            };\r\n          jpeg.lossless.DataStream.prototype.get16 = function () {\r\n            // var value = this.buffer.getUint16(this.index, false);\r\n            var value =\r\n              (this.buffer[this.index] << 8) + this.buffer[this.index + 1]; // DataView is big-endian by default\r\n\r\n            this.index += 2;\r\n\r\n            return value;\r\n          };\r\n          jpeg.lossless.DataStream.prototype.get8 = function () {\r\n            // var value = this.buffer.getUint8(this.index);\r\n            var value = this.buffer[this.index];\r\n\r\n            this.index += 1;\r\n\r\n            return value;\r\n          };\r\n\r\n          /*** Exports ***/\r\n\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg.lossless.DataStream;\r\n          }\r\n        },\r\n        {},\r\n      ],\r\n      3: [\r\n        function (require, module, exports) {\r\n          /*\r\n           * Copyright (C) 2015 Michael Martinez\r\n           * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n           * warnings, split into multiple class files, and general clean up.\r\n           *\r\n           * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n           */\r\n\r\n          /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n          /*** Imports ***/\r\n          var jpeg = jpeg || {};\r\n\r\n          jpeg.lossless = jpeg.lossless || {};\r\n          jpeg.lossless.DataStream =\r\n            jpeg.lossless.DataStream ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./data-stream.js')\r\n              : null);\r\n          jpeg.lossless.HuffmanTable =\r\n            jpeg.lossless.HuffmanTable ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./huffman-table.js')\r\n              : null);\r\n          jpeg.lossless.QuantizationTable =\r\n            jpeg.lossless.QuantizationTable ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./quantization-table.js')\r\n              : null);\r\n          jpeg.lossless.ScanHeader =\r\n            jpeg.lossless.ScanHeader ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./scan-header.js')\r\n              : null);\r\n          jpeg.lossless.FrameHeader =\r\n            jpeg.lossless.FrameHeader ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./frame-header.js')\r\n              : null);\r\n          jpeg.lossless.Utils =\r\n            jpeg.lossless.Utils ||\r\n            (typeof require !== 'undefined' ? require('./utils.js') : null);\r\n\r\n          /*** Constructor ***/\r\n\r\n          /**\r\n           * The Decoder constructor.\r\n           * @property {number} xDim - size of x dimension\r\n           * @property {number} yDim - size of y dimension\r\n           * @property {number} numComp - number of components\r\n           * @property {number} numBytes - number of bytes per component\r\n           * @type {Function}\r\n           */\r\n          jpeg.lossless.Decoder =\r\n            jpeg.lossless.Decoder ||\r\n            function (buffer, numBytes) {\r\n              this.buffer = buffer;\r\n              this.frame = new jpeg.lossless.FrameHeader();\r\n              this.huffTable = new jpeg.lossless.HuffmanTable();\r\n              this.quantTable = new jpeg.lossless.QuantizationTable();\r\n              this.scan = new jpeg.lossless.ScanHeader();\r\n              this.DU = jpeg.lossless.Utils.createArray(10, 4, 64); // at most 10 data units in a MCU, at most 4 data units in one component\r\n              this.HuffTab = jpeg.lossless.Utils.createArray(4, 2, 50 * 256);\r\n              this.IDCT_Source = [];\r\n              this.nBlock = []; // number of blocks in the i-th Comp in a scan\r\n              this.acTab = jpeg.lossless.Utils.createArray(10, 1); // ac HuffTab for the i-th Comp in a scan\r\n              this.dcTab = jpeg.lossless.Utils.createArray(10, 1); // dc HuffTab for the i-th Comp in a scan\r\n              this.qTab = jpeg.lossless.Utils.createArray(10, 1); // quantization table for the i-th Comp in a scan\r\n              this.marker = 0;\r\n              this.markerIndex = 0;\r\n              this.numComp = 0;\r\n              this.restartInterval = 0;\r\n              this.selection = 0;\r\n              this.xDim = 0;\r\n              this.yDim = 0;\r\n              this.xLoc = 0;\r\n              this.yLoc = 0;\r\n              this.numBytes = 0;\r\n              this.outputData = null;\r\n              this.restarting = false;\r\n              this.mask = 0;\r\n\r\n              if (typeof numBytes !== 'undefined') {\r\n                this.numBytes = numBytes;\r\n              }\r\n            };\r\n\r\n          /*** Static Pseudo-constants ***/\r\n\r\n          jpeg.lossless.Decoder.IDCT_P = [\r\n            0, 5, 40, 16, 45, 2, 7, 42, 21, 56, 8, 61, 18, 47, 1, 4, 41, 23, 58,\r\n            13, 32, 24, 37, 10, 63, 17, 44, 3, 6, 43, 20, 57, 15, 34, 29, 48,\r\n            53, 26, 39, 9, 60, 19, 46, 22, 59, 12, 33, 31, 50, 55, 25, 36, 11,\r\n            62, 14, 35, 28, 49, 52, 27, 38, 30, 51, 54,\r\n          ];\r\n          jpeg.lossless.Decoder.TABLE = [\r\n            0, 1, 5, 6, 14, 15, 27, 28, 2, 4, 7, 13, 16, 26, 29, 42, 3, 8, 12,\r\n            17, 25, 30, 41, 43, 9, 11, 18, 24, 31, 40, 44, 53, 10, 19, 23, 32,\r\n            39, 45, 52, 54, 20, 22, 33, 38, 46, 51, 55, 60, 21, 34, 37, 47, 50,\r\n            56, 59, 61, 35, 36, 48, 49, 57, 58, 62, 63,\r\n          ];\r\n          jpeg.lossless.Decoder.MAX_HUFFMAN_SUBTREE = 50;\r\n          jpeg.lossless.Decoder.MSB = 0x80000000;\r\n          jpeg.lossless.Decoder.RESTART_MARKER_BEGIN = 0xffd0;\r\n          jpeg.lossless.Decoder.RESTART_MARKER_END = 0xffd7;\r\n\r\n          /*** Prototype Methods ***/\r\n\r\n          /**\r\n           * Returns decompressed data.\r\n           * @param {ArrayBuffer} buffer\r\n           * @param {number} [offset]\r\n           * @param {number} [length]\r\n           * @returns {ArrayBufer}\r\n           */\r\n          jpeg.lossless.Decoder.prototype.decompress = function (\r\n            buffer,\r\n            offset,\r\n            length\r\n          ) {\r\n            return this.decode(buffer, offset, length).buffer;\r\n          };\r\n          jpeg.lossless.Decoder.prototype.decode = function (\r\n            buffer,\r\n            offset,\r\n            length,\r\n            numBytes\r\n          ) {\r\n            /*jslint bitwise: true */\r\n\r\n            var current,\r\n              scanNum = 0,\r\n              pred = [],\r\n              i,\r\n              compN,\r\n              temp = [],\r\n              index = [],\r\n              mcuNum;\r\n\r\n            if (typeof buffer !== 'undefined') {\r\n              this.buffer = buffer;\r\n            }\r\n\r\n            if (typeof numBytes !== 'undefined') {\r\n              this.numBytes = numBytes;\r\n            }\r\n\r\n            this.stream = new jpeg.lossless.DataStream(\r\n              this.buffer,\r\n              offset,\r\n              length\r\n            );\r\n            this.buffer = null;\r\n\r\n            this.xLoc = 0;\r\n            this.yLoc = 0;\r\n            current = this.stream.get16();\r\n\r\n            if (current !== 0xffd8) {\r\n              // SOI\r\n              throw new Error('Not a JPEG file');\r\n            }\r\n\r\n            current = this.stream.get16();\r\n\r\n            while (current >> 4 !== 0x0ffc || current === 0xffc4) {\r\n              // SOF 0~15\r\n              switch (current) {\r\n                case 0xffc4: // DHT\r\n                  this.huffTable.read(this.stream, this.HuffTab);\r\n                  break;\r\n                case 0xffcc: // DAC\r\n                  throw new Error(\r\n                    \"Program doesn't support arithmetic coding. (format throw new IOException)\"\r\n                  );\r\n                case 0xffdb:\r\n                  this.quantTable.read(\r\n                    this.stream,\r\n                    jpeg.lossless.Decoder.TABLE\r\n                  );\r\n                  break;\r\n                case 0xffdd:\r\n                  this.restartInterval = this.readNumber();\r\n                  break;\r\n                case 0xffe0:\r\n                case 0xffe1:\r\n                case 0xffe2:\r\n                case 0xffe3:\r\n                case 0xffe4:\r\n                case 0xffe5:\r\n                case 0xffe6:\r\n                case 0xffe7:\r\n                case 0xffe8:\r\n                case 0xffe9:\r\n                case 0xffea:\r\n                case 0xffeb:\r\n                case 0xffec:\r\n                case 0xffed:\r\n                case 0xffee:\r\n                case 0xffef:\r\n                  this.readApp();\r\n                  break;\r\n                case 0xfffe:\r\n                  this.readComment();\r\n                  break;\r\n                default:\r\n                  if (current >> 8 !== 0xff) {\r\n                    throw new Error(\r\n                      'ERROR: format throw new IOException! (decode)'\r\n                    );\r\n                  }\r\n              }\r\n\r\n              current = this.stream.get16();\r\n            }\r\n\r\n            if (current < 0xffc0 || current > 0xffc7) {\r\n              throw new Error('ERROR: could not handle arithmetic code!');\r\n            }\r\n\r\n            this.frame.read(this.stream);\r\n            current = this.stream.get16();\r\n\r\n            do {\r\n              while (current !== 0x0ffda) {\r\n                // SOS\r\n                switch (current) {\r\n                  case 0xffc4: // DHT\r\n                    this.huffTable.read(this.stream, this.HuffTab);\r\n                    break;\r\n                  case 0xffcc: // DAC\r\n                    throw new Error(\r\n                      \"Program doesn't support arithmetic coding. (format throw new IOException)\"\r\n                    );\r\n                  case 0xffdb:\r\n                    this.quantTable.read(\r\n                      this.stream,\r\n                      jpeg.lossless.Decoder.TABLE\r\n                    );\r\n                    break;\r\n                  case 0xffdd:\r\n                    this.restartInterval = this.readNumber();\r\n                    break;\r\n                  case 0xffe0:\r\n                  case 0xffe1:\r\n                  case 0xffe2:\r\n                  case 0xffe3:\r\n                  case 0xffe4:\r\n                  case 0xffe5:\r\n                  case 0xffe6:\r\n                  case 0xffe7:\r\n                  case 0xffe8:\r\n                  case 0xffe9:\r\n                  case 0xffea:\r\n                  case 0xffeb:\r\n                  case 0xffec:\r\n                  case 0xffed:\r\n                  case 0xffee:\r\n                  case 0xffef:\r\n                    this.readApp();\r\n                    break;\r\n                  case 0xfffe:\r\n                    this.readComment();\r\n                    break;\r\n                  default:\r\n                    if (current >> 8 !== 0xff) {\r\n                      throw new Error(\r\n                        'ERROR: format throw new IOException! (Parser.decode)'\r\n                      );\r\n                    }\r\n                }\r\n\r\n                current = this.stream.get16();\r\n              }\r\n\r\n              this.precision = this.frame.precision;\r\n              this.components = this.frame.components;\r\n\r\n              if (!this.numBytes) {\r\n                this.numBytes = parseInt(Math.ceil(this.precision / 8));\r\n              }\r\n\r\n              if (this.numBytes == 1) {\r\n                this.mask = 0xff;\r\n              } else {\r\n                this.mask = 0xffff;\r\n              }\r\n\r\n              this.scan.read(this.stream);\r\n              this.numComp = this.scan.numComp;\r\n              this.selection = this.scan.selection;\r\n\r\n              if (this.numBytes === 1) {\r\n                if (this.numComp === 3) {\r\n                  this.getter = this.getValueRGB;\r\n                  this.setter = this.setValueRGB;\r\n                  this.output = this.outputRGB;\r\n                } else {\r\n                  this.getter = this.getValue8;\r\n                  this.setter = this.setValue8;\r\n                  this.output = this.outputSingle;\r\n                }\r\n              } else {\r\n                this.getter = this.getValue16;\r\n                this.setter = this.setValue16;\r\n                this.output = this.outputSingle;\r\n              }\r\n\r\n              switch (this.selection) {\r\n                case 2:\r\n                  this.selector = this.select2;\r\n                  break;\r\n                case 3:\r\n                  this.selector = this.select3;\r\n                  break;\r\n                case 4:\r\n                  this.selector = this.select4;\r\n                  break;\r\n                case 5:\r\n                  this.selector = this.select5;\r\n                  break;\r\n                case 6:\r\n                  this.selector = this.select6;\r\n                  break;\r\n                case 7:\r\n                  this.selector = this.select7;\r\n                  break;\r\n                default:\r\n                  this.selector = this.select1;\r\n                  break;\r\n              }\r\n\r\n              this.scanComps = this.scan.components;\r\n              this.quantTables = this.quantTable.quantTables;\r\n\r\n              for (i = 0; i < this.numComp; i += 1) {\r\n                compN = this.scanComps[i].scanCompSel;\r\n                this.qTab[i] =\r\n                  this.quantTables[this.components[compN].quantTableSel];\r\n                this.nBlock[i] =\r\n                  this.components[compN].vSamp * this.components[compN].hSamp;\r\n                this.dcTab[i] = this.HuffTab[this.scanComps[i].dcTabSel][0];\r\n                this.acTab[i] = this.HuffTab[this.scanComps[i].acTabSel][1];\r\n              }\r\n\r\n              this.xDim = this.frame.dimX;\r\n              this.yDim = this.frame.dimY;\r\n              if (this.numBytes == 1) {\r\n                this.outputData = new Uint8Array(\r\n                  new ArrayBuffer(\r\n                    this.xDim * this.yDim * this.numBytes * this.numComp\r\n                  )\r\n                );\r\n              } else {\r\n                this.outputData = new Uint16Array(\r\n                  new ArrayBuffer(\r\n                    this.xDim * this.yDim * this.numBytes * this.numComp\r\n                  )\r\n                );\r\n              }\r\n\r\n              scanNum += 1;\r\n\r\n              while (true) {\r\n                // Decode one scan\r\n                temp[0] = 0;\r\n                index[0] = 0;\r\n\r\n                for (i = 0; i < 10; i += 1) {\r\n                  pred[i] = 1 << (this.precision - 1);\r\n                }\r\n\r\n                if (this.restartInterval === 0) {\r\n                  current = this.decodeUnit(pred, temp, index);\r\n\r\n                  while (\r\n                    current === 0 &&\r\n                    this.xLoc < this.xDim &&\r\n                    this.yLoc < this.yDim\r\n                  ) {\r\n                    this.output(pred);\r\n                    current = this.decodeUnit(pred, temp, index);\r\n                  }\r\n\r\n                  break; //current=MARKER\r\n                }\r\n\r\n                for (mcuNum = 0; mcuNum < this.restartInterval; mcuNum += 1) {\r\n                  this.restarting = mcuNum == 0;\r\n                  current = this.decodeUnit(pred, temp, index);\r\n                  this.output(pred);\r\n\r\n                  if (current !== 0) {\r\n                    break;\r\n                  }\r\n                }\r\n\r\n                if (current === 0) {\r\n                  if (this.markerIndex !== 0) {\r\n                    current = 0xff00 | this.marker;\r\n                    this.markerIndex = 0;\r\n                  } else {\r\n                    current = this.stream.get16();\r\n                  }\r\n                }\r\n\r\n                if (\r\n                  !(\r\n                    current >= jpeg.lossless.Decoder.RESTART_MARKER_BEGIN &&\r\n                    current <= jpeg.lossless.Decoder.RESTART_MARKER_END\r\n                  )\r\n                ) {\r\n                  break; //current=MARKER\r\n                }\r\n              }\r\n\r\n              if (current === 0xffdc && scanNum === 1) {\r\n                //DNL\r\n                this.readNumber();\r\n                current = this.stream.get16();\r\n              }\r\n            } while (\r\n              current !== 0xffd9 &&\r\n              this.xLoc < this.xDim &&\r\n              this.yLoc < this.yDim &&\r\n              scanNum === 0\r\n            );\r\n\r\n            return this.outputData;\r\n          };\r\n          jpeg.lossless.Decoder.prototype.decodeUnit = function (\r\n            prev,\r\n            temp,\r\n            index\r\n          ) {\r\n            if (this.numComp == 1) {\r\n              return this.decodeSingle(prev, temp, index);\r\n            } else if (this.numComp == 3) {\r\n              return this.decodeRGB(prev, temp, index);\r\n            }\r\n\r\n            return -1;\r\n          };\r\n          jpeg.lossless.Decoder.prototype.select1 = function (compOffset) {\r\n            return this.getPreviousX(compOffset);\r\n          };\r\n          jpeg.lossless.Decoder.prototype.select2 = function (compOffset) {\r\n            return this.getPreviousY(compOffset);\r\n          };\r\n          jpeg.lossless.Decoder.prototype.select3 = function (compOffset) {\r\n            return this.getPreviousXY(compOffset);\r\n          };\r\n          jpeg.lossless.Decoder.prototype.select4 = function (compOffset) {\r\n            return (\r\n              this.getPreviousX(compOffset) +\r\n              this.getPreviousY(compOffset) -\r\n              this.getPreviousXY(compOffset)\r\n            );\r\n          };\r\n          jpeg.lossless.Decoder.prototype.select5 = function (compOffset) {\r\n            return (\r\n              this.getPreviousX(compOffset) +\r\n              ((this.getPreviousY(compOffset) -\r\n                this.getPreviousXY(compOffset)) >>\r\n                1)\r\n            );\r\n          };\r\n          jpeg.lossless.Decoder.prototype.select6 = function (compOffset) {\r\n            return (\r\n              this.getPreviousY(compOffset) +\r\n              ((this.getPreviousX(compOffset) -\r\n                this.getPreviousXY(compOffset)) >>\r\n                1)\r\n            );\r\n          };\r\n          jpeg.lossless.Decoder.prototype.select7 = function (compOffset) {\r\n            return (\r\n              (this.getPreviousX(compOffset) + this.getPreviousY(compOffset)) /\r\n              2\r\n            );\r\n          };\r\n          jpeg.lossless.Decoder.prototype.decodeRGB = function (\r\n            prev,\r\n            temp,\r\n            index\r\n          ) {\r\n            /*jslint bitwise: true */\r\n\r\n            var value, actab, dctab, qtab, ctrC, i, k, j;\r\n\r\n            prev[0] = this.selector(0);\r\n            prev[1] = this.selector(1);\r\n            prev[2] = this.selector(2);\r\n\r\n            for (ctrC = 0; ctrC < this.numComp; ctrC += 1) {\r\n              qtab = this.qTab[ctrC];\r\n              actab = this.acTab[ctrC];\r\n              dctab = this.dcTab[ctrC];\r\n              for (i = 0; i < this.nBlock[ctrC]; i += 1) {\r\n                for (k = 0; k < this.IDCT_Source.length; k += 1) {\r\n                  this.IDCT_Source[k] = 0;\r\n                }\r\n\r\n                value = this.getHuffmanValue(dctab, temp, index);\r\n\r\n                if (value >= 0xff00) {\r\n                  return value;\r\n                }\r\n\r\n                prev[ctrC] = this.IDCT_Source[0] =\r\n                  prev[ctrC] + this.getn(index, value, temp, index);\r\n                this.IDCT_Source[0] *= qtab[0];\r\n\r\n                for (j = 1; j < 64; j += 1) {\r\n                  value = this.getHuffmanValue(actab, temp, index);\r\n\r\n                  if (value >= 0xff00) {\r\n                    return value;\r\n                  }\r\n\r\n                  j += value >> 4;\r\n\r\n                  if ((value & 0x0f) === 0) {\r\n                    if (value >> 4 === 0) {\r\n                      break;\r\n                    }\r\n                  } else {\r\n                    this.IDCT_Source[jpeg.lossless.Decoder.IDCT_P[j]] =\r\n                      this.getn(index, value & 0x0f, temp, index) * qtab[j];\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            return 0;\r\n          };\r\n          jpeg.lossless.Decoder.prototype.decodeSingle = function (\r\n            prev,\r\n            temp,\r\n            index\r\n          ) {\r\n            /*jslint bitwise: true */\r\n\r\n            var value, i, n, nRestart;\r\n\r\n            if (this.restarting) {\r\n              this.restarting = false;\r\n              prev[0] = 1 << (this.frame.precision - 1);\r\n            } else {\r\n              prev[0] = this.selector();\r\n            }\r\n\r\n            for (i = 0; i < this.nBlock[0]; i += 1) {\r\n              value = this.getHuffmanValue(this.dcTab[0], temp, index);\r\n              if (value >= 0xff00) {\r\n                return value;\r\n              }\r\n\r\n              n = this.getn(prev, value, temp, index);\r\n              nRestart = n >> 8;\r\n\r\n              if (\r\n                nRestart >= jpeg.lossless.Decoder.RESTART_MARKER_BEGIN &&\r\n                nRestart <= jpeg.lossless.Decoder.RESTART_MARKER_END\r\n              ) {\r\n                return nRestart;\r\n              }\r\n\r\n              prev[0] += n;\r\n            }\r\n\r\n            return 0;\r\n          };\r\n          //  Huffman table for fast search: (HuffTab) 8-bit Look up table 2-layer search architecture, 1st-layer represent 256 node (8 bits) if codeword-length > 8\r\n          //  bits, then the entry of 1st-layer = (# of 2nd-layer table) | MSB and it is stored in the 2nd-layer Size of tables in each layer are 256.\r\n          //  HuffTab[*][*][0-256] is always the only 1st-layer table.\r\n          //\r\n          //  An entry can be: (1) (# of 2nd-layer table) | MSB , for code length > 8 in 1st-layer (2) (Code length) << 8 | HuffVal\r\n          //\r\n          //  HuffmanValue(table   HuffTab[x][y] (ex) HuffmanValue(HuffTab[1][0],...)\r\n          //                  ):\r\n          //      return: Huffman Value of table\r\n          //              0xFF?? if it receives a MARKER\r\n          //      Parameter:  table   HuffTab[x][y] (ex) HuffmanValue(HuffTab[1][0],...)\r\n          //                  temp    temp storage for remainded bits\r\n          //                  index   index to bit of temp\r\n          //                  in      FILE pointer\r\n          //      Effect:\r\n          //          temp  store new remainded bits\r\n          //          index change to new index\r\n          //          in    change to new position\r\n          //      NOTE:\r\n          //        Initial by   temp=0; index=0;\r\n          //      NOTE: (explain temp and index)\r\n          //        temp: is always in the form at calling time or returning time\r\n          //         |  byte 4  |  byte 3  |  byte 2  |  byte 1  |\r\n          //         |     0    |     0    | 00000000 | 00000??? |  if not a MARKER\r\n          //                                                 ^index=3 (from 0 to 15)\r\n          //                                                 321\r\n          //      NOTE (marker and marker_index):\r\n          //        If get a MARKER from 'in', marker=the low-byte of the MARKER\r\n          //          and marker_index=9\r\n          //        If marker_index=9 then index is always > 8, or HuffmanValue()\r\n          //          will not be called\r\n          jpeg.lossless.Decoder.prototype.getHuffmanValue = function (\r\n            table,\r\n            temp,\r\n            index\r\n          ) {\r\n            /*jslint bitwise: true */\r\n\r\n            var code, input, mask;\r\n\r\n            mask = 0xffff;\r\n\r\n            if (index[0] < 8) {\r\n              temp[0] <<= 8;\r\n              input = this.stream.get8();\r\n              if (input === 0xff) {\r\n                this.marker = this.stream.get8();\r\n                if (this.marker !== 0) {\r\n                  this.markerIndex = 9;\r\n                }\r\n              }\r\n              temp[0] |= input;\r\n            } else {\r\n              index[0] -= 8;\r\n            }\r\n\r\n            code = table[temp[0] >> index[0]];\r\n\r\n            if ((code & jpeg.lossless.Decoder.MSB) !== 0) {\r\n              if (this.markerIndex !== 0) {\r\n                this.markerIndex = 0;\r\n\r\n                return 0xff00 | this.marker;\r\n              }\r\n\r\n              temp[0] &= mask >> (16 - index[0]);\r\n              temp[0] <<= 8;\r\n              input = this.stream.get8();\r\n\r\n              if (input === 0xff) {\r\n                this.marker = this.stream.get8();\r\n                if (this.marker !== 0) {\r\n                  this.markerIndex = 9;\r\n                }\r\n              }\r\n\r\n              temp[0] |= input;\r\n              code = table[(code & 0xff) * 256 + (temp[0] >> index[0])];\r\n              index[0] += 8;\r\n            }\r\n\r\n            index[0] += 8 - (code >> 8);\r\n\r\n            if (index[0] < 0) {\r\n              throw new Error(\r\n                `index=${index[0]} temp=${temp[0]} code=${code} in HuffmanValue()`\r\n              );\r\n            }\r\n\r\n            if (index[0] < this.markerIndex) {\r\n              this.markerIndex = 0;\r\n\r\n              return 0xff00 | this.marker;\r\n            }\r\n\r\n            temp[0] &= mask >> (16 - index[0]);\r\n\r\n            return code & 0xff;\r\n          };\r\n          jpeg.lossless.Decoder.prototype.getn = function (\r\n            PRED,\r\n            n,\r\n            temp,\r\n            index\r\n          ) {\r\n            /*jslint bitwise: true */\r\n\r\n            var result, one, n_one, mask, input;\r\n\r\n            one = 1;\r\n            n_one = -1;\r\n            mask = 0xffff;\r\n\r\n            if (n === 0) {\r\n              return 0;\r\n            }\r\n\r\n            if (n === 16) {\r\n              if (PRED[0] >= 0) {\r\n                return -32768;\r\n              }\r\n\r\n              return 32768;\r\n            }\r\n\r\n            index[0] -= n;\r\n\r\n            if (index[0] >= 0) {\r\n              if (index[0] < this.markerIndex && !this.isLastPixel()) {\r\n                // this was corrupting the last pixel in some cases\r\n                this.markerIndex = 0;\r\n\r\n                return (0xff00 | this.marker) << 8;\r\n              }\r\n\r\n              result = temp[0] >> index[0];\r\n              temp[0] &= mask >> (16 - index[0]);\r\n            } else {\r\n              temp[0] <<= 8;\r\n              input = this.stream.get8();\r\n\r\n              if (input === 0xff) {\r\n                this.marker = this.stream.get8();\r\n                if (this.marker !== 0) {\r\n                  this.markerIndex = 9;\r\n                }\r\n              }\r\n\r\n              temp[0] |= input;\r\n              index[0] += 8;\r\n\r\n              if (index[0] < 0) {\r\n                if (this.markerIndex !== 0) {\r\n                  this.markerIndex = 0;\r\n\r\n                  return (0xff00 | this.marker) << 8;\r\n                }\r\n\r\n                temp[0] <<= 8;\r\n                input = this.stream.get8();\r\n\r\n                if (input === 0xff) {\r\n                  this.marker = this.stream.get8();\r\n                  if (this.marker !== 0) {\r\n                    this.markerIndex = 9;\r\n                  }\r\n                }\r\n\r\n                temp[0] |= input;\r\n                index[0] += 8;\r\n              }\r\n\r\n              if (index[0] < 0) {\r\n                throw new Error(`index=${index[0]} in getn()`);\r\n              }\r\n\r\n              if (index[0] < this.markerIndex) {\r\n                this.markerIndex = 0;\r\n\r\n                return (0xff00 | this.marker) << 8;\r\n              }\r\n\r\n              result = temp[0] >> index[0];\r\n              temp[0] &= mask >> (16 - index[0]);\r\n            }\r\n\r\n            if (result < one << (n - 1)) {\r\n              result += (n_one << n) + 1;\r\n            }\r\n\r\n            return result;\r\n          };\r\n          jpeg.lossless.Decoder.prototype.getPreviousX = function (compOffset) {\r\n            /*jslint bitwise: true */\r\n\r\n            if (this.xLoc > 0) {\r\n              return this.getter(\r\n                this.yLoc * this.xDim + this.xLoc - 1,\r\n                compOffset\r\n              );\r\n            } else if (this.yLoc > 0) {\r\n              return this.getPreviousY(compOffset);\r\n            }\r\n\r\n            return 1 << (this.frame.precision - 1);\r\n          };\r\n\r\n          jpeg.lossless.Decoder.prototype.getPreviousXY = function (\r\n            compOffset\r\n          ) {\r\n            /*jslint bitwise: true */\r\n\r\n            if (this.xLoc > 0 && this.yLoc > 0) {\r\n              return this.getter(\r\n                (this.yLoc - 1) * this.xDim + this.xLoc - 1,\r\n                compOffset\r\n              );\r\n            }\r\n\r\n            return this.getPreviousY(compOffset);\r\n          };\r\n          jpeg.lossless.Decoder.prototype.getPreviousY = function (compOffset) {\r\n            /*jslint bitwise: true */\r\n\r\n            if (this.yLoc > 0) {\r\n              return this.getter(\r\n                (this.yLoc - 1) * this.xDim + this.xLoc,\r\n                compOffset\r\n              );\r\n            }\r\n\r\n            return this.getPreviousX(compOffset);\r\n          };\r\n          jpeg.lossless.Decoder.prototype.isLastPixel = function () {\r\n            return this.xLoc === this.xDim - 1 && this.yLoc === this.yDim - 1;\r\n          };\r\n          jpeg.lossless.Decoder.prototype.outputSingle = function (PRED) {\r\n            if (this.xLoc < this.xDim && this.yLoc < this.yDim) {\r\n              this.setter(\r\n                this.yLoc * this.xDim + this.xLoc,\r\n                this.mask & PRED[0]\r\n              );\r\n\r\n              this.xLoc += 1;\r\n\r\n              if (this.xLoc >= this.xDim) {\r\n                this.yLoc += 1;\r\n                this.xLoc = 0;\r\n              }\r\n            }\r\n          };\r\n          jpeg.lossless.Decoder.prototype.outputRGB = function (PRED) {\r\n            var offset = this.yLoc * this.xDim + this.xLoc;\r\n\r\n            if (this.xLoc < this.xDim && this.yLoc < this.yDim) {\r\n              this.setter(offset, PRED[0], 0);\r\n              this.setter(offset, PRED[1], 1);\r\n              this.setter(offset, PRED[2], 2);\r\n\r\n              this.xLoc += 1;\r\n\r\n              if (this.xLoc >= this.xDim) {\r\n                this.yLoc += 1;\r\n                this.xLoc = 0;\r\n              }\r\n            }\r\n          };\r\n\r\n          jpeg.lossless.Decoder.prototype.setValue8 = function (index, val) {\r\n            this.outputData[index] = val;\r\n          };\r\n\r\n          jpeg.lossless.Decoder.prototype.getValue8 = function (index) {\r\n            return this.outputData[index]; // mask should not be necessary because outputData is either Int8Array or Int16Array\r\n          };\r\n\r\n          var littleEndian = (function () {\r\n            var buffer = new ArrayBuffer(2);\r\n\r\n            new DataView(buffer).setInt16(0, 256, true /* littleEndian */);\r\n            // Int16Array uses the platform's endianness.\r\n            return new Int16Array(buffer)[0] === 256;\r\n          })();\r\n\r\n          if (littleEndian) {\r\n            // just reading from an array is fine then. Int16Array will use platform endianness.\r\n            jpeg.lossless.Decoder.prototype.setValue16 =\r\n              jpeg.lossless.Decoder.prototype.setValue8;\r\n            jpeg.lossless.Decoder.prototype.getValue16 =\r\n              jpeg.lossless.Decoder.prototype.getValue8;\r\n          } else {\r\n            // If platform is big-endian, we will need to convert to little-endian\r\n            jpeg.lossless.Decoder.prototype.setValue16 = function (index, val) {\r\n              this.outputData[index] =\r\n                ((val & 0xff) << 8) | ((val >> 8) & 0xff);\r\n            };\r\n\r\n            jpeg.lossless.Decoder.prototype.getValue16 = function (index) {\r\n              var val = this.outputData[index];\r\n\r\n              return ((val & 0xff) << 8) | ((val >> 8) & 0xff);\r\n            };\r\n          }\r\n\r\n          jpeg.lossless.Decoder.prototype.setValueRGB = function (\r\n            index,\r\n            val,\r\n            compOffset\r\n          ) {\r\n            // this.outputData.setUint8(index * 3 + compOffset, val);\r\n            this.outputData[index * 3 + compOffset] = val;\r\n          };\r\n\r\n          jpeg.lossless.Decoder.prototype.getValueRGB = function (\r\n            index,\r\n            compOffset\r\n          ) {\r\n            // return this.outputData.getUint8(index * 3 + compOffset);\r\n            return this.outputData[index * 3 + compOffset];\r\n          };\r\n          jpeg.lossless.Decoder.prototype.readApp = function () {\r\n            var count = 0,\r\n              length = this.stream.get16();\r\n\r\n            count += 2;\r\n\r\n            while (count < length) {\r\n              this.stream.get8();\r\n              count += 1;\r\n            }\r\n\r\n            return length;\r\n          };\r\n          jpeg.lossless.Decoder.prototype.readComment = function () {\r\n            var sb = '',\r\n              count = 0,\r\n              length;\r\n\r\n            length = this.stream.get16();\r\n            count += 2;\r\n\r\n            while (count < length) {\r\n              sb += this.stream.get8();\r\n              count += 1;\r\n            }\r\n\r\n            return sb;\r\n          };\r\n          jpeg.lossless.Decoder.prototype.readNumber = function () {\r\n            var Ld = this.stream.get16();\r\n\r\n            if (Ld !== 4) {\r\n              throw new Error(\r\n                'ERROR: Define number format throw new IOException [Ld!=4]'\r\n              );\r\n            }\r\n\r\n            return this.stream.get16();\r\n          };\r\n          /*** Exports ***/\r\n\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg.lossless.Decoder;\r\n          }\r\n        },\r\n        {\r\n          './data-stream.js': 2,\r\n          './frame-header.js': 4,\r\n          './huffman-table.js': 5,\r\n          './quantization-table.js': 7,\r\n          './scan-header.js': 9,\r\n          './utils.js': 10,\r\n        },\r\n      ],\r\n      4: [\r\n        function (require, module, exports) {\r\n          /*\r\n           * Copyright (C) 2015 Michael Martinez\r\n           * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n           * warnings, split into multiple class files, and general clean up.\r\n           *\r\n           * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n           */\r\n\r\n          /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n          /*** Imports ***/\r\n          var jpeg = jpeg || {};\r\n\r\n          jpeg.lossless = jpeg.lossless || {};\r\n          jpeg.lossless.ComponentSpec =\r\n            jpeg.lossless.ComponentSpec ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./component-spec.js')\r\n              : null);\r\n          jpeg.lossless.DataStream =\r\n            jpeg.lossless.DataStream ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./data-stream.js')\r\n              : null);\r\n\r\n          /*** Constructor ***/\r\n          jpeg.lossless.FrameHeader =\r\n            jpeg.lossless.FrameHeader ||\r\n            function () {\r\n              this.components = []; // Components\r\n              this.dimX = 0; // Number of samples per line\r\n              this.dimY = 0; // Number of lines\r\n              this.numComp = 0; // Number of component in the frame\r\n              this.precision = 0; // Sample Precision (from the original image)\r\n            };\r\n          /*** Prototype Methods ***/\r\n\r\n          jpeg.lossless.FrameHeader.prototype.read = function (data) {\r\n            /*jslint bitwise: true */\r\n\r\n            var count = 0,\r\n              length,\r\n              i,\r\n              c,\r\n              temp;\r\n\r\n            length = data.get16();\r\n            count += 2;\r\n\r\n            this.precision = data.get8();\r\n            count += 1;\r\n\r\n            this.dimY = data.get16();\r\n            count += 2;\r\n\r\n            this.dimX = data.get16();\r\n            count += 2;\r\n\r\n            this.numComp = data.get8();\r\n            count += 1;\r\n            for (i = 1; i <= this.numComp; i += 1) {\r\n              if (count > length) {\r\n                throw new Error('ERROR: frame format error');\r\n              }\r\n\r\n              c = data.get8();\r\n              count += 1;\r\n\r\n              if (count >= length) {\r\n                throw new Error('ERROR: frame format error [c>=Lf]');\r\n              }\r\n\r\n              temp = data.get8();\r\n              count += 1;\r\n\r\n              if (!this.components[c]) {\r\n                this.components[c] = new jpeg.lossless.ComponentSpec();\r\n              }\r\n\r\n              this.components[c].hSamp = temp >> 4;\r\n              this.components[c].vSamp = temp & 0x0f;\r\n              this.components[c].quantTableSel = data.get8();\r\n              count += 1;\r\n            }\r\n\r\n            if (count !== length) {\r\n              throw new Error('ERROR: frame format error [Lf!=count]');\r\n            }\r\n\r\n            return 1;\r\n          };\r\n\r\n          /*** Exports ***/\r\n\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg.lossless.FrameHeader;\r\n          }\r\n        },\r\n        { './component-spec.js': 1, './data-stream.js': 2 },\r\n      ],\r\n      5: [\r\n        function (require, module, exports) {\r\n          /*\r\n           * Copyright (C) 2015 Michael Martinez\r\n           * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n           * warnings, split into multiple class files, and general clean up.\r\n           *\r\n           * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n           */\r\n\r\n          /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n\r\n          /*** Imports ***/\r\n          var jpeg = jpeg || {};\r\n\r\n          jpeg.lossless = jpeg.lossless || {};\r\n          jpeg.lossless.DataStream =\r\n            jpeg.lossless.DataStream ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./data-stream.js')\r\n              : null);\r\n          jpeg.lossless.Utils =\r\n            jpeg.lossless.Utils ||\r\n            (typeof require !== 'undefined' ? require('./utils.js') : null);\r\n\r\n          /*** Constructor ***/\r\n          jpeg.lossless.HuffmanTable =\r\n            jpeg.lossless.HuffmanTable ||\r\n            function () {\r\n              this.l = jpeg.lossless.Utils.createArray(4, 2, 16);\r\n              this.th = [];\r\n              this.v = jpeg.lossless.Utils.createArray(4, 2, 16, 200);\r\n              this.tc = jpeg.lossless.Utils.createArray(4, 2);\r\n\r\n              this.tc[0][0] = 0;\r\n              this.tc[1][0] = 0;\r\n              this.tc[2][0] = 0;\r\n              this.tc[3][0] = 0;\r\n              this.tc[0][1] = 0;\r\n              this.tc[1][1] = 0;\r\n              this.tc[2][1] = 0;\r\n              this.tc[3][1] = 0;\r\n              this.th[0] = 0;\r\n              this.th[1] = 0;\r\n              this.th[2] = 0;\r\n              this.th[3] = 0;\r\n            };\r\n          /*** Static Pseudo-constants ***/\r\n\r\n          jpeg.lossless.HuffmanTable.MSB = 0x80000000;\r\n\r\n          /*** Prototype Methods ***/\r\n\r\n          jpeg.lossless.HuffmanTable.prototype.read = function (data, HuffTab) {\r\n            /*jslint bitwise: true */\r\n\r\n            var count = 0,\r\n              length,\r\n              temp,\r\n              t,\r\n              c,\r\n              i,\r\n              j;\r\n\r\n            length = data.get16();\r\n            count += 2;\r\n\r\n            while (count < length) {\r\n              temp = data.get8();\r\n              count += 1;\r\n              t = temp & 0x0f;\r\n              if (t > 3) {\r\n                throw new Error('ERROR: Huffman table ID > 3');\r\n              }\r\n\r\n              c = temp >> 4;\r\n              if (c > 2) {\r\n                throw new Error('ERROR: Huffman table [Table class > 2 ]');\r\n              }\r\n\r\n              this.th[t] = 1;\r\n              this.tc[t][c] = 1;\r\n\r\n              for (i = 0; i < 16; i += 1) {\r\n                this.l[t][c][i] = data.get8();\r\n                count += 1;\r\n              }\r\n\r\n              for (i = 0; i < 16; i += 1) {\r\n                for (j = 0; j < this.l[t][c][i]; j += 1) {\r\n                  if (count > length) {\r\n                    throw new Error(\r\n                      'ERROR: Huffman table format error [count>Lh]'\r\n                    );\r\n                  }\r\n\r\n                  this.v[t][c][i][j] = data.get8();\r\n                  count += 1;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (count !== length) {\r\n              throw new Error('ERROR: Huffman table format error [count!=Lf]');\r\n            }\r\n\r\n            for (i = 0; i < 4; i += 1) {\r\n              for (j = 0; j < 2; j += 1) {\r\n                if (this.tc[i][j] !== 0) {\r\n                  this.buildHuffTable(\r\n                    HuffTab[i][j],\r\n                    this.l[i][j],\r\n                    this.v[i][j]\r\n                  );\r\n                }\r\n              }\r\n            }\r\n\r\n            return 1;\r\n          };\r\n          //  Build_HuffTab()\r\n          //  Parameter:  t       table ID\r\n          //              c       table class ( 0 for DC, 1 for AC )\r\n          //              L[i]    # of codewords which length is i\r\n          //              V[i][j] Huffman Value (length=i)\r\n          //  Effect:\r\n          //      build up HuffTab[t][c] using L and V.\r\n          jpeg.lossless.HuffmanTable.prototype.buildHuffTable = function (\r\n            tab,\r\n            L,\r\n            V\r\n          ) {\r\n            /*jslint bitwise: true */\r\n\r\n            var currentTable, temp, k, i, j, n;\r\n\r\n            temp = 256;\r\n            k = 0;\r\n\r\n            for (i = 0; i < 8; i += 1) {\r\n              // i+1 is Code length\r\n              for (j = 0; j < L[i]; j += 1) {\r\n                for (n = 0; n < temp >> (i + 1); n += 1) {\r\n                  tab[k] = V[i][j] | ((i + 1) << 8);\r\n                  k += 1;\r\n                }\r\n              }\r\n            }\r\n\r\n            for (i = 1; k < 256; i += 1, k += 1) {\r\n              tab[k] = i | jpeg.lossless.HuffmanTable.MSB;\r\n            }\r\n\r\n            currentTable = 1;\r\n            k = 0;\r\n\r\n            for (i = 8; i < 16; i += 1) {\r\n              // i+1 is Code length\r\n              for (j = 0; j < L[i]; j += 1) {\r\n                for (n = 0; n < temp >> (i - 7); n += 1) {\r\n                  tab[currentTable * 256 + k] = V[i][j] | ((i + 1) << 8);\r\n                  k += 1;\r\n                }\r\n\r\n                if (k >= 256) {\r\n                  if (k > 256) {\r\n                    throw new Error('ERROR: Huffman table error(1)!');\r\n                  }\r\n\r\n                  k = 0;\r\n                  currentTable += 1;\r\n                }\r\n              }\r\n            }\r\n          };\r\n\r\n          /*** Exports ***/\r\n\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg.lossless.HuffmanTable;\r\n          }\r\n        },\r\n        { './data-stream.js': 2, './utils.js': 10 },\r\n      ],\r\n      6: [\r\n        function (require, module, exports) {\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n\r\n          /*** Imports ****/\r\n\r\n          /**\r\n           * jpeg\r\n           * @type {*|{}}\r\n           */\r\n          var jpeg = jpeg || {};\r\n\r\n          /**\r\n           * jpeg.lossless\r\n           * @type {*|{}}\r\n           */\r\n          jpeg.lossless = jpeg.lossless || {};\r\n\r\n          jpeg.lossless.ComponentSpec =\r\n            jpeg.lossless.ComponentSpec ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./component-spec.js')\r\n              : null);\r\n          jpeg.lossless.DataStream =\r\n            jpeg.lossless.DataStream ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./data-stream.js')\r\n              : null);\r\n          jpeg.lossless.Decoder =\r\n            jpeg.lossless.Decoder ||\r\n            (typeof require !== 'undefined' ? require('./decoder.js') : null);\r\n          jpeg.lossless.FrameHeader =\r\n            jpeg.lossless.FrameHeader ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./frame-header.js')\r\n              : null);\r\n          jpeg.lossless.HuffmanTable =\r\n            jpeg.lossless.HuffmanTable ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./huffman-table.js')\r\n              : null);\r\n          jpeg.lossless.QuantizationTable =\r\n            jpeg.lossless.QuantizationTable ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./quantization-table.js')\r\n              : null);\r\n          jpeg.lossless.ScanComponent =\r\n            jpeg.lossless.ScanComponent ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./scan-component.js')\r\n              : null);\r\n          jpeg.lossless.ScanHeader =\r\n            jpeg.lossless.ScanHeader ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./scan-header.js')\r\n              : null);\r\n          jpeg.lossless.Utils =\r\n            jpeg.lossless.Utils ||\r\n            (typeof require !== 'undefined' ? require('./utils.js') : null);\r\n\r\n          /*** Exports ***/\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg;\r\n          }\r\n        },\r\n        {\r\n          './component-spec.js': 1,\r\n          './data-stream.js': 2,\r\n          './decoder.js': 3,\r\n          './frame-header.js': 4,\r\n          './huffman-table.js': 5,\r\n          './quantization-table.js': 7,\r\n          './scan-component.js': 8,\r\n          './scan-header.js': 9,\r\n          './utils.js': 10,\r\n        },\r\n      ],\r\n      7: [\r\n        function (require, module, exports) {\r\n          /*\r\n           * Copyright (C) 2015 Michael Martinez\r\n           * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n           * warnings, split into multiple class files, and general clean up.\r\n           *\r\n           * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n           */\r\n\r\n          /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n          /*** Imports ***/\r\n          var jpeg = jpeg || {};\r\n\r\n          jpeg.lossless = jpeg.lossless || {};\r\n          jpeg.lossless.DataStream =\r\n            jpeg.lossless.DataStream ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./data-stream.js')\r\n              : null);\r\n          jpeg.lossless.Utils =\r\n            jpeg.lossless.Utils ||\r\n            (typeof require !== 'undefined' ? require('./utils.js') : null);\r\n\r\n          /*** Constructor ***/\r\n          jpeg.lossless.QuantizationTable =\r\n            jpeg.lossless.QuantizationTable ||\r\n            function () {\r\n              this.precision = []; // Quantization precision 8 or 16\r\n              this.tq = []; // 1: this table is presented\r\n              this.quantTables = jpeg.lossless.Utils.createArray(4, 64); // Tables\r\n\r\n              this.tq[0] = 0;\r\n              this.tq[1] = 0;\r\n              this.tq[2] = 0;\r\n              this.tq[3] = 0;\r\n            };\r\n          /*** Static Methods ***/\r\n\r\n          jpeg.lossless.QuantizationTable.enhanceQuantizationTable = function (\r\n            qtab,\r\n            table\r\n          ) {\r\n            /*jslint bitwise: true */\r\n\r\n            var i;\r\n\r\n            for (i = 0; i < 8; i += 1) {\r\n              qtab[table[0 * 8 + i]] *= 90;\r\n              qtab[table[4 * 8 + i]] *= 90;\r\n              qtab[table[2 * 8 + i]] *= 118;\r\n              qtab[table[6 * 8 + i]] *= 49;\r\n              qtab[table[5 * 8 + i]] *= 71;\r\n              qtab[table[1 * 8 + i]] *= 126;\r\n              qtab[table[7 * 8 + i]] *= 25;\r\n              qtab[table[3 * 8 + i]] *= 106;\r\n            }\r\n\r\n            for (i = 0; i < 8; i += 1) {\r\n              qtab[table[0 + 8 * i]] *= 90;\r\n              qtab[table[4 + 8 * i]] *= 90;\r\n              qtab[table[2 + 8 * i]] *= 118;\r\n              qtab[table[6 + 8 * i]] *= 49;\r\n              qtab[table[5 + 8 * i]] *= 71;\r\n              qtab[table[1 + 8 * i]] *= 126;\r\n              qtab[table[7 + 8 * i]] *= 25;\r\n              qtab[table[3 + 8 * i]] *= 106;\r\n            }\r\n\r\n            for (i = 0; i < 64; i += 1) {\r\n              qtab[i] >>= 6;\r\n            }\r\n          };\r\n\r\n          /*** Prototype Methods ***/\r\n\r\n          jpeg.lossless.QuantizationTable.prototype.read = function (\r\n            data,\r\n            table\r\n          ) {\r\n            /*jslint bitwise: true */\r\n\r\n            var count = 0,\r\n              length,\r\n              temp,\r\n              t,\r\n              i;\r\n\r\n            length = data.get16();\r\n            count += 2;\r\n\r\n            while (count < length) {\r\n              temp = data.get8();\r\n              count += 1;\r\n              t = temp & 0x0f;\r\n\r\n              if (t > 3) {\r\n                throw new Error('ERROR: Quantization table ID > 3');\r\n              }\r\n\r\n              this.precision[t] = temp >> 4;\r\n\r\n              if (this.precision[t] === 0) {\r\n                this.precision[t] = 8;\r\n              } else if (this.precision[t] === 1) {\r\n                this.precision[t] = 16;\r\n              } else {\r\n                throw new Error('ERROR: Quantization table precision error');\r\n              }\r\n\r\n              this.tq[t] = 1;\r\n\r\n              if (this.precision[t] === 8) {\r\n                for (i = 0; i < 64; i += 1) {\r\n                  if (count > length) {\r\n                    throw new Error('ERROR: Quantization table format error');\r\n                  }\r\n\r\n                  this.quantTables[t][i] = data.get8();\r\n                  count += 1;\r\n                }\r\n\r\n                jpeg.lossless.QuantizationTable.enhanceQuantizationTable(\r\n                  this.quantTables[t],\r\n                  table\r\n                );\r\n              } else {\r\n                for (i = 0; i < 64; i += 1) {\r\n                  if (count > length) {\r\n                    throw new Error('ERROR: Quantization table format error');\r\n                  }\r\n\r\n                  this.quantTables[t][i] = data.get16();\r\n                  count += 2;\r\n                }\r\n\r\n                jpeg.lossless.QuantizationTable.enhanceQuantizationTable(\r\n                  this.quantTables[t],\r\n                  table\r\n                );\r\n              }\r\n            }\r\n\r\n            if (count !== length) {\r\n              throw new Error('ERROR: Quantization table error [count!=Lq]');\r\n            }\r\n\r\n            return 1;\r\n          };\r\n          /*** Exports ***/\r\n\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg.lossless.QuantizationTable;\r\n          }\r\n        },\r\n        { './data-stream.js': 2, './utils.js': 10 },\r\n      ],\r\n      8: [\r\n        function (require, module, exports) {\r\n          /*\r\n           * Copyright (C) 2015 Michael Martinez\r\n           * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n           * warnings, split into multiple class files, and general clean up.\r\n           *\r\n           * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n           */\r\n\r\n          /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n          /*** Imports ***/\r\n          var jpeg = jpeg || {};\r\n\r\n          jpeg.lossless = jpeg.lossless || {};\r\n\r\n          /*** Constructor ***/\r\n          jpeg.lossless.ScanComponent =\r\n            jpeg.lossless.ScanComponent ||\r\n            function () {\r\n              this.acTabSel = 0; // AC table selector\r\n              this.dcTabSel = 0; // DC table selector\r\n              this.scanCompSel = 0; // Scan component selector\r\n            };\r\n          /*** Exports ***/\r\n\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg.lossless.ScanComponent;\r\n          }\r\n        },\r\n        {},\r\n      ],\r\n      9: [\r\n        function (require, module, exports) {\r\n          /*\r\n           * Copyright (C) 2015 Michael Martinez\r\n           * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n           * warnings, split into multiple class files, and general clean up.\r\n           *\r\n           * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n           */\r\n\r\n          /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n          /*** Imports ***/\r\n          var jpeg = jpeg || {};\r\n\r\n          jpeg.lossless = jpeg.lossless || {};\r\n          jpeg.lossless.DataStream =\r\n            jpeg.lossless.DataStream ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./data-stream.js')\r\n              : null);\r\n          jpeg.lossless.ScanComponent =\r\n            jpeg.lossless.ScanComponent ||\r\n            (typeof require !== 'undefined'\r\n              ? require('./scan-component.js')\r\n              : null);\r\n\r\n          /*** Constructor ***/\r\n          jpeg.lossless.ScanHeader =\r\n            jpeg.lossless.ScanHeader ||\r\n            function () {\r\n              this.ah = 0;\r\n              this.al = 0;\r\n              this.numComp = 0; // Number of components in the scan\r\n              this.selection = 0; // Start of spectral or predictor selection\r\n              this.spectralEnd = 0; // End of spectral selection\r\n              this.components = [];\r\n            };\r\n\r\n          /*** Prototype Methods ***/\r\n\r\n          jpeg.lossless.ScanHeader.prototype.read = function (data) {\r\n            /*jslint bitwise: true */\r\n\r\n            var count = 0,\r\n              length,\r\n              i,\r\n              temp;\r\n\r\n            length = data.get16();\r\n            count += 2;\r\n\r\n            this.numComp = data.get8();\r\n            count += 1;\r\n\r\n            for (i = 0; i < this.numComp; i += 1) {\r\n              this.components[i] = new jpeg.lossless.ScanComponent();\r\n\r\n              if (count > length) {\r\n                throw new Error('ERROR: scan header format error');\r\n              }\r\n\r\n              this.components[i].scanCompSel = data.get8();\r\n              count += 1;\r\n\r\n              temp = data.get8();\r\n              count += 1;\r\n\r\n              this.components[i].dcTabSel = temp >> 4;\r\n              this.components[i].acTabSel = temp & 0x0f;\r\n            }\r\n\r\n            this.selection = data.get8();\r\n            count += 1;\r\n\r\n            this.spectralEnd = data.get8();\r\n            count += 1;\r\n\r\n            temp = data.get8();\r\n            this.ah = temp >> 4;\r\n            this.al = temp & 0x0f;\r\n            count += 1;\r\n\r\n            if (count !== length) {\r\n              throw new Error('ERROR: scan header format error [count!=Ns]');\r\n            }\r\n\r\n            return 1;\r\n          };\r\n          /*** Exports ***/\r\n\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg.lossless.ScanHeader;\r\n          }\r\n        },\r\n        { './data-stream.js': 2, './scan-component.js': 8 },\r\n      ],\r\n      10: [\r\n        function (require, module, exports) {\r\n          /*\r\n           * Copyright (C) 2015 Michael Martinez\r\n           * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n           * warnings, split into multiple class files, and general clean up.\r\n           *\r\n           * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n           */\r\n\r\n          /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n          /*jslint browser: true, node: true */\r\n          /*global require, module */\r\n          /*** Imports ***/\r\n          var jpeg = jpeg || {};\r\n\r\n          jpeg.lossless = jpeg.lossless || {};\r\n\r\n          /*** Constructor ***/\r\n          jpeg.lossless.Utils = jpeg.lossless.Utils || {};\r\n\r\n          /*** Static methods ***/\r\n\r\n          // http://stackoverflow.com/questions/966225/how-can-i-create-a-two-dimensional-array-in-javascript\r\n          jpeg.lossless.Utils.createArray = function (length) {\r\n            var arr = new Array(length || 0),\r\n              i = length;\r\n\r\n            if (arguments.length > 1) {\r\n              var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n              while (i--) {\r\n                arr[length - 1 - i] = jpeg.lossless.Utils.createArray.apply(\r\n                  this,\r\n                  args\r\n                );\r\n              }\r\n            }\r\n\r\n            return arr;\r\n          };\r\n\r\n          // http://stackoverflow.com/questions/18638900/javascript-crc32\r\n          jpeg.lossless.Utils.makeCRCTable = function () {\r\n            var c;\r\n            var crcTable = [];\r\n\r\n            for (var n = 0; n < 256; n++) {\r\n              c = n;\r\n              for (var k = 0; k < 8; k++) {\r\n                c = c & 1 ? 0xedb88320 ^ (c >>> 1) : c >>> 1;\r\n              }\r\n              crcTable[n] = c;\r\n            }\r\n\r\n            return crcTable;\r\n          };\r\n\r\n          jpeg.lossless.Utils.crc32 = function (dataView) {\r\n            var uint8view = new Uint8Array(dataView.buffer);\r\n            var crcTable =\r\n              jpeg.lossless.Utils.crcTable ||\r\n              (jpeg.lossless.Utils.crcTable =\r\n                jpeg.lossless.Utils.makeCRCTable());\r\n            var crc = 0 ^ -1;\r\n\r\n            for (var i = 0; i < uint8view.length; i++) {\r\n              crc = (crc >>> 8) ^ crcTable[(crc ^ uint8view[i]) & 0xff];\r\n            }\r\n\r\n            return (crc ^ -1) >>> 0;\r\n          };\r\n\r\n          /*** Exports ***/\r\n\r\n          var moduleType = typeof module;\r\n\r\n          if (moduleType !== 'undefined' && module.exports) {\r\n            module.exports = jpeg.lossless.Utils;\r\n          }\r\n        },\r\n        {},\r\n      ],\r\n    },\r\n    {},\r\n    [6]\r\n  )(6);\r\n});\r\n"],"names":["f","exports","module","define","amd","window","global","self","this","jpeg","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","lossless","ComponentSpec","hSamp","quantTableSel","vSamp","DataStream","data","offset","buffer","Uint8Array","index","prototype","get16","value","get8","HuffmanTable","QuantizationTable","ScanHeader","FrameHeader","Utils","Decoder","numBytes","frame","huffTable","quantTable","scan","DU","createArray","HuffTab","IDCT_Source","nBlock","acTab","dcTab","qTab","marker","markerIndex","numComp","restartInterval","selection","xDim","yDim","xLoc","yLoc","outputData","restarting","mask","IDCT_P","TABLE","MAX_HUFFMAN_SUBTREE","MSB","RESTART_MARKER_BEGIN","RESTART_MARKER_END","decompress","decode","current","compN","mcuNum","scanNum","pred","temp","stream","read","readNumber","readApp","readComment","precision","components","parseInt","Math","ceil","getter","getValueRGB","setter","setValueRGB","output","outputRGB","getValue8","setValue8","outputSingle","getValue16","setValue16","selector","select2","select3","select4","select5","select6","select7","select1","scanComps","quantTables","scanCompSel","dcTabSel","acTabSel","dimX","dimY","ArrayBuffer","Uint16Array","decodeUnit","prev","decodeSingle","decodeRGB","compOffset","getPreviousX","getPreviousY","getPreviousXY","actab","dctab","qtab","ctrC","k","j","getHuffmanValue","getn","nRestart","table","input","PRED","result","isLastPixel","val","DataView","setInt16","Int16Array","count","sb","c","th","v","tc","buildHuffTable","tab","L","V","currentTable","ScanComponent","tq","enhanceQuantizationTable","ah","al","spectralEnd","arr","Array","arguments","args","slice","apply","makeCRCTable","crcTable","crc32","dataView","uint8view","crc"],"sourceRoot":""}