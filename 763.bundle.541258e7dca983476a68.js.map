{"version":3,"file":"763.bundle.541258e7dca983476a68.js","mappings":"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","sources":["webpack:///../../../modes/longitudinal/src/id.js","webpack:///../../../modes/longitudinal/src/initToolGroups.js","webpack:///../../../modes/longitudinal/src/toolbarButtons.ts","webpack:///../../../modes/longitudinal/src/segmentationButtons.ts","webpack:///../../../modes/longitudinal/src/moreTools.ts","webpack:///../../../modes/longitudinal/src/index.ts","webpack:///../../../modes/longitudinal/src/customizations.tsx"],"sourcesContent":["import packageJson from '../package.json';\r\n\r\nconst id = packageJson.name;\r\n\r\nexport { id };\r\n","import { toolNames as SRToolNames } from '@ohif/extension-cornerstone-dicom-sr';\r\n\r\nconst colours = {\r\n  'viewport-0': 'rgb(200, 0, 0)',\r\n  'viewport-1': 'rgb(200, 200, 0)',\r\n  'viewport-2': 'rgb(0, 200, 0)',\r\n};\r\n\r\nconst colorsByOrientation = {\r\n  axial: 'rgb(200, 0, 0)',\r\n  sagittal: 'rgb(200, 200, 0)',\r\n  coronal: 'rgb(0, 200, 0)',\r\n};\r\n\r\nfunction initDefaultToolGroup(\r\n  extensionManager,\r\n  toolGroupService,\r\n  commandsManager,\r\n  toolGroupId,\r\n  modeLabelConfig\r\n) {\r\n  const utilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n\r\n  const { toolNames, Enums } = utilityModule.exports;\r\n\r\n  const tools = {\r\n    active: [\r\n      {\r\n        toolName: toolNames.WindowLevel,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\r\n      },\r\n      {\r\n        toolName: toolNames.Pan,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }],\r\n      },\r\n      {\r\n        toolName: toolNames.Zoom,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Secondary }],\r\n      },\r\n      {\r\n        toolName: toolNames.StackScroll,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Wheel }],\r\n      },\r\n    ],\r\n    passive: [\r\n      { toolName: toolNames.Length },\r\n      {\r\n        toolName: toolNames.ArrowAnnotate,\r\n        configuration: {\r\n          getTextCallback: (callback, eventDetails) => {\r\n            if (modeLabelConfig) {\r\n              callback(' ');\r\n            } else {\r\n              commandsManager.runCommand('arrowTextCallback', {\r\n                callback,\r\n                eventDetails,\r\n              });\r\n            }\r\n          },\r\n          changeTextCallback: (data, eventDetails, callback) => {\r\n            if (modeLabelConfig === undefined) {\r\n              commandsManager.runCommand('arrowTextCallback', {\r\n                callback,\r\n                data,\r\n                eventDetails,\r\n              });\r\n            }\r\n          },\r\n        },\r\n      },\r\n      { toolName: toolNames.Bidirectional },\r\n      { toolName: toolNames.DragProbe },\r\n      { toolName: toolNames.Probe },\r\n      { toolName: toolNames.EllipticalROI },\r\n      { toolName: toolNames.CircleROI },\r\n      { toolName: toolNames.RectangleROI },\r\n      { toolName: toolNames.StackScroll },\r\n      { toolName: toolNames.Angle },\r\n      { toolName: toolNames.CobbAngle },\r\n      { toolName: toolNames.Magnify },\r\n      { toolName: toolNames.CalibrationLine },\r\n      { toolName: toolNames.Disease },\r\n      {\r\n        toolName: toolNames.PlanarFreehandContourSegmentation,\r\n        configuration: {\r\n          displayOnePointAsCrosshairs: true,\r\n        },\r\n      },\r\n      { toolName: toolNames.UltrasoundDirectional },\r\n      { toolName: toolNames.PlanarFreehandROI },\r\n      { toolName: toolNames.SplineROI },\r\n      { toolName: toolNames.LivewireContour },\r\n      { toolName: toolNames.WindowLevelRegion },\r\n    ],\r\n    enabled: [\r\n      { toolName: toolNames.ImageOverlayViewer },\r\n      { toolName: toolNames.ReferenceLines },\r\n      {\r\n        toolName: SRToolNames.SRSCOORD3DPoint,\r\n      },\r\n    ],\r\n    disabled: [\r\n      {\r\n        toolName: toolNames.AdvancedMagnify,\r\n      },\r\n    ],\r\n  };\r\n\r\n  toolGroupService.createToolGroupAndAddTools(toolGroupId, tools);\r\n}\r\n\r\nfunction initSRToolGroup(extensionManager, toolGroupService) {\r\n  const SRUtilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone-dicom-sr.utilityModule.tools'\r\n  );\r\n\r\n  if (!SRUtilityModule) {\r\n    return;\r\n  }\r\n\r\n  const CS3DUtilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n\r\n  const { toolNames: SRToolNames } = SRUtilityModule.exports;\r\n  const { toolNames, Enums } = CS3DUtilityModule.exports;\r\n  const tools = {\r\n    active: [\r\n      {\r\n        toolName: toolNames.WindowLevel,\r\n        bindings: [\r\n          {\r\n            mouseButton: Enums.MouseBindings.Primary,\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        toolName: toolNames.Pan,\r\n        bindings: [\r\n          {\r\n            mouseButton: Enums.MouseBindings.Auxiliary,\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        toolName: toolNames.Zoom,\r\n        bindings: [\r\n          {\r\n            mouseButton: Enums.MouseBindings.Secondary,\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        toolName: toolNames.StackScroll,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Wheel }],\r\n      },\r\n    ],\r\n    passive: [\r\n      { toolName: SRToolNames.SRLength },\r\n      { toolName: SRToolNames.SRArrowAnnotate },\r\n      { toolName: SRToolNames.SRBidirectional },\r\n      { toolName: SRToolNames.SREllipticalROI },\r\n      { toolName: SRToolNames.SRCircleROI },\r\n      { toolName: SRToolNames.SRPlanarFreehandROI },\r\n      { toolName: SRToolNames.SRRectangleROI },\r\n      { toolName: toolNames.WindowLevelRegion },\r\n    ],\r\n    enabled: [\r\n      {\r\n        toolName: SRToolNames.DICOMSRDisplay,\r\n      },\r\n    ],\r\n    // disabled\r\n  };\r\n\r\n  const toolGroupId = 'SRToolGroup';\r\n  toolGroupService.createToolGroupAndAddTools(toolGroupId, tools);\r\n}\r\n\r\nfunction initMPRToolGroup(extensionManager, toolGroupService, commandsManager, modeLabelConfig) {\r\n  const utilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n\r\n  const serviceManager = extensionManager._servicesManager;\r\n  const { cornerstoneViewportService } = serviceManager.services;\r\n\r\n  const { toolNames, Enums } = utilityModule.exports;\r\n\r\n  const tools = {\r\n    active: [\r\n      {\r\n        toolName: toolNames.WindowLevel,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\r\n      },\r\n      {\r\n        toolName: toolNames.Pan,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }],\r\n      },\r\n      {\r\n        toolName: toolNames.Zoom,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Secondary }],\r\n      },\r\n      {\r\n        toolName: toolNames.StackScroll,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Wheel }],\r\n      },\r\n    ],\r\n    passive: [\r\n      { toolName: toolNames.Length },\r\n      {\r\n        toolName: toolNames.ArrowAnnotate,\r\n        configuration: {\r\n          getTextCallback: (callback, eventDetails) => {\r\n            if (modeLabelConfig) {\r\n              callback('');\r\n            } else {\r\n              commandsManager.runCommand('arrowTextCallback', {\r\n                callback,\r\n                eventDetails,\r\n              });\r\n            }\r\n          },\r\n          changeTextCallback: (data, eventDetails, callback) => {\r\n            if (modeLabelConfig === undefined) {\r\n              commandsManager.runCommand('arrowTextCallback', {\r\n                callback,\r\n                data,\r\n                eventDetails,\r\n              });\r\n            }\r\n          },\r\n        },\r\n      },\r\n      { toolName: toolNames.Bidirectional },\r\n      { toolName: toolNames.DragProbe },\r\n      { toolName: toolNames.Probe },\r\n      { toolName: toolNames.EllipticalROI },\r\n      { toolName: toolNames.CircleROI },\r\n      { toolName: toolNames.RectangleROI },\r\n      { toolName: toolNames.StackScroll },\r\n      { toolName: toolNames.Angle },\r\n      { toolName: toolNames.CobbAngle },\r\n      { toolName: toolNames.PlanarFreehandROI },\r\n      { toolName: toolNames.Brush },\r\n      { toolName: toolNames.RectangleScissors },\r\n      { toolName: toolNames.CircleScissors },\r\n      { toolName: toolNames.SphereScissors },\r\n      { toolName: toolNames.RectangleROIThreshold },\r\n      { toolName: toolNames.PaintFill },\r\n      { toolName: toolNames.RectangleROIStartEndThreshold },\r\n      { toolName: toolNames.WindowLevelRegion },\r\n      {\r\n        toolName: toolNames.PlanarFreehandContourSegmentation,\r\n        configuration: {\r\n          displayOnePointAsCrosshairs: true,\r\n        },\r\n      },\r\n      {\r\n        toolName: 'CircularBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'FILL_INSIDE_CIRCLE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'CircularEraser',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'ERASE_INSIDE_CIRCLE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'SphereBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'FILL_INSIDE_SPHERE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'SphereEraser',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'ERASE_INSIDE_SPHERE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'ThresholdCircularBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'ThresholdSphereBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_SPHERE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'ThresholdCircularBrushDynamic',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\r\n          // preview: {\r\n          //   enabled: true,\r\n          // },\r\n          strategySpecificConfiguration: {\r\n            // to use the use the center segment index to determine\r\n            // if inside -> same segment, if outside -> eraser\r\n            // useCenterSegmentIndex: true,\r\n            THRESHOLD: {\r\n              isDynamic: true,\r\n              dynamicRadius: 3,\r\n            },\r\n          },\r\n        },\r\n      },\r\n      { toolName: toolNames.Magnify },\r\n      { toolName: toolNames.UltrasoundDirectional },\r\n    ],\r\n    disabled: [\r\n      {\r\n        toolName: toolNames.Crosshairs,\r\n        configuration: {\r\n          viewportIndicators: true,\r\n          viewportIndicatorsConfig: {\r\n            circleRadius: 5,\r\n            xOffset: 0.95,\r\n            yOffset: 0.05,\r\n          },\r\n          disableOnPassive: true,\r\n          autoPan: {\r\n            enabled: false,\r\n            panSize: 10,\r\n          },\r\n          getReferenceLineColor: viewportId => {\r\n            const viewportInfo = cornerstoneViewportService.getViewportInfo(viewportId);\r\n            const viewportOptions = viewportInfo?.viewportOptions;\r\n            if (viewportOptions) {\r\n              return (\r\n                colours[viewportOptions.id] ||\r\n                colorsByOrientation[viewportOptions.orientation] ||\r\n                '#0c0'\r\n              );\r\n            } else {\r\n              console.warn('missing viewport?', viewportId);\r\n              return '#0c0';\r\n            }\r\n          },\r\n        },\r\n      },\r\n      {\r\n        toolName: toolNames.AdvancedMagnify,\r\n      },\r\n      { toolName: toolNames.ReferenceLines },\r\n    ],\r\n  };\r\n\r\n  toolGroupService.createToolGroupAndAddTools('mpr', tools);\r\n}\r\nfunction initVolume3DToolGroup(extensionManager, toolGroupService) {\r\n  const utilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n\r\n  const { toolNames, Enums } = utilityModule.exports;\r\n\r\n  const tools = {\r\n    active: [\r\n      {\r\n        toolName: toolNames.TrackballRotateTool,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\r\n      },\r\n      {\r\n        toolName: toolNames.Zoom,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Secondary }],\r\n      },\r\n      {\r\n        toolName: toolNames.Pan,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }],\r\n      },\r\n    ],\r\n  };\r\n\r\n  toolGroupService.createToolGroupAndAddTools('volume3d', tools);\r\n}\r\n\r\nfunction initToolGroups(extensionManager, toolGroupService, commandsManager, modeLabelConfig) {\r\n  initDefaultToolGroup(\r\n    extensionManager,\r\n    toolGroupService,\r\n    commandsManager,\r\n    'default',\r\n    modeLabelConfig\r\n  );\r\n  initSRToolGroup(extensionManager, toolGroupService, commandsManager);\r\n  initMPRToolGroup(extensionManager, toolGroupService, commandsManager, modeLabelConfig);\r\n  initVolume3DToolGroup(extensionManager, toolGroupService);\r\n}\r\n\r\nexport default initToolGroups;\r\n","// TODO: torn, can either bake this here; or have to create a whole new button type\r\n// Only ways that you can pass in a custom React component for render :l\r\nimport { WindowLevelMenuItem } from '@ohif/ui';\r\nimport { defaults, ToolbarService } from '@ohif/core';\r\nimport type { Button } from '@ohif/core/types';\r\n\r\nconst { windowLevelPresets } = defaults;\r\nconst { createButton } = ToolbarService;\r\n\r\nfunction _createColormap(label, colormap) {\r\n  return {\r\n    id: label.toString(),\r\n    title: label,\r\n    subtitle: label,\r\n    type: 'action',\r\n    commands: [\r\n      {\r\n        commandName: 'setAllViewportsColorMap',\r\n        commandOptions: {\r\n          ...windowLevelPresets[1],\r\n        },\r\n      },\r\n      {\r\n        commandName: 'setAllViewportsColorMap',\r\n        commandOptions: {\r\n          ...windowLevelPresets[1],\r\n        },\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\nexport const setToolActiveToolbar = {\r\n  commandName: 'setToolActiveToolbar',\r\n  commandOptions: {\r\n    toolGroupIds: ['default', 'mpr', 'SRToolGroup', 'volume3d'],\r\n  },\r\n};\r\n\r\nconst toolbarButtons: Button[] = [\r\n  {\r\n    id: 'MeasurementTools',\r\n    uiType: 'ohif.splitButton',\r\n    props: {\r\n      groupId: 'MeasurementTools',\r\n      // group evaluate to determine which item should move to the top\r\n      evaluate: 'evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList',\r\n      primary: createButton({\r\n        id: 'Length',\r\n        icon: 'tool-length',\r\n        label: 'Length',\r\n        tooltip: 'Length Tool',\r\n        commands: setToolActiveToolbar,\r\n        evaluate: 'evaluate.cornerstoneTool',\r\n      }),\r\n      secondary: {\r\n        icon: 'chevron-down',\r\n        tooltip: 'More Measure Tools',\r\n      },\r\n      items: [\r\n        createButton({\r\n          id: 'Length',\r\n          icon: 'tool-length',\r\n          label: 'Length',\r\n          tooltip: 'Length Tool',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'Bidirectional',\r\n          icon: 'tool-bidirectional',\r\n          label: 'Bidirectional',\r\n          tooltip: 'Bidirectional Tool',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'ArrowAnnotate',\r\n          icon: 'tool-annotate',\r\n          label: 'Annotation',\r\n          tooltip: 'Arrow Annotate',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'EllipticalROI',\r\n          icon: 'tool-ellipse',\r\n          label: 'Ellipse',\r\n          tooltip: 'Ellipse ROI',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'RectangleROI',\r\n          icon: 'tool-rectangle',\r\n          label: 'Rectangle',\r\n          tooltip: 'Rectangle ROI',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'CircleROI',\r\n          icon: 'tool-circle',\r\n          label: 'Circle',\r\n          tooltip: 'Circle Tool',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'PlanarFreehandROI',\r\n          icon: 'icon-tool-freehand-roi',\r\n          label: 'Freehand ROI',\r\n          tooltip: 'Freehand ROI',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'SplineROI',\r\n          icon: 'icon-tool-spline-roi',\r\n          label: 'Spline ROI',\r\n          tooltip: 'Spline ROI',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'LivewireContour',\r\n          icon: 'icon-tool-livewire',\r\n          label: 'Livewire tool',\r\n          tooltip: 'Livewire tool',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Zoom',\r\n    uiType: 'ohif.radioGroup',\r\n    props: {\r\n      icon: 'tool-zoom',\r\n      label: 'Zoom',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  // Window Level\r\n  {\r\n    id: 'WindowLevel',\r\n    uiType: 'ohif.radioGroup',\r\n    props: {\r\n      icon: 'tool-window-level',\r\n      label: 'Window Level',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: [\r\n        'evaluate.cornerstoneTool',\r\n        {\r\n          name: 'evaluate.viewport.supported',\r\n          unsupportedViewportTypes: ['wholeSlide'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  // Pan...\r\n  {\r\n    id: 'Pan',\r\n    uiType: 'ohif.radioGroup',\r\n    props: {\r\n      type: 'tool',\r\n      icon: 'tool-move',\r\n      label: 'Pan',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'TrackballRotate',\r\n    uiType: 'ohif.radioGroup',\r\n    props: {\r\n      type: 'tool',\r\n      icon: 'tool-3d-rotate',\r\n      label: '3D Rotate',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: {\r\n        name: 'evaluate.cornerstoneTool',\r\n        disabledText: 'Select a 3D viewport to enable this tool',\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'Capture',\r\n    uiType: 'ohif.radioGroup',\r\n    props: {\r\n      icon: 'tool-capture',\r\n      label: 'Capture',\r\n      commands: 'showDownloadViewportModal',\r\n      evaluate: [\r\n        'evaluate.action',\r\n        {\r\n          name: 'evaluate.viewport.supported',\r\n          unsupportedViewportTypes: ['video', 'wholeSlide'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Layout',\r\n    uiType: 'ohif.layoutSelector',\r\n    props: {\r\n      rows: 3,\r\n      columns: 4,\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'MPR',\r\n    uiType: 'ohif.radioGroup',\r\n    props: {\r\n      icon: 'layout-advanced-3d-four-up-wediag',\r\n      label: 'MPR',\r\n      commands: 'mprView',\r\n      evaluate: ['evaluate.action', 'evaluate.notProcessing'],\r\n    },\r\n  },\r\n  {\r\n    id: 'Panoramic',\r\n    uiType: 'ohif.radioGroup',\r\n    props: {\r\n      icon: 'layout-advanced-panoramic',\r\n      label: 'Panoramic',\r\n      commands: 'panoramicView',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'Crosshairs',\r\n    uiType: 'ohif.radioGroup',\r\n    props: {\r\n      type: 'tool',\r\n      icon: 'tool-crosshair',\r\n      label: 'Crosshairs',\r\n      commands: {\r\n        commandName: 'setToolActiveToolbar',\r\n        commandOptions: {\r\n          toolGroupIds: ['mpr'],\r\n        },\r\n      },\r\n      evaluate: {\r\n        name: 'evaluate.cornerstoneTool',\r\n        disabledText: 'Select an MPR viewport to enable this tool',\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'fusionPTColormap',\r\n    uiType: 'ohif.splitButton',\r\n    props: {\r\n      groupId: 'fusionPTColormap',\r\n      evaluate: 'evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList',\r\n      primary: createButton({\r\n        id: 'fusionPTColormap',\r\n        icon: 'tool-fusion-color',\r\n        label: 'Fusion PT Colormap',\r\n        tooltip: 'Fusion PT Colormap',\r\n        commands: [],\r\n        evaluate: 'evaluate.cornerstoneTool',\r\n      }),\r\n      secondary: {\r\n        icon: 'chevron-down',\r\n        tooltip: 'PET Image Colormap',\r\n      },\r\n      isAction: true, // ?\r\n      renderer: WindowLevelMenuItem,\r\n      items: [\r\n        _createColormap('HSV', 'hsv'),\r\n        _createColormap('Hot Iron', 'hot_iron'),\r\n        _createColormap('S PET', 's_pet'),\r\n        _createColormap('Red Hot', 'red_hot'),\r\n        _createColormap('Perfusion', 'perfusion'),\r\n        _createColormap('Rainbow', 'rainbow_2'),\r\n        _createColormap('SUV', 'suv'),\r\n        _createColormap('GE 256', 'ge_256'),\r\n        _createColormap('GE', 'ge'),\r\n        _createColormap('Siemens', 'siemens'),\r\n      ],\r\n    },\r\n  },\r\n];\r\n\r\nexport default toolbarButtons;\r\n","import type { Button } from '@ohif/core/types';\r\n\r\nconst toolbarButtons: Button[] = [\r\n  {\r\n    id: 'BrushTools',\r\n    uiType: 'ohif.buttonGroup',\r\n    props: {\r\n      groupId: 'BrushTools',\r\n      items: [\r\n        {\r\n          id: 'Brush',\r\n          icon: 'icon-tool-brush',\r\n          label: 'Brush',\r\n          evaluate: {\r\n            name: 'evaluate.cornerstone.segmentation',\r\n            toolNames: ['CircularBrush', 'SphereBrush'],\r\n            disabledText: 'Create new segmentation to enable this tool.',\r\n          },\r\n          options: [\r\n            {\r\n              name: 'Radius (mm)',\r\n              id: 'brush-radius',\r\n              type: 'range',\r\n              min: 0.5,\r\n              max: 99.5,\r\n              step: 0.5,\r\n              value: 10,\r\n              commands: {\r\n                commandName: 'setBrushSize',\r\n                commandOptions: { toolNames: ['CircularBrush', 'SphereBrush'] },\r\n              },\r\n            },\r\n            {\r\n              name: 'Shape',\r\n              type: 'radio',\r\n              id: 'brush-mode',\r\n              value: 'SphereBrush',\r\n              values: [\r\n                { value: 'CircularBrush', label: 'Circle' },\r\n                { value: 'SphereBrush', label: 'Sphere' },\r\n              ],\r\n              commands: 'setToolActiveToolbar',\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          id: 'Eraser',\r\n          icon: 'icon-tool-eraser',\r\n          label: 'Eraser',\r\n          evaluate: {\r\n            name: 'evaluate.cornerstone.segmentation',\r\n            toolNames: ['CircularEraser', 'SphereEraser'],\r\n          },\r\n          options: [\r\n            {\r\n              name: 'Radius (mm)',\r\n              id: 'eraser-radius',\r\n              type: 'range',\r\n              min: 0.5,\r\n              max: 99.5,\r\n              step: 0.5,\r\n              value: 10,\r\n              commands: {\r\n                commandName: 'setBrushSize',\r\n                commandOptions: { toolNames: ['CircularEraser', 'SphereEraser'] },\r\n              },\r\n            },\r\n            {\r\n              name: 'Shape',\r\n              type: 'radio',\r\n              id: 'eraser-mode',\r\n              value: 'SphereEraser',\r\n              values: [\r\n                { value: 'CircularEraser', label: 'Circle' },\r\n                { value: 'SphereEraser', label: 'Sphere' },\r\n              ],\r\n              commands: 'setToolActiveToolbar',\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          id: 'Threshold',\r\n          icon: 'icon-tool-threshold',\r\n          label: 'Threshold',\r\n          evaluate: {\r\n            name: 'evaluate.cornerstone.segmentation',\r\n            toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\r\n          },\r\n          options: [\r\n            {\r\n              name: 'Radius (mm)',\r\n              id: 'threshold-radius',\r\n              type: 'range',\r\n              min: 0.5,\r\n              max: 99.5,\r\n              step: 0.5,\r\n              value: 10,\r\n              commands: {\r\n                commandName: 'setBrushSize',\r\n                commandOptions: {\r\n                  toolNames: [\r\n                    'ThresholdCircularBrush',\r\n                    'ThresholdSphereBrush',\r\n                    'ThresholdCircularBrushDynamic',\r\n                  ],\r\n                },\r\n              },\r\n            },\r\n            {\r\n              name: 'Threshold',\r\n              type: 'radio',\r\n              id: 'dynamic-mode',\r\n              value: 'ThresholdRange',\r\n              values: [\r\n                { value: 'ThresholdDynamic', label: 'Dynamic' },\r\n                { value: 'ThresholdRange', label: 'Range' },\r\n              ],\r\n              commands: ({ value, commandsManager, options }) => {\r\n                if (value === 'ThresholdDynamic') {\r\n                  commandsManager.run('setToolActive', {\r\n                    toolName: 'ThresholdCircularBrushDynamic',\r\n                  });\r\n\r\n                  return;\r\n                }\r\n\r\n                // check the condition of the threshold-range option\r\n                const thresholdRangeOption = options.find(\r\n                  option => option.id === 'threshold-shape'\r\n                );\r\n\r\n                commandsManager.run('setToolActiveToolbar', {\r\n                  toolName: thresholdRangeOption.value,\r\n                });\r\n              },\r\n            },\r\n            {\r\n              name: 'Shape',\r\n              type: 'radio',\r\n              id: 'threshold-shape',\r\n              value: 'ThresholdSphereBrush',\r\n              values: [\r\n                { value: 'ThresholdCircularBrush', label: 'Circle' },\r\n                { value: 'ThresholdSphereBrush', label: 'Sphere' },\r\n              ],\r\n              condition: ({ options }) =>\r\n                options.find(option => option.id === 'dynamic-mode').value === 'ThresholdRange',\r\n              commands: 'setToolActiveToolbar',\r\n            },\r\n            {\r\n              name: 'ThresholdRange',\r\n              type: 'double-range',\r\n              id: 'threshold-range',\r\n              min: -1000,\r\n              max: 1000,\r\n              step: 1,\r\n              value: [100, 600],\r\n              condition: ({ options }) =>\r\n                options.find(option => option.id === 'dynamic-mode').value === 'ThresholdRange',\r\n              commands: {\r\n                commandName: 'setThresholdRange',\r\n                commandOptions: {\r\n                  toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\r\n                  toolGroupIds: ['mpr'],\r\n                },\r\n              },\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          id: 'PaintFill',\r\n          icon: 'paint-fill',\r\n          label: 'Fill Holes',\r\n          commands: {\r\n            commandName: 'setToolActiveToolbar',\r\n          },\r\n          evaluate: {\r\n            name: 'evaluate.cornerstone.segmentation',\r\n            toolNames: ['PaintFill'],\r\n          },\r\n          options: [],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Edits',\r\n    uiType: 'ohif.buttonGroup',\r\n    props: {\r\n      groupId: 'Edits',\r\n      items: [\r\n        {\r\n          id: 'Undo',\r\n          icon: 'prev-arrow',\r\n          label: 'Undo',\r\n          commands: {\r\n            commandName: 'undo',\r\n          },\r\n          evaluate: 'evaluate.action',\r\n          options: [],\r\n        },\r\n        {\r\n          id: 'Redo',\r\n          icon: 'next-arrow',\r\n          label: 'Redo',\r\n          commands: {\r\n            commandName: 'redo',\r\n          },\r\n          evaluate: 'evaluate.action',\r\n          options: [],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Shapes',\r\n    uiType: 'ohif.radioGroup',\r\n    props: {\r\n      label: 'Shapes',\r\n      evaluate: {\r\n        name: 'evaluate.cornerstone.segmentation',\r\n        toolNames: ['CircleScissor', 'SphereScissor', 'RectangleScissor'],\r\n      },\r\n      icon: 'icon-tool-shape',\r\n      options: [\r\n        {\r\n          name: 'Shape',\r\n          type: 'radio',\r\n          value: 'SphereScissor',\r\n          id: 'shape-mode',\r\n          values: [\r\n            { value: 'CircleScissor', label: 'Circle' },\r\n            { value: 'SphereScissor', label: 'Sphere' },\r\n            { value: 'RectangleScissor', label: 'Rectangle' },\r\n          ],\r\n          commands: 'setToolActiveToolbar',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n];\r\n\r\nexport default toolbarButtons;\r\n","import type { RunCommand } from '@ohif/core/types';\r\nimport { EVENTS } from '@cornerstonejs/core';\r\nimport { ToolbarService, ViewportGridService } from '@ohif/core';\r\nimport { setToolActiveToolbar } from './toolbarButtons';\r\nconst { createButton } = ToolbarService;\r\n\r\nconst ReferenceLinesListeners: RunCommand = [\r\n  {\r\n    commandName: 'setSourceViewportForReferenceLinesTool',\r\n    context: 'CORNERSTONE',\r\n  },\r\n];\r\n\r\nconst moreTools = [\r\n  {\r\n    id: 'MoreTools',\r\n    uiType: 'ohif.splitButton',\r\n    props: {\r\n      groupId: 'MoreTools',\r\n      evaluate: 'evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList',\r\n      primary: createButton({\r\n        id: 'Reset',\r\n        icon: 'tool-reset',\r\n        tooltip: 'Reset View',\r\n        label: 'Reset',\r\n        commands: 'resetViewport',\r\n        evaluate: 'evaluate.action',\r\n      }),\r\n      secondary: {\r\n        icon: 'chevron-down',\r\n        label: '',\r\n        tooltip: 'More Tools',\r\n      },\r\n      items: [\r\n        createButton({\r\n          id: 'Reset',\r\n          icon: 'tool-reset',\r\n          label: 'Reset View',\r\n          tooltip: 'Reset View',\r\n          commands: 'resetViewport',\r\n          evaluate: 'evaluate.action',\r\n        }),\r\n        createButton({\r\n          id: 'rotate-right',\r\n          icon: 'tool-rotate-right',\r\n          label: 'Rotate Right',\r\n          tooltip: 'Rotate +90',\r\n          commands: 'rotateViewportCW',\r\n          evaluate: [\r\n            'evaluate.action',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'flipHorizontal',\r\n          icon: 'tool-flip-horizontal',\r\n          label: 'Flip Horizontal',\r\n          tooltip: 'Flip Horizontally',\r\n          commands: 'flipViewportHorizontal',\r\n          evaluate: [\r\n            'evaluate.viewportProperties.toggle',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video', 'volume3d'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'ImageSliceSync',\r\n          icon: 'link',\r\n          label: 'Image Slice Sync',\r\n          tooltip: 'Enable position synchronization on stack viewports',\r\n          commands: {\r\n            commandName: 'toggleSynchronizer',\r\n            commandOptions: {\r\n              type: 'imageSlice',\r\n            },\r\n          },\r\n          listeners: {\r\n            [EVENTS.VIEWPORT_NEW_IMAGE_SET]: {\r\n              commandName: 'toggleImageSliceSync',\r\n              commandOptions: { toggledState: true },\r\n            },\r\n          },\r\n          evaluate: [\r\n            'evaluate.cornerstone.synchronizer',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video', 'volume3d'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'ReferenceLines',\r\n          icon: 'tool-referenceLines',\r\n          label: 'Reference Lines',\r\n          tooltip: 'Show Reference Lines',\r\n          commands: 'toggleEnabledDisabledToolbar',\r\n          listeners: {\r\n            [ViewportGridService.EVENTS.ACTIVE_VIEWPORT_ID_CHANGED]: ReferenceLinesListeners,\r\n            [ViewportGridService.EVENTS.VIEWPORTS_READY]: ReferenceLinesListeners,\r\n          },\r\n          evaluate: [\r\n            'evaluate.cornerstoneTool.toggle',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'ImageOverlayViewer',\r\n          icon: 'toggle-dicom-overlay',\r\n          label: 'Image Overlay',\r\n          tooltip: 'Toggle Image Overlay',\r\n          commands: 'toggleEnabledDisabledToolbar',\r\n          evaluate: [\r\n            'evaluate.cornerstoneTool.toggle',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'StackScroll',\r\n          icon: 'tool-stack-scroll',\r\n          label: 'Stack Scroll',\r\n          tooltip: 'Stack Scroll',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'invert',\r\n          icon: 'tool-invert',\r\n          label: 'Invert',\r\n          tooltip: 'Invert Colors',\r\n          commands: 'invertViewport',\r\n          evaluate: [\r\n            'evaluate.viewportProperties.toggle',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'Probe',\r\n          icon: 'tool-probe',\r\n          label: 'Probe',\r\n          tooltip: 'Probe',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'Cine',\r\n          icon: 'tool-cine',\r\n          label: 'Cine',\r\n          tooltip: 'Cine',\r\n          commands: 'toggleCine',\r\n          evaluate: [\r\n            'evaluate.cine',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['volume3d'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'Angle',\r\n          icon: 'tool-angle',\r\n          label: 'Angle',\r\n          tooltip: 'Angle',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'CobbAngle',\r\n          icon: 'icon-tool-cobb-angle',\r\n          label: 'Cobb Angle',\r\n          tooltip: 'Cobb Angle',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: 'evaluate.cornerstoneTool',\r\n        }),\r\n        createButton({\r\n          id: 'Magnify',\r\n          icon: 'tool-magnify',\r\n          label: 'Zoom-in',\r\n          tooltip: 'Zoom-in',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: [\r\n            'evaluate.cornerstoneTool',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'CalibrationLine',\r\n          icon: 'tool-calibration',\r\n          label: 'Calibration',\r\n          tooltip: 'Calibration Line',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: [\r\n            'evaluate.cornerstoneTool',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'TagBrowser',\r\n          icon: 'dicom-tag-browser',\r\n          label: 'Dicom Tag Browser',\r\n          tooltip: 'Dicom Tag Browser',\r\n          commands: 'openDICOMTagViewer',\r\n        }),\r\n        createButton({\r\n          id: 'AdvancedMagnify',\r\n          icon: 'icon-tool-loupe',\r\n          label: 'Magnify Probe',\r\n          tooltip: 'Magnify Probe',\r\n          commands: 'toggleActiveDisabledToolbar',\r\n          evaluate: [\r\n            'evaluate.cornerstoneTool.toggle.ifStrictlyDisabled',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'UltrasoundDirectionalTool',\r\n          icon: 'icon-tool-ultrasound-bidirectional',\r\n          label: 'Ultrasound Directional',\r\n          tooltip: 'Ultrasound Directional',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: [\r\n            'evaluate.cornerstoneTool',\r\n            {\r\n              name: 'evaluate.modality.supported',\r\n              supportedModalities: ['US'],\r\n            },\r\n          ],\r\n        }),\r\n        createButton({\r\n          id: 'WindowLevelRegion',\r\n          icon: 'icon-tool-window-region',\r\n          label: 'Window Level Region',\r\n          tooltip: 'Window Level Region',\r\n          commands: setToolActiveToolbar,\r\n          evaluate: [\r\n            'evaluate.cornerstoneTool',\r\n            {\r\n              name: 'evaluate.viewport.supported',\r\n              unsupportedViewportTypes: ['video'],\r\n            },\r\n          ],\r\n        }),\r\n      ],\r\n    },\r\n  },\r\n];\r\n\r\nexport default moreTools;\r\n","import { hotkeys } from '@ohif/core';\r\nimport i18n from 'i18next';\r\nimport { id } from './id';\r\nimport initToolGroups from './initToolGroups';\r\nimport toolbarButtons from './toolbarButtons';\r\nimport segmentationButtons from './segmentationButtons';\r\nimport moreTools from './moreTools';\r\nimport { performCustomizations } from './customizations';\r\n\r\n// Allow this mode by excluding non-imaging modalities such as SR, SEG\r\n// Also, SM is not a simple imaging modalities, so exclude it.\r\nconst NON_IMAGE_MODALITIES = ['ECG', 'SEG', 'RTSTRUCT', 'RTPLAN', 'PR'];\r\n\r\nconst ohif = {\r\n  layout: '@ohif/extension-default.layoutTemplateModule.viewerLayout',\r\n  sopClassHandler: '@ohif/extension-default.sopClassHandlerModule.stack',\r\n  thumbnailList: '@ohif/extension-default.panelModule.seriesList',\r\n  wsiSopClassHandler:\r\n    '@ohif/extension-cornerstone.sopClassHandlerModule.DicomMicroscopySopClassHandler',\r\n  volumeEditionPanel: '@ohif/extension-default.panelModule.volumeEditionPanel',\r\n  panoramicPanel: '@ohif/extension-default.panelModule.panoramicGenerationPanel',\r\n};\r\n\r\nconst cornerstone = {\r\n  measurements: '@ohif/extension-cornerstone.panelModule.panelMeasurement',\r\n  segmentation: '@ohif/extension-cornerstone.panelModule.panelSegmentationWithTools',\r\n};\r\n\r\nconst tracked = {\r\n  measurements: '@ohif/extension-measurement-tracking.panelModule.trackedMeasurements',\r\n  thumbnailList: '@ohif/extension-measurement-tracking.panelModule.seriesList',\r\n  viewport: '@ohif/extension-measurement-tracking.viewportModule.cornerstone-tracked',\r\n};\r\n\r\nconst dicomsr = {\r\n  sopClassHandler: '@ohif/extension-cornerstone-dicom-sr.sopClassHandlerModule.dicom-sr',\r\n  sopClassHandler3D: '@ohif/extension-cornerstone-dicom-sr.sopClassHandlerModule.dicom-sr-3d',\r\n  viewport: '@ohif/extension-cornerstone-dicom-sr.viewportModule.dicom-sr',\r\n};\r\n\r\nconst dicomvideo = {\r\n  sopClassHandler: '@ohif/extension-dicom-video.sopClassHandlerModule.dicom-video',\r\n  viewport: '@ohif/extension-dicom-video.viewportModule.dicom-video',\r\n};\r\n\r\nconst dicompdf = {\r\n  sopClassHandler: '@ohif/extension-dicom-pdf.sopClassHandlerModule.dicom-pdf',\r\n  viewport: '@ohif/extension-dicom-pdf.viewportModule.dicom-pdf',\r\n};\r\n\r\nconst dicomSeg = {\r\n  sopClassHandler: '@ohif/extension-cornerstone-dicom-seg.sopClassHandlerModule.dicom-seg',\r\n  viewport: '@ohif/extension-cornerstone-dicom-seg.viewportModule.dicom-seg',\r\n};\r\n\r\nconst dicomPmap = {\r\n  sopClassHandler: '@ohif/extension-cornerstone-dicom-pmap.sopClassHandlerModule.dicom-pmap',\r\n  viewport: '@ohif/extension-cornerstone-dicom-pmap.viewportModule.dicom-pmap',\r\n};\r\n\r\nconst dicomRT = {\r\n  viewport: '@ohif/extension-cornerstone-dicom-rt.viewportModule.dicom-rt',\r\n  sopClassHandler: '@ohif/extension-cornerstone-dicom-rt.sopClassHandlerModule.dicom-rt',\r\n};\r\n\r\nconst extensionDependencies = {\r\n  // Can derive the versions at least process.env.from npm_package_version\r\n  '@ohif/extension-default': '^3.0.0',\r\n  '@ohif/extension-cornerstone': '^3.0.0',\r\n  '@ohif/extension-measurement-tracking': '^3.0.0',\r\n  '@ohif/extension-cornerstone-dicom-sr': '^3.0.0',\r\n  '@ohif/extension-cornerstone-dicom-seg': '^3.0.0',\r\n  '@ohif/extension-cornerstone-dicom-pmap': '^3.0.0',\r\n  '@ohif/extension-cornerstone-dicom-rt': '^3.0.0',\r\n  '@ohif/extension-dicom-pdf': '^3.0.1',\r\n  '@ohif/extension-dicom-video': '^3.0.1',\r\n};\r\n\r\nfunction modeFactory({ modeConfiguration }) {\r\n  let _activatePanelTriggersSubscriptions = [];\r\n  return {\r\n    // TODO: We're using this as a route segment\r\n    // We should not be.\r\n    id,\r\n    routeName: 'viewer',\r\n    displayName: i18n.t('Modes:Basic Viewer'),\r\n    /**\r\n     * Lifecycle hooks\r\n     */\r\n    onModeEnter: function ({ servicesManager, extensionManager, commandsManager }: withAppTypes) {\r\n      const { measurementService, toolbarService, toolGroupService, customizationService } =\r\n        servicesManager.services;\r\n\r\n      measurementService.clearMeasurements();\r\n\r\n      performCustomizations(customizationService);\r\n\r\n      // Init Default and SR ToolGroups\r\n      initToolGroups(extensionManager, toolGroupService, commandsManager, this.labelConfig);\r\n\r\n      toolbarService.addButtons([...toolbarButtons, ...segmentationButtons, ...moreTools]);\r\n      toolbarService.createButtonSection('primary', [\r\n        'MeasurementTools',\r\n        'Zoom',\r\n        'Pan',\r\n        'TrackballRotate',\r\n        'WindowLevel',\r\n        'Capture',\r\n        // 'Layout',\r\n        'MPR',\r\n        'Panoramic',\r\n        'Crosshairs',\r\n        'MoreTools',\r\n      ]);\r\n\r\n      toolbarService.createButtonSection('segmentationToolbox', ['BrushTools', 'Edits', 'Shapes']);\r\n    },\r\n    onModeExit: ({ servicesManager }: withAppTypes) => {\r\n      const {\r\n        toolGroupService,\r\n        syncGroupService,\r\n        segmentationService,\r\n        cornerstoneViewportService,\r\n        uiDialogService,\r\n        uiModalService,\r\n      } = servicesManager.services;\r\n\r\n      _activatePanelTriggersSubscriptions.forEach(sub => sub.unsubscribe());\r\n      _activatePanelTriggersSubscriptions = [];\r\n\r\n      uiDialogService.dismissAll();\r\n      uiModalService.hide();\r\n      toolGroupService.destroy();\r\n      syncGroupService.destroy();\r\n      segmentationService.destroy();\r\n      cornerstoneViewportService.destroy();\r\n    },\r\n    validationTags: {\r\n      study: [],\r\n      series: [],\r\n    },\r\n\r\n    isValidMode: function ({ modalities }) {\r\n      const modalities_list = modalities.split('\\\\');\r\n\r\n      // Exclude non-image modalities\r\n      return {\r\n        valid: !!modalities_list.filter(modality => NON_IMAGE_MODALITIES.indexOf(modality) === -1)\r\n          .length,\r\n        description:\r\n          'The mode does not support studies that ONLY include the following modalities: SM, ECG, SEG, RTSTRUCT',\r\n      };\r\n    },\r\n    routes: [\r\n      {\r\n        path: 'longitudinal',\r\n        /*init: ({ servicesManager, extensionManager }) => {\r\n          //defaultViewerRouteInit\r\n        },*/\r\n        layoutTemplate: () => {\r\n          return {\r\n            id: ohif.layout,\r\n            props: {\r\n              leftPanels: [tracked.thumbnailList],\r\n              rightPanels: [\r\n                cornerstone.segmentation,\r\n                // tracked.measurements,\r\n                // ohif.volumeEditionPanel,\r\n                ohif.panoramicPanel,\r\n              ],\r\n              rightPanelClosed: true,\r\n              viewports: [\r\n                {\r\n                  namespace: tracked.viewport,\r\n                  displaySetsToDisplay: [\r\n                    ohif.sopClassHandler,\r\n                    dicomvideo.sopClassHandler,\r\n                    dicomsr.sopClassHandler3D,\r\n                    ohif.wsiSopClassHandler,\r\n                  ],\r\n                },\r\n                {\r\n                  namespace: dicomsr.viewport,\r\n                  displaySetsToDisplay: [dicomsr.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: dicompdf.viewport,\r\n                  displaySetsToDisplay: [dicompdf.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: dicomSeg.viewport,\r\n                  displaySetsToDisplay: [dicomSeg.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: dicomPmap.viewport,\r\n                  displaySetsToDisplay: [dicomPmap.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: dicomRT.viewport,\r\n                  displaySetsToDisplay: [dicomRT.sopClassHandler],\r\n                },\r\n              ],\r\n            },\r\n          };\r\n        },\r\n      },\r\n    ],\r\n    extensions: extensionDependencies,\r\n    // Default protocol gets self-registered by default in the init\r\n    hangingProtocol: 'fourUp',\r\n    // Order is important in sop class handlers when two handlers both use\r\n    // the same sop class under different situations.  In that case, the more\r\n    // general handler needs to come last.  For this case, the dicomvideo must\r\n    // come first to remove video transfer syntax before ohif uses images\r\n    sopClassHandlers: [\r\n      dicomvideo.sopClassHandler,\r\n      dicomSeg.sopClassHandler,\r\n      dicomPmap.sopClassHandler,\r\n      ohif.sopClassHandler,\r\n      ohif.wsiSopClassHandler,\r\n      dicompdf.sopClassHandler,\r\n      dicomsr.sopClassHandler3D,\r\n      dicomsr.sopClassHandler,\r\n      dicomRT.sopClassHandler,\r\n    ],\r\n    hotkeys: [...hotkeys.defaults.hotkeyBindings],\r\n    ...modeConfiguration,\r\n  };\r\n}\r\n\r\nconst mode = {\r\n  id,\r\n  modeFactory,\r\n  extensionDependencies,\r\n};\r\n\r\nexport default mode;\r\nexport { initToolGroups, moreTools, segmentationButtons, toolbarButtons };\r\n","export const performCustomizations = customizationService => {\r\n  // Set the custom SegmentationTable\r\n  customizationService.addModeCustomizations([\r\n    // To disable editing in the SegmentationTable\r\n    {\r\n      id: 'PanelSegmentation.disableEditing',\r\n      disableEditing: false,\r\n    },\r\n    // to only show current study in the panel study browser\r\n    // {\r\n    //   id: 'PanelStudyBrowser.studyMode',\r\n    //   mode: 'primary',\r\n    // },\r\n    // To disable editing in the MeasurementTable\r\n    // {\r\n    //   id: 'PanelMeasurement.disableEditing',\r\n    //   disableEditing: true,\r\n    // },\r\n    //   {\r\n    //     id: 'measurementLabels',\r\n    //     labelOnMeasure: true,\r\n    //     exclusive: true,\r\n    //     items: [\r\n    //       { value: 'Head', label: 'Head' },\r\n    //       { value: 'Shoulder', label: 'Shoulder' },\r\n    //       { value: 'Knee', label: 'Knee' },\r\n    //       { value: 'Toe', label: 'Toe' },\r\n    //     ],\r\n    //   },\r\n  ]);\r\n};\r\n"],"names":["id","packageJson","colours","colorsByOrientation","axial","sagittal","coronal","extensionManager","toolGroupService","commandsManager","modeLabelConfig","toolGroupId","utilityModule","getModuleEntry","toolNames","Enums","exports","tools","active","toolName","WindowLevel","bindings","mouseButton","MouseBindings","Primary","Pan","Auxiliary","Zoom","Secondary","StackScroll","Wheel","passive","Length","ArrowAnnotate","configuration","getTextCallback","callback","eventDetails","runCommand","changeTextCallback","data","undefined","Bidirectional","DragProbe","Probe","EllipticalROI","CircleROI","RectangleROI","Angle","CobbAngle","Magnify","CalibrationLine","Disease","PlanarFreehandContourSegmentation","displayOnePointAsCrosshairs","UltrasoundDirectional","PlanarFreehandROI","SplineROI","LivewireContour","WindowLevelRegion","enabled","ImageOverlayViewer","ReferenceLines","SRToolNames","SRSCOORD3DPoint","disabled","AdvancedMagnify","createToolGroupAndAddTools","initDefaultToolGroup","SRUtilityModule","CS3DUtilityModule","SRLength","SRArrowAnnotate","SRBidirectional","SREllipticalROI","SRCircleROI","SRPlanarFreehandROI","SRRectangleROI","DICOMSRDisplay","initSRToolGroup","serviceManager","_servicesManager","cornerstoneViewportService","services","Brush","RectangleScissors","CircleScissors","SphereScissors","RectangleROIThreshold","PaintFill","RectangleROIStartEndThreshold","parentTool","activeStrategy","strategySpecificConfiguration","THRESHOLD","isDynamic","dynamicRadius","Crosshairs","viewportIndicators","viewportIndicatorsConfig","circleRadius","xOffset","yOffset","disableOnPassive","autoPan","panSize","getReferenceLineColor","viewportId","viewportInfo","getViewportInfo","viewportOptions","orientation","console","warn","initMPRToolGroup","TrackballRotateTool","initVolume3DToolGroup","windowLevelPresets","defaults","createButton","ToolbarService","_createColormap","label","colormap","toString","title","subtitle","type","commands","commandName","commandOptions","setToolActiveToolbar","toolGroupIds","uiType","props","groupId","evaluate","primary","icon","tooltip","secondary","items","name","unsupportedViewportTypes","disabledText","rows","columns","isAction","renderer","WindowLevelMenuItem","options","min","max","step","value","values","run","thresholdRangeOption","find","option","condition","ReferenceLinesListeners","context","listeners","EVENTS","VIEWPORT_NEW_IMAGE_SET","toggledState","ViewportGridService","ACTIVE_VIEWPORT_ID_CHANGED","VIEWPORTS_READY","supportedModalities","NON_IMAGE_MODALITIES","ohif","cornerstone","tracked","dicomsr","dicomvideo","dicompdf","dicomSeg","dicomPmap","dicomRT","extensionDependencies","modeFactory","modeConfiguration","_activatePanelTriggersSubscriptions","routeName","displayName","i18n","t","onModeEnter","servicesManager","measurementService","toolbarService","customizationService","clearMeasurements","addModeCustomizations","disableEditing","performCustomizations","initToolGroups","this","labelConfig","addButtons","toolbarButtons","segmentationButtons","moreTools","createButtonSection","onModeExit","syncGroupService","segmentationService","uiDialogService","uiModalService","forEach","sub","unsubscribe","dismissAll","hide","destroy","validationTags","study","series","isValidMode","modalities","valid","split","filter","modality","indexOf","length","description","routes","path","layoutTemplate","leftPanels","rightPanels","rightPanelClosed","viewports","namespace","displaySetsToDisplay","extensions","hangingProtocol","sopClassHandlers","hotkeys","hotkeyBindings"],"sourceRoot":""}