"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7041],{97041:(o,e,t)=>{t.r(e),t.d(e,{default:()=>k,initToolGroups:()=>i,moreTools:()=>T,toolbarButtons:()=>u});var a=t(55411),l=t(92344);const n=JSON.parse('{"UU":"@ohif/mode-longitudinal"}').UU;const i=function(o,e,t,a){!function(o,e,t,a,l){const n=o.getModuleEntry("@ohif/extension-cornerstone.utilityModule.tools"),{toolNames:i,Enums:r}=n.exports,s={active:[{toolName:i.WindowLevel,bindings:[{mouseButton:r.MouseBindings.Primary}]},{toolName:i.Pan,bindings:[{mouseButton:r.MouseBindings.Auxiliary}]},{toolName:i.Zoom,bindings:[{mouseButton:r.MouseBindings.Secondary}]},{toolName:i.StackScrollMouseWheel,bindings:[]}],passive:[{toolName:i.Length},{toolName:i.ArrowAnnotate,configuration:{getTextCallback:(o,e)=>{l?o(" "):t.runCommand("arrowTextCallback",{callback:o,eventDetails:e})},changeTextCallback:(o,e,a)=>{void 0===l&&t.runCommand("arrowTextCallback",{callback:a,data:o,eventDetails:e})}}},{toolName:i.Bidirectional},{toolName:i.DragProbe},{toolName:i.Probe},{toolName:i.EllipticalROI},{toolName:i.CircleROI},{toolName:i.RectangleROI},{toolName:i.StackScroll},{toolName:i.Angle},{toolName:i.CobbAngle},{toolName:i.Magnify},{toolName:i.SegmentationDisplay},{toolName:i.CalibrationLine},{toolName:i.UltrasoundDirectional},{toolName:i.PlanarFreehandROI},{toolName:i.SplineROI},{toolName:i.LivewireContour}],enabled:[{toolName:i.ImageOverlayViewer},{toolName:i.ReferenceLines}],disabled:[{toolName:i.AdvancedMagnify}]};e.createToolGroupAndAddTools(a,s)}(o,e,t,"default",a),function(o,e){const t=o.getModuleEntry("@ohif/extension-cornerstone-dicom-sr.utilityModule.tools");if(!t)return;const a=o.getModuleEntry("@ohif/extension-cornerstone.utilityModule.tools"),{toolNames:l}=t.exports,{toolNames:n,Enums:i}=a.exports,r={active:[{toolName:n.WindowLevel,bindings:[{mouseButton:i.MouseBindings.Primary}]},{toolName:n.Pan,bindings:[{mouseButton:i.MouseBindings.Auxiliary}]},{toolName:n.Zoom,bindings:[{mouseButton:i.MouseBindings.Secondary}]},{toolName:n.StackScrollMouseWheel,bindings:[]}],passive:[{toolName:l.SRLength},{toolName:l.SRArrowAnnotate},{toolName:l.SRBidirectional},{toolName:l.SREllipticalROI},{toolName:l.SRCircleROI},{toolName:l.SRPlanarFreehandROI},{toolName:l.SRRectangleROI}],enabled:[{toolName:l.DICOMSRDisplay,bindings:[]}]};e.createToolGroupAndAddTools("SRToolGroup",r)}(o,e),function(o,e,t,a){const l=o.getModuleEntry("@ohif/extension-cornerstone.utilityModule.tools"),{toolNames:n,Enums:i}=l.exports;console.log("TOOL NAMES INIT",n);const r={active:[{toolName:n.WindowLevel,bindings:[{mouseButton:i.MouseBindings.Primary}]},{toolName:n.Pan,bindings:[{mouseButton:i.MouseBindings.Auxiliary}]},{toolName:n.Zoom,bindings:[{mouseButton:i.MouseBindings.Secondary}]},{toolName:n.StackScrollMouseWheel,bindings:[]}],passive:[{toolName:n.Length},{toolName:n.ArrowAnnotate,configuration:{getTextCallback:(o,e)=>{a?o(""):t.runCommand("arrowTextCallback",{callback:o,eventDetails:e})},changeTextCallback:(o,e,l)=>{void 0===a&&t.runCommand("arrowTextCallback",{callback:l,data:o,eventDetails:e})}}},{toolName:n.Bidirectional},{toolName:n.DragProbe},{toolName:n.Probe},{toolName:n.EllipticalROI},{toolName:n.CircleROI},{toolName:n.RectangleROI},{toolName:n.StackScroll},{toolName:n.Angle},{toolName:n.CobbAngle},{toolName:n.PlanarFreehandROI},{toolName:n.SegmentationDisplay},{toolName:n.Brush},{toolName:n.RectangleScissors},{toolName:n.CircleScissors},{toolName:n.SphereScissors},{toolName:n.RectangleROIThreshold},{toolName:n.PaintFill},{toolName:n.RectangleROIStartEndThreshold},{toolName:n.Undo}],disabled:[{toolName:n.Crosshairs,configuration:{viewportIndicators:!1,disableOnPassive:!0,autoPan:{enabled:!1,panSize:10}}},{toolName:n.AdvancedMagnify},{toolName:n.ReferenceLines}]};console.log("CREATE TOOL GROUP AND ADD TOOLS MPR",r,n),e.createToolGroupAndAddTools("mpr",r)}(o,e,t,a),function(o,e){const t=o.getModuleEntry("@ohif/extension-cornerstone.utilityModule.tools"),{toolNames:a,Enums:l}=t.exports,n={active:[{toolName:a.TrackballRotateTool,bindings:[{mouseButton:l.MouseBindings.Primary}]},{toolName:a.Zoom,bindings:[{mouseButton:l.MouseBindings.Secondary}]},{toolName:a.Pan,bindings:[{mouseButton:l.MouseBindings.Auxiliary}]}]};e.createToolGroupAndAddTools("volume3d",n)}(o,e)};var r=t(97490);const{windowLevelPresets:s}=a.NT,{createButton:c}=a.hx;function d(o,e){return{id:o.toString(),title:o,subtitle:o,type:"action",commands:[{commandName:"setAllViewportsColorMap",commandOptions:{...s[1]}},{commandName:"setAllViewportsColorMap",commandOptions:{...s[1]}}]}}const m={commandName:"setToolActiveToolbar",commandOptions:{toolGroupIds:["default","mpr","SRToolGroup","volume3d"]}},u=[{id:"MeasurementTools",uiType:"ohif.splitButton",props:{groupId:"MeasurementTools",evaluate:"evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList",primary:c({id:"Length",icon:"tool-length",label:"Length",tooltip:"Length Tool",commands:m,evaluate:"evaluate.cornerstoneTool"}),secondary:{icon:"chevron-down",tooltip:"More Measure Tools"},items:[c({id:"Length",icon:"tool-length",label:"Length",tooltip:"Length Tool",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"Bidirectional",icon:"tool-bidirectional",label:"Bidirectional",tooltip:"Bidirectional Tool",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"ArrowAnnotate",icon:"tool-annotate",label:"Annotation",tooltip:"Arrow Annotate",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"EllipticalROI",icon:"tool-ellipse",label:"Ellipse",tooltip:"Ellipse ROI",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"RectangleROI",icon:"tool-rectangle",label:"Rectangle",tooltip:"Rectangle ROI",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"CircleROI",icon:"tool-circle",label:"Circle",tooltip:"Circle Tool",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"PlanarFreehandROI",icon:"icon-tool-freehand-roi",label:"Freehand ROI",tooltip:"Freehand ROI",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"SplineROI",icon:"icon-tool-spline-roi",label:"Spline ROI",tooltip:"Spline ROI",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"LivewireContour",icon:"icon-tool-livewire",label:"Livewire tool",tooltip:"Livewire tool",commands:m,evaluate:"evaluate.cornerstoneTool"})]}},{id:"Zoom",uiType:"ohif.radioGroup",props:{icon:"tool-zoom",label:"Zoom",commands:m,evaluate:"evaluate.cornerstoneTool"}},{id:"WindowLevel",uiType:"ohif.radioGroup",props:{icon:"tool-window-level",label:"Window Level",commands:m,evaluate:"evaluate.cornerstoneTool"}},{id:"Pan",uiType:"ohif.radioGroup",props:{type:"tool",icon:"tool-move",label:"Pan",commands:m,evaluate:"evaluate.cornerstoneTool"}},{id:"TrackballRotate",uiType:"ohif.radioGroup",props:{type:"tool",icon:"tool-3d-rotate",label:"3D Rotate",commands:m,evaluate:{name:"evaluate.cornerstoneTool",disabledText:"Select a 3D viewport to enable this tool"}}},{id:"Capture",uiType:"ohif.radioGroup",props:{icon:"tool-capture",label:"Capture",commands:"showDownloadViewportModal",evaluate:"evaluate.action"}},{id:"Layout",uiType:"ohif.layoutSelector",props:{rows:3,columns:4,evaluate:"evaluate.action"}},{id:"Crosshairs",uiType:"ohif.radioGroup",props:{type:"tool",icon:"tool-crosshair",label:"Crosshairs",commands:{commandName:"setToolActiveToolbar",commandOptions:{toolGroupIds:["mpr"]}},evaluate:{name:"evaluate.cornerstoneTool",disabledText:"Select an MPR viewport to enable this tool"}}},{id:"fusionPTColormap",uiType:"ohif.splitButton",props:{groupId:"fusionPTColormap",evaluate:"evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList",primary:c({id:"fusionPTColormap",icon:"tool-fusion-color",label:"Fusion PT Colormap",tooltip:"Fusion PT Colormap",commands:[],evaluate:"evaluate.cornerstoneTool"}),secondary:{icon:"chevron-down",tooltip:"PET Image Colormap"},isAction:!0,renderer:r.d4,items:[d("HSV"),d("Hot Iron"),d("S PET"),d("Red Hot"),d("Perfusion"),d("Rainbow"),d("SUV"),d("GE 256"),d("GE"),d("Siemens")]}},{id:"SegmentationTools",uiType:"ohif.splitButton",props:{groupId:"SegmentationTools",evaluate:"evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList",primary:c({id:"Brush",icon:"tool-brushe",label:"Paint Brush",tooltip:"Paint Brush",commands:m,evaluate:"evaluate.cornerstoneTool"}),secondary:{icon:"chevron-down",tooltip:"More Segmentation Tools"},items:[c({id:"Brush",icon:"tool-brushe",label:"Paint Brush",tooltip:"Paint Brush",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"RectangleScissor",icon:"tool-rscissors",label:"Rectangle Segmentation",tooltip:"Rectangle Segmentation Tool",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"CircleScissor",icon:"tool-cscissors",label:"Circle Segmentation",tooltip:"Circle Segmentation Tool",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"SphereScissor",icon:"tool-sscissors",label:"Sphere Segmentation",tooltip:"Sphere Segmentation Tool",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"PaintFill",icon:"paint-fill",label:"Fill Holes",tooltip:"Fill Holes Tool",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"RectangleROIThreshold",icon:"tool-rroithreshold",label:"Rectangle Threshold Segmentation",tooltip:"Rectangle ROI Threshold Tool",commands:m,evaluate:"evaluate.cornerstoneTool"}),c({id:"RectangleROIStartEndThreshold",icon:"tool-rroithresholdstartend",label:"3D Rectangle Threshold Segmentation",tooltip:"Rectangle ROI Start End Threshold Tool",commands:m,evaluate:"evaluate.cornerstoneTool"})]}}];var p=t(92136);const{createButton:v}=a.hx,g=[{commandName:"setSourceViewportForReferenceLinesTool",context:"CORNERSTONE"}],T=[{id:"MoreTools",uiType:"ohif.splitButton",props:{groupId:"MoreTools",evaluate:"evaluate.group.promoteToPrimaryIfCornerstoneToolNotActiveInTheList",primary:v({id:"Reset",icon:"tool-reset",tooltip:"Reset View",label:"Reset",commands:"resetViewport",evaluate:"evaluate.action"}),secondary:{icon:"chevron-down",label:"",tooltip:"More Tools"},items:[v({id:"Reset",icon:"tool-reset",label:"Reset View",tooltip:"Reset View",commands:"resetViewport",evaluate:"evaluate.action"}),v({id:"rotate-right",icon:"tool-rotate-right",label:"Rotate Right",tooltip:"Rotate +90",commands:"rotateViewportCW",evaluate:"evaluate.action"}),v({id:"flipHorizontal",icon:"tool-flip-horizontal",label:"Flip Horizontal",tooltip:"Flip Horizontally",commands:"flipViewportHorizontal",evaluate:["evaluate.viewportProperties.toggle","evaluate.not3D"]}),v({id:"ImageSliceSync",icon:"link",label:"Image Slice Sync",tooltip:"Enable position synchronization on stack viewports",commands:{commandName:"toggleSynchronizer",commandOptions:{type:"imageSlice"}},listeners:{[p.EVENTS.STACK_VIEWPORT_NEW_STACK]:{commandName:"toggleImageSliceSync",commandOptions:{toggledState:!0}}},evaluate:["evaluate.cornerstone.synchronizer","evaluate.not3D"]}),v({id:"ReferenceLines",icon:"tool-referenceLines",label:"Reference Lines",tooltip:"Show Reference Lines",commands:"toggleEnabledDisabledToolbar",listeners:{[a.sI.EVENTS.ACTIVE_VIEWPORT_ID_CHANGED]:g,[a.sI.EVENTS.VIEWPORTS_READY]:g},evaluate:"evaluate.cornerstoneTool.toggle"}),v({id:"ImageOverlayViewer",icon:"toggle-dicom-overlay",label:"Image Overlay",tooltip:"Toggle Image Overlay",commands:"toggleEnabledDisabledToolbar",evaluate:"evaluate.cornerstoneTool.toggle"}),v({id:"StackScroll",icon:"tool-stack-scroll",label:"Stack Scroll",tooltip:"Stack Scroll",commands:m,evaluate:"evaluate.cornerstoneTool"}),v({id:"invert",icon:"tool-invert",label:"Invert",tooltip:"Invert Colors",commands:"invertViewport",evaluate:"evaluate.viewportProperties.toggle"}),v({id:"Probe",icon:"tool-probe",label:"Probe",tooltip:"Probe",commands:m,evaluate:"evaluate.cornerstoneTool"}),v({id:"Cine",icon:"tool-cine",label:"Cine",tooltip:"Cine",commands:"toggleCine",evaluate:["evaluate.cine","evaluate.not3D"]}),v({id:"Angle",icon:"tool-angle",label:"Angle",tooltip:"Angle",commands:m,evaluate:"evaluate.cornerstoneTool"}),v({id:"Magnify",icon:"tool-magnify",label:"Zoom-in",tooltip:"Zoom-in",commands:m,evaluate:"evaluate.cornerstoneTool"}),v({id:"CalibrationLine",icon:"tool-calibration",label:"Calibration",tooltip:"Calibration Line",commands:m,evaluate:"evaluate.cornerstoneTool"}),v({id:"TagBrowser",icon:"dicom-tag-browser",label:"Dicom Tag Browser",tooltip:"Dicom Tag Browser",commands:"openDICOMTagViewer"}),v({id:"AdvancedMagnify",icon:"icon-tool-loupe",label:"Magnify Probe",tooltip:"Magnify Probe",commands:"toggleActiveDisabledToolbar",evaluate:"evaluate.cornerstoneTool.toggle.ifStrictlyDisabled"}),v({id:"UltrasoundDirectionalTool",icon:"icon-tool-ultrasound-bidirectional",label:"Ultrasound Directional",tooltip:"Ultrasound Directional",commands:m,evaluate:["evaluate.cornerstoneTool","evaluate.isUS"]})]}}],h=["SM","ECG","SR","SEG","RTSTRUCT"],b="@ohif/extension-default.layoutTemplateModule.viewerLayout",S="@ohif/extension-default.sopClassHandlerModule.stack",f="@ohif/extension-default.panelModule.volumeEditionPanel",y="@ohif/extension-default.panelModule.panoramicGenerationPanel",N="@ohif/extension-measurement-tracking.panelModule.seriesList",R="@ohif/extension-measurement-tracking.viewportModule.cornerstone-tracked",M="@ohif/extension-cornerstone-dicom-sr.sopClassHandlerModule.dicom-sr",C="@ohif/extension-cornerstone-dicom-sr.viewportModule.dicom-sr",w="@ohif/extension-dicom-video.sopClassHandlerModule.dicom-video",I="@ohif/extension-dicom-video.viewportModule.dicom-video",P="@ohif/extension-dicom-pdf.sopClassHandlerModule.dicom-pdf",O="@ohif/extension-dicom-pdf.viewportModule.dicom-pdf",A="@ohif/extension-cornerstone-dicom-seg.sopClassHandlerModule.dicom-seg",E="@ohif/extension-cornerstone-dicom-seg.viewportModule.dicom-seg",x="@ohif/extension-cornerstone-dicom-seg.panelModule.panelSegmentation",B="@ohif/extension-cornerstone-dicom-rt.viewportModule.dicom-rt",D="@ohif/extension-cornerstone-dicom-rt.sopClassHandlerModule.dicom-rt",L={"@ohif/extension-default":"^3.0.0","@ohif/extension-cornerstone":"^3.0.0","@ohif/extension-measurement-tracking":"^3.0.0","@ohif/extension-cornerstone-dicom-sr":"^3.0.0","@ohif/extension-cornerstone-dicom-seg":"^3.0.0","@ohif/extension-cornerstone-dicom-rt":"^3.0.0","@ohif/extension-dicom-pdf":"^3.0.1","@ohif/extension-dicom-video":"^3.0.1"};const k={id:n,modeFactory:function({modeConfiguration:o}){let e=[];return{id:n,routeName:"viewer",displayName:l.A.t("Modes:Basic Viewer"),onModeEnter:function({servicesManager:o,extensionManager:t,commandsManager:a}){const{measurementService:l,toolbarService:n,toolGroupService:r,customizationService:s,panelService:c,segmentationService:d}=o.services;l.clearMeasurements(),i(t,r,a,this.labelConfig),n.addButtons([...u,...T]),n.createButtonSection("primary",["MeasurementTools","Zoom","Pan","TrackballRotate","WindowLevel","Capture","Crosshairs","MoreTools"]),s.addModeCustomizations([{id:"segmentation.panel",disableEditing:!0}]),e=[...c.addActivatePanelTriggers(x,[{sourcePubSubService:d,sourceEvents:[d.EVENTS.SEGMENTATION_ADDED]}])]},onModeExit:({servicesManager:o})=>{const{toolGroupService:t,syncGroupService:a,segmentationService:l,cornerstoneViewportService:n,uiDialogService:i,uiModalService:r}=o.services;e.forEach((o=>o.unsubscribe())),e=[],i.dismissAll(),r.hide(),t.destroy(),a.destroy(),l.destroy(),n.destroy()},validationTags:{study:[],series:[]},isValidMode:function({modalities:o}){return{valid:!!o.split("\\").filter((o=>-1===h.indexOf(o))).length,description:"The mode does not support studies that ONLY include the following modalities: SM, ECG, SR, SEG, RTSTRUCT"}},routes:[{path:"longitudinal",layoutTemplate:()=>({id:b,props:{leftPanels:[N],rightPanels:[x,f,y],rightPanelClosed:!0,viewports:[{namespace:R,displaySetsToDisplay:[S]},{namespace:C,displaySetsToDisplay:[M]},{namespace:I,displaySetsToDisplay:[w]},{namespace:O,displaySetsToDisplay:[P]},{namespace:E,displaySetsToDisplay:[A]},{namespace:B,displaySetsToDisplay:[D]}]}})}],extensions:L,hangingProtocol:"mprAnd3DVolumeViewport",sopClassHandlers:[w,A,S,P,M,D],hotkeys:[...a.ot.defaults.hotkeyBindings],...o}},extensionDependencies:L}}}]);
//# sourceMappingURL=7041.bundle.8727a500cf4e44364ea3.js.map